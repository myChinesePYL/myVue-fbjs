var Ma=Object.defineProperty;var Fa=(f,r,b)=>r in f?Ma(f,r,{enumerable:!0,configurable:!0,writable:!0,value:b}):f[r]=b;var Je=(f,r,b)=>(Fa(f,typeof r!="symbol"?r+"":r,b),b);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))x(O);new MutationObserver(O=>{for(const P of O)if(P.type==="childList")for(const z of P.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&x(z)}).observe(document,{childList:!0,subtree:!0});function b(O){const P={};return O.integrity&&(P.integrity=O.integrity),O.referrerPolicy&&(P.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?P.credentials="include":O.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function x(O){if(O.ep)return;O.ep=!0;const P=b(O);fetch(O.href,P)}})();function wr(f,r){const b=Object.create(null),x=f.split(",");for(let O=0;O<x.length;O++)b[x[O]]=!0;return r?O=>!!b[O.toLowerCase()]:O=>!!b[O]}const Jt={},Ti=[],De=()=>{},La=()=>!1,ja=/^on[^a-z]/,Tn=f=>ja.test(f),Tr=f=>f.startsWith("onUpdate:"),re=Object.assign,Or=(f,r)=>{const b=f.indexOf(r);b>-1&&f.splice(b,1)},Ia=Object.prototype.hasOwnProperty,Gt=(f,r)=>Ia.call(f,r),Nt=Array.isArray,zi=f=>On(f)==="[object Map]",Ra=f=>On(f)==="[object Set]",Wt=f=>typeof f=="function",ae=f=>typeof f=="string",Er=f=>typeof f=="symbol",ee=f=>f!==null&&typeof f=="object",io=f=>ee(f)&&Wt(f.then)&&Wt(f.catch),Ba=Object.prototype.toString,On=f=>Ba.call(f),Na=f=>On(f).slice(8,-1),Ha=f=>On(f)==="[object Object]",Pr=f=>ae(f)&&f!=="NaN"&&f[0]!=="-"&&""+parseInt(f,10)===f,vn=wr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),En=f=>{const r=Object.create(null);return b=>r[b]||(r[b]=f(b))},Wa=/-(\w)/g,Pi=En(f=>f.replace(Wa,(r,b)=>b?b.toUpperCase():"")),Xa=/\B([A-Z])/g,ki=En(f=>f.replace(Xa,"-$1").toLowerCase()),no=En(f=>f.charAt(0).toUpperCase()+f.slice(1)),ir=En(f=>f?`on${no(f)}`:""),Cn=(f,r)=>!Object.is(f,r),nr=(f,r)=>{for(let b=0;b<f.length;b++)f[b](r)},bn=(f,r,b)=>{Object.defineProperty(f,r,{configurable:!0,enumerable:!1,value:b})},Ya=f=>{const r=parseFloat(f);return isNaN(r)?f:r};let Es;const fr=()=>Es||(Es=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ar(f){if(Nt(f)){const r={};for(let b=0;b<f.length;b++){const x=f[b],O=ae(x)?Ga(x):Ar(x);if(O)for(const P in O)r[P]=O[P]}return r}else{if(ae(f))return f;if(ee(f))return f}}const Ua=/;(?![^(]*\))/g,za=/:([^]+)/,Va=/\/\*[^]*?\*\//g;function Ga(f){const r={};return f.replace(Va,"").split(Ua).forEach(b=>{if(b){const x=b.split(za);x.length>1&&(r[x[0].trim()]=x[1].trim())}}),r}function Dr(f){let r="";if(ae(f))r=f;else if(Nt(f))for(let b=0;b<f.length;b++){const x=Dr(f[b]);x&&(r+=x+" ")}else if(ee(f))for(const b in f)f[b]&&(r+=b+" ");return r.trim()}const qa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ka=wr(qa);function ro(f){return!!f||f===""}let Ee;class $a{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ee,!r&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const b=Ee;try{return Ee=this,r()}finally{Ee=b}}}on(){Ee=this}off(){Ee=this.parent}stop(r){if(this._active){let b,x;for(b=0,x=this.effects.length;b<x;b++)this.effects[b].stop();for(b=0,x=this.cleanups.length;b<x;b++)this.cleanups[b]();if(this.scopes)for(b=0,x=this.scopes.length;b<x;b++)this.scopes[b].stop(!0);if(!this.detached&&this.parent&&!r){const O=this.parent.scopes.pop();O&&O!==this&&(this.parent.scopes[this.index]=O,O.index=this.index)}this.parent=void 0,this._active=!1}}}function Ja(f,r=Ee){r&&r.active&&r.effects.push(f)}function Qa(){return Ee}const kr=f=>{const r=new Set(f);return r.w=0,r.n=0,r},so=f=>(f.w&ni)>0,oo=f=>(f.n&ni)>0,Za=({deps:f})=>{if(f.length)for(let r=0;r<f.length;r++)f[r].w|=ni},tl=f=>{const{deps:r}=f;if(r.length){let b=0;for(let x=0;x<r.length;x++){const O=r[x];so(O)&&!oo(O)?O.delete(f):r[b++]=O,O.w&=~ni,O.n&=~ni}r.length=b}},hr=new WeakMap;let Yi=0,ni=1;const dr=30;let Pe;const gi=Symbol(""),gr=Symbol("");class Mr{constructor(r,b=null,x){this.fn=r,this.scheduler=b,this.active=!0,this.deps=[],this.parent=void 0,Ja(this,x)}run(){if(!this.active)return this.fn();let r=Pe,b=ei;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=Pe,Pe=this,ei=!0,ni=1<<++Yi,Yi<=dr?Za(this):Ps(this),this.fn()}finally{Yi<=dr&&tl(this),ni=1<<--Yi,Pe=this.parent,ei=b,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Pe===this?this.deferStop=!0:this.active&&(Ps(this),this.onStop&&this.onStop(),this.active=!1)}}function Ps(f){const{deps:r}=f;if(r.length){for(let b=0;b<r.length;b++)r[b].delete(f);r.length=0}}let ei=!0;const ao=[];function Mi(){ao.push(ei),ei=!1}function Fi(){const f=ao.pop();ei=f===void 0?!0:f}function Ce(f,r,b){if(ei&&Pe){let x=hr.get(f);x||hr.set(f,x=new Map);let O=x.get(b);O||x.set(b,O=kr()),lo(O)}}function lo(f,r){let b=!1;Yi<=dr?oo(f)||(f.n|=ni,b=!so(f)):b=!f.has(Pe),b&&(f.add(Pe),Pe.deps.push(f))}function Ve(f,r,b,x,O,P){const z=hr.get(f);if(!z)return;let d=[];if(r==="clear")d=[...z.values()];else if(b==="length"&&Nt(f)){const i=Number(x);z.forEach((l,u)=>{(u==="length"||u>=i)&&d.push(l)})}else switch(b!==void 0&&d.push(z.get(b)),r){case"add":Nt(f)?Pr(b)&&d.push(z.get("length")):(d.push(z.get(gi)),zi(f)&&d.push(z.get(gr)));break;case"delete":Nt(f)||(d.push(z.get(gi)),zi(f)&&d.push(z.get(gr)));break;case"set":zi(f)&&d.push(z.get(gi));break}if(d.length===1)d[0]&&pr(d[0]);else{const i=[];for(const l of d)l&&i.push(...l);pr(kr(i))}}function pr(f,r){const b=Nt(f)?f:[...f];for(const x of b)x.computed&&As(x);for(const x of b)x.computed||As(x)}function As(f,r){(f!==Pe||f.allowRecurse)&&(f.scheduler?f.scheduler():f.run())}const el=wr("__proto__,__v_isRef,__isVue"),uo=new Set(Object.getOwnPropertyNames(Symbol).filter(f=>f!=="arguments"&&f!=="caller").map(f=>Symbol[f]).filter(Er)),il=Fr(),nl=Fr(!1,!0),rl=Fr(!0),Ds=sl();function sl(){const f={};return["includes","indexOf","lastIndexOf"].forEach(r=>{f[r]=function(...b){const x=Kt(this);for(let P=0,z=this.length;P<z;P++)Ce(x,"get",P+"");const O=x[r](...b);return O===-1||O===!1?x[r](...b.map(Kt)):O}}),["push","pop","shift","unshift","splice"].forEach(r=>{f[r]=function(...b){Mi();const x=Kt(this)[r].apply(this,b);return Fi(),x}}),f}function ol(f){const r=Kt(this);return Ce(r,"has",f),r.hasOwnProperty(f)}function Fr(f=!1,r=!1){return function(x,O,P){if(O==="__v_isReactive")return!f;if(O==="__v_isReadonly")return f;if(O==="__v_isShallow")return r;if(O==="__v_raw"&&P===(f?r?xl:po:r?go:ho).get(x))return x;const z=Nt(x);if(!f){if(z&&Gt(Ds,O))return Reflect.get(Ds,O,P);if(O==="hasOwnProperty")return ol}const d=Reflect.get(x,O,P);return(Er(O)?uo.has(O):el(O))||(f||Ce(x,"get",O),r)?d:ge(d)?z&&Pr(O)?d:d.value:ee(d)?f?vo(d):Ir(d):d}}const al=co(),ll=co(!0);function co(f=!1){return function(b,x,O,P){let z=b[x];if(qi(z)&&ge(z)&&!ge(O))return!1;if(!f&&(!vr(O)&&!qi(O)&&(z=Kt(z),O=Kt(O)),!Nt(b)&&ge(z)&&!ge(O)))return z.value=O,!0;const d=Nt(b)&&Pr(x)?Number(x)<b.length:Gt(b,x),i=Reflect.set(b,x,O,P);return b===Kt(P)&&(d?Cn(O,z)&&Ve(b,"set",x,O):Ve(b,"add",x,O)),i}}function ul(f,r){const b=Gt(f,r);f[r];const x=Reflect.deleteProperty(f,r);return x&&b&&Ve(f,"delete",r,void 0),x}function cl(f,r){const b=Reflect.has(f,r);return(!Er(r)||!uo.has(r))&&Ce(f,"has",r),b}function fl(f){return Ce(f,"iterate",Nt(f)?"length":gi),Reflect.ownKeys(f)}const fo={get:il,set:al,deleteProperty:ul,has:cl,ownKeys:fl},hl={get:rl,set(f,r){return!0},deleteProperty(f,r){return!0}},dl=re({},fo,{get:nl,set:ll}),Lr=f=>f,Pn=f=>Reflect.getPrototypeOf(f);function cn(f,r,b=!1,x=!1){f=f.__v_raw;const O=Kt(f),P=Kt(r);b||(r!==P&&Ce(O,"get",r),Ce(O,"get",P));const{has:z}=Pn(O),d=x?Lr:b?Nr:Br;if(z.call(O,r))return d(f.get(r));if(z.call(O,P))return d(f.get(P));f!==O&&f.get(r)}function fn(f,r=!1){const b=this.__v_raw,x=Kt(b),O=Kt(f);return r||(f!==O&&Ce(x,"has",f),Ce(x,"has",O)),f===O?b.has(f):b.has(f)||b.has(O)}function hn(f,r=!1){return f=f.__v_raw,!r&&Ce(Kt(f),"iterate",gi),Reflect.get(f,"size",f)}function ks(f){f=Kt(f);const r=Kt(this);return Pn(r).has.call(r,f)||(r.add(f),Ve(r,"add",f,f)),this}function Ms(f,r){r=Kt(r);const b=Kt(this),{has:x,get:O}=Pn(b);let P=x.call(b,f);P||(f=Kt(f),P=x.call(b,f));const z=O.call(b,f);return b.set(f,r),P?Cn(r,z)&&Ve(b,"set",f,r):Ve(b,"add",f,r),this}function Fs(f){const r=Kt(this),{has:b,get:x}=Pn(r);let O=b.call(r,f);O||(f=Kt(f),O=b.call(r,f)),x&&x.call(r,f);const P=r.delete(f);return O&&Ve(r,"delete",f,void 0),P}function Ls(){const f=Kt(this),r=f.size!==0,b=f.clear();return r&&Ve(f,"clear",void 0,void 0),b}function dn(f,r){return function(x,O){const P=this,z=P.__v_raw,d=Kt(z),i=r?Lr:f?Nr:Br;return!f&&Ce(d,"iterate",gi),z.forEach((l,u)=>x.call(O,i(l),i(u),P))}}function gn(f,r,b){return function(...x){const O=this.__v_raw,P=Kt(O),z=zi(P),d=f==="entries"||f===Symbol.iterator&&z,i=f==="keys"&&z,l=O[f](...x),u=b?Lr:r?Nr:Br;return!r&&Ce(P,"iterate",i?gr:gi),{next(){const{value:e,done:n}=l.next();return n?{value:e,done:n}:{value:d?[u(e[0]),u(e[1])]:u(e),done:n}},[Symbol.iterator](){return this}}}}function Qe(f){return function(...r){return f==="delete"?!1:this}}function gl(){const f={get(P){return cn(this,P)},get size(){return hn(this)},has:fn,add:ks,set:Ms,delete:Fs,clear:Ls,forEach:dn(!1,!1)},r={get(P){return cn(this,P,!1,!0)},get size(){return hn(this)},has:fn,add:ks,set:Ms,delete:Fs,clear:Ls,forEach:dn(!1,!0)},b={get(P){return cn(this,P,!0)},get size(){return hn(this,!0)},has(P){return fn.call(this,P,!0)},add:Qe("add"),set:Qe("set"),delete:Qe("delete"),clear:Qe("clear"),forEach:dn(!0,!1)},x={get(P){return cn(this,P,!0,!0)},get size(){return hn(this,!0)},has(P){return fn.call(this,P,!0)},add:Qe("add"),set:Qe("set"),delete:Qe("delete"),clear:Qe("clear"),forEach:dn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(P=>{f[P]=gn(P,!1,!1),b[P]=gn(P,!0,!1),r[P]=gn(P,!1,!0),x[P]=gn(P,!0,!0)}),[f,b,r,x]}const[pl,vl,ml,yl]=gl();function jr(f,r){const b=r?f?yl:ml:f?vl:pl;return(x,O,P)=>O==="__v_isReactive"?!f:O==="__v_isReadonly"?f:O==="__v_raw"?x:Reflect.get(Gt(b,O)&&O in x?b:x,O,P)}const _l={get:jr(!1,!1)},Cl={get:jr(!1,!0)},bl={get:jr(!0,!1)},ho=new WeakMap,go=new WeakMap,po=new WeakMap,xl=new WeakMap;function Sl(f){switch(f){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wl(f){return f.__v_skip||!Object.isExtensible(f)?0:Sl(Na(f))}function Ir(f){return qi(f)?f:Rr(f,!1,fo,_l,ho)}function Tl(f){return Rr(f,!1,dl,Cl,go)}function vo(f){return Rr(f,!0,hl,bl,po)}function Rr(f,r,b,x,O){if(!ee(f)||f.__v_raw&&!(r&&f.__v_isReactive))return f;const P=O.get(f);if(P)return P;const z=wl(f);if(z===0)return f;const d=new Proxy(f,z===2?x:b);return O.set(f,d),d}function Oi(f){return qi(f)?Oi(f.__v_raw):!!(f&&f.__v_isReactive)}function qi(f){return!!(f&&f.__v_isReadonly)}function vr(f){return!!(f&&f.__v_isShallow)}function mo(f){return Oi(f)||qi(f)}function Kt(f){const r=f&&f.__v_raw;return r?Kt(r):f}function yo(f){return bn(f,"__v_skip",!0),f}const Br=f=>ee(f)?Ir(f):f,Nr=f=>ee(f)?vo(f):f;function Ol(f){ei&&Pe&&(f=Kt(f),lo(f.dep||(f.dep=kr())))}function El(f,r){f=Kt(f);const b=f.dep;b&&pr(b)}function ge(f){return!!(f&&f.__v_isRef===!0)}function Pl(f){return ge(f)?f.value:f}const Al={get:(f,r,b)=>Pl(Reflect.get(f,r,b)),set:(f,r,b,x)=>{const O=f[r];return ge(O)&&!ge(b)?(O.value=b,!0):Reflect.set(f,r,b,x)}};function _o(f){return Oi(f)?f:new Proxy(f,Al)}class Dl{constructor(r,b,x,O){this._setter=b,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Mr(r,()=>{this._dirty||(this._dirty=!0,El(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!O,this.__v_isReadonly=x}get value(){const r=Kt(this);return Ol(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function kl(f,r,b=!1){let x,O;const P=Wt(f);return P?(x=f,O=De):(x=f.get,O=f.set),new Dl(x,O,P||!O,b)}function ii(f,r,b,x){let O;try{O=x?f(...x):f()}catch(P){An(P,r,b)}return O}function ke(f,r,b,x){if(Wt(f)){const P=ii(f,r,b,x);return P&&io(P)&&P.catch(z=>{An(z,r,b)}),P}const O=[];for(let P=0;P<f.length;P++)O.push(ke(f[P],r,b,x));return O}function An(f,r,b,x=!0){const O=r?r.vnode:null;if(r){let P=r.parent;const z=r.proxy,d=b;for(;P;){const l=P.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](f,z,d)===!1)return}P=P.parent}const i=r.appContext.config.errorHandler;if(i){ii(i,null,10,[f,z,d]);return}}Ml(f,b,O,x)}function Ml(f,r,b,x=!0){console.error(f)}let Ki=!1,mr=!1;const ue=[];let He=0;const Ei=[];let Ue=null,hi=0;const Co=Promise.resolve();let Hr=null;function Fl(f){const r=Hr||Co;return f?r.then(this?f.bind(this):f):r}function Ll(f){let r=He+1,b=ue.length;for(;r<b;){const x=r+b>>>1;$i(ue[x])<f?r=x+1:b=x}return r}function Wr(f){(!ue.length||!ue.includes(f,Ki&&f.allowRecurse?He+1:He))&&(f.id==null?ue.push(f):ue.splice(Ll(f.id),0,f),bo())}function bo(){!Ki&&!mr&&(mr=!0,Hr=Co.then(So))}function jl(f){const r=ue.indexOf(f);r>He&&ue.splice(r,1)}function Il(f){Nt(f)?Ei.push(...f):(!Ue||!Ue.includes(f,f.allowRecurse?hi+1:hi))&&Ei.push(f),bo()}function js(f,r=Ki?He+1:0){for(;r<ue.length;r++){const b=ue[r];b&&b.pre&&(ue.splice(r,1),r--,b())}}function xo(f){if(Ei.length){const r=[...new Set(Ei)];if(Ei.length=0,Ue){Ue.push(...r);return}for(Ue=r,Ue.sort((b,x)=>$i(b)-$i(x)),hi=0;hi<Ue.length;hi++)Ue[hi]();Ue=null,hi=0}}const $i=f=>f.id==null?1/0:f.id,Rl=(f,r)=>{const b=$i(f)-$i(r);if(b===0){if(f.pre&&!r.pre)return-1;if(r.pre&&!f.pre)return 1}return b};function So(f){mr=!1,Ki=!0,ue.sort(Rl);const r=De;try{for(He=0;He<ue.length;He++){const b=ue[He];b&&b.active!==!1&&ii(b,null,14)}}finally{He=0,ue.length=0,xo(),Ki=!1,Hr=null,(ue.length||Ei.length)&&So()}}function Bl(f,r,...b){if(f.isUnmounted)return;const x=f.vnode.props||Jt;let O=b;const P=r.startsWith("update:"),z=P&&r.slice(7);if(z&&z in x){const u=`${z==="modelValue"?"model":z}Modifiers`,{number:e,trim:n}=x[u]||Jt;n&&(O=b.map(t=>ae(t)?t.trim():t)),e&&(O=b.map(Ya))}let d,i=x[d=ir(r)]||x[d=ir(Pi(r))];!i&&P&&(i=x[d=ir(ki(r))]),i&&ke(i,f,6,O);const l=x[d+"Once"];if(l){if(!f.emitted)f.emitted={};else if(f.emitted[d])return;f.emitted[d]=!0,ke(l,f,6,O)}}function wo(f,r,b=!1){const x=r.emitsCache,O=x.get(f);if(O!==void 0)return O;const P=f.emits;let z={},d=!1;if(!Wt(f)){const i=l=>{const u=wo(l,r,!0);u&&(d=!0,re(z,u))};!b&&r.mixins.length&&r.mixins.forEach(i),f.extends&&i(f.extends),f.mixins&&f.mixins.forEach(i)}return!P&&!d?(ee(f)&&x.set(f,null),null):(Nt(P)?P.forEach(i=>z[i]=null):re(z,P),ee(f)&&x.set(f,z),z)}function Dn(f,r){return!f||!Tn(r)?!1:(r=r.slice(2).replace(/Once$/,""),Gt(f,r[0].toLowerCase()+r.slice(1))||Gt(f,ki(r))||Gt(f,r))}let We=null,kn=null;function xn(f){const r=We;return We=f,kn=f&&f.type.__scopeId||null,r}function Nl(f){kn=f}function Hl(){kn=null}function Wl(f,r=We,b){if(!r||f._n)return f;const x=(...O)=>{x._d&&zs(-1);const P=xn(r);let z;try{z=f(...O)}finally{xn(P),x._d&&zs(1)}return z};return x._n=!0,x._c=!0,x._d=!0,x}function rr(f){const{type:r,vnode:b,proxy:x,withProxy:O,props:P,propsOptions:[z],slots:d,attrs:i,emit:l,render:u,renderCache:e,data:n,setupState:t,ctx:o,inheritAttrs:c}=f;let s,h;const p=xn(f);try{if(b.shapeFlag&4){const _=O||x;s=Ne(u.call(_,_,e,P,t,n,o)),h=i}else{const _=r;s=Ne(_.length>1?_(P,{attrs:i,slots:d,emit:l}):_(P,null)),h=r.props?i:Xl(i)}}catch(_){Gi.length=0,An(_,f,1),s=ze(Ji)}let y=s;if(h&&c!==!1){const _=Object.keys(h),{shapeFlag:T}=y;_.length&&T&7&&(z&&_.some(Tr)&&(h=Yl(h,z)),y=Ai(y,h))}return b.dirs&&(y=Ai(y),y.dirs=y.dirs?y.dirs.concat(b.dirs):b.dirs),b.transition&&(y.transition=b.transition),s=y,xn(p),s}const Xl=f=>{let r;for(const b in f)(b==="class"||b==="style"||Tn(b))&&((r||(r={}))[b]=f[b]);return r},Yl=(f,r)=>{const b={};for(const x in f)(!Tr(x)||!(x.slice(9)in r))&&(b[x]=f[x]);return b};function Ul(f,r,b){const{props:x,children:O,component:P}=f,{props:z,children:d,patchFlag:i}=r,l=P.emitsOptions;if(r.dirs||r.transition)return!0;if(b&&i>=0){if(i&1024)return!0;if(i&16)return x?Is(x,z,l):!!z;if(i&8){const u=r.dynamicProps;for(let e=0;e<u.length;e++){const n=u[e];if(z[n]!==x[n]&&!Dn(l,n))return!0}}}else return(O||d)&&(!d||!d.$stable)?!0:x===z?!1:x?z?Is(x,z,l):!0:!!z;return!1}function Is(f,r,b){const x=Object.keys(r);if(x.length!==Object.keys(f).length)return!0;for(let O=0;O<x.length;O++){const P=x[O];if(r[P]!==f[P]&&!Dn(b,P))return!0}return!1}function zl({vnode:f,parent:r},b){for(;r&&r.subTree===f;)(f=r.vnode).el=b,r=r.parent}const Vl=f=>f.__isSuspense;function Gl(f,r){r&&r.pendingBranch?Nt(f)?r.effects.push(...f):r.effects.push(f):Il(f)}const pn={};function sr(f,r,b){return To(f,r,b)}function To(f,r,{immediate:b,deep:x,flush:O,onTrack:P,onTrigger:z}=Jt){var d;const i=Qa()===((d=ce)==null?void 0:d.scope)?ce:null;let l,u=!1,e=!1;if(ge(f)?(l=()=>f.value,u=vr(f)):Oi(f)?(l=()=>f,x=!0):Nt(f)?(e=!0,u=f.some(_=>Oi(_)||vr(_)),l=()=>f.map(_=>{if(ge(_))return _.value;if(Oi(_))return wi(_);if(Wt(_))return ii(_,i,2)})):Wt(f)?r?l=()=>ii(f,i,2):l=()=>{if(!(i&&i.isUnmounted))return n&&n(),ke(f,i,3,[t])}:l=De,r&&x){const _=l;l=()=>wi(_())}let n,t=_=>{n=p.onStop=()=>{ii(_,i,4)}},o;if(tn)if(t=De,r?b&&ke(r,i,3,[l(),e?[]:void 0,t]):l(),O==="sync"){const _=Yu();o=_.__watcherHandles||(_.__watcherHandles=[])}else return De;let c=e?new Array(f.length).fill(pn):pn;const s=()=>{if(p.active)if(r){const _=p.run();(x||u||(e?_.some((T,A)=>Cn(T,c[A])):Cn(_,c)))&&(n&&n(),ke(r,i,3,[_,c===pn?void 0:e&&c[0]===pn?[]:c,t]),c=_)}else p.run()};s.allowRecurse=!!r;let h;O==="sync"?h=s:O==="post"?h=()=>_e(s,i&&i.suspense):(s.pre=!0,i&&(s.id=i.uid),h=()=>Wr(s));const p=new Mr(l,h);r?b?s():c=p.run():O==="post"?_e(p.run.bind(p),i&&i.suspense):p.run();const y=()=>{p.stop(),i&&i.scope&&Or(i.scope.effects,p)};return o&&o.push(y),y}function ql(f,r,b){const x=this.proxy,O=ae(f)?f.includes(".")?Oo(x,f):()=>x[f]:f.bind(x,x);let P;Wt(r)?P=r:(P=r.handler,b=r);const z=ce;Di(this);const d=To(O,P.bind(x),b);return z?Di(z):pi(),d}function Oo(f,r){const b=r.split(".");return()=>{let x=f;for(let O=0;O<b.length&&x;O++)x=x[b[O]];return x}}function wi(f,r){if(!ee(f)||f.__v_skip||(r=r||new Set,r.has(f)))return f;if(r.add(f),ge(f))wi(f.value,r);else if(Nt(f))for(let b=0;b<f.length;b++)wi(f[b],r);else if(Ra(f)||zi(f))f.forEach(b=>{wi(b,r)});else if(Ha(f))for(const b in f)wi(f[b],r);return f}function ui(f,r,b,x){const O=f.dirs,P=r&&r.dirs;for(let z=0;z<O.length;z++){const d=O[z];P&&(d.oldValue=P[z].value);let i=d.dir[x];i&&(Mi(),ke(i,b,8,[f.el,d,f,r]),Fi())}}function Eo(f,r){return Wt(f)?(()=>re({name:f.name},r,{setup:f}))():f}const mn=f=>!!f.type.__asyncLoader,Po=f=>f.type.__isKeepAlive;function Kl(f,r){Ao(f,"a",r)}function $l(f,r){Ao(f,"da",r)}function Ao(f,r,b=ce){const x=f.__wdc||(f.__wdc=()=>{let O=b;for(;O;){if(O.isDeactivated)return;O=O.parent}return f()});if(Mn(r,x,b),b){let O=b.parent;for(;O&&O.parent;)Po(O.parent.vnode)&&Jl(x,r,b,O),O=O.parent}}function Jl(f,r,b,x){const O=Mn(r,f,x,!0);Do(()=>{Or(x[r],O)},b)}function Mn(f,r,b=ce,x=!1){if(b){const O=b[f]||(b[f]=[]),P=r.__weh||(r.__weh=(...z)=>{if(b.isUnmounted)return;Mi(),Di(b);const d=ke(r,b,f,z);return pi(),Fi(),d});return x?O.unshift(P):O.push(P),P}}const Ge=f=>(r,b=ce)=>(!tn||f==="sp")&&Mn(f,(...x)=>r(...x),b),Ql=Ge("bm"),Zl=Ge("m"),tu=Ge("bu"),eu=Ge("u"),iu=Ge("bum"),Do=Ge("um"),nu=Ge("sp"),ru=Ge("rtg"),su=Ge("rtc");function ou(f,r=ce){Mn("ec",f,r)}const au=Symbol.for("v-ndc"),yr=f=>f?Ho(f)?qr(f)||f.proxy:yr(f.parent):null,Vi=re(Object.create(null),{$:f=>f,$el:f=>f.vnode.el,$data:f=>f.data,$props:f=>f.props,$attrs:f=>f.attrs,$slots:f=>f.slots,$refs:f=>f.refs,$parent:f=>yr(f.parent),$root:f=>yr(f.root),$emit:f=>f.emit,$options:f=>Xr(f),$forceUpdate:f=>f.f||(f.f=()=>Wr(f.update)),$nextTick:f=>f.n||(f.n=Fl.bind(f.proxy)),$watch:f=>ql.bind(f)}),or=(f,r)=>f!==Jt&&!f.__isScriptSetup&&Gt(f,r),lu={get({_:f},r){const{ctx:b,setupState:x,data:O,props:P,accessCache:z,type:d,appContext:i}=f;let l;if(r[0]!=="$"){const t=z[r];if(t!==void 0)switch(t){case 1:return x[r];case 2:return O[r];case 4:return b[r];case 3:return P[r]}else{if(or(x,r))return z[r]=1,x[r];if(O!==Jt&&Gt(O,r))return z[r]=2,O[r];if((l=f.propsOptions[0])&&Gt(l,r))return z[r]=3,P[r];if(b!==Jt&&Gt(b,r))return z[r]=4,b[r];_r&&(z[r]=0)}}const u=Vi[r];let e,n;if(u)return r==="$attrs"&&Ce(f,"get",r),u(f);if((e=d.__cssModules)&&(e=e[r]))return e;if(b!==Jt&&Gt(b,r))return z[r]=4,b[r];if(n=i.config.globalProperties,Gt(n,r))return n[r]},set({_:f},r,b){const{data:x,setupState:O,ctx:P}=f;return or(O,r)?(O[r]=b,!0):x!==Jt&&Gt(x,r)?(x[r]=b,!0):Gt(f.props,r)||r[0]==="$"&&r.slice(1)in f?!1:(P[r]=b,!0)},has({_:{data:f,setupState:r,accessCache:b,ctx:x,appContext:O,propsOptions:P}},z){let d;return!!b[z]||f!==Jt&&Gt(f,z)||or(r,z)||(d=P[0])&&Gt(d,z)||Gt(x,z)||Gt(Vi,z)||Gt(O.config.globalProperties,z)},defineProperty(f,r,b){return b.get!=null?f._.accessCache[r]=0:Gt(b,"value")&&this.set(f,r,b.value,null),Reflect.defineProperty(f,r,b)}};function Rs(f){return Nt(f)?f.reduce((r,b)=>(r[b]=null,r),{}):f}let _r=!0;function uu(f){const r=Xr(f),b=f.proxy,x=f.ctx;_r=!1,r.beforeCreate&&Bs(r.beforeCreate,f,"bc");const{data:O,computed:P,methods:z,watch:d,provide:i,inject:l,created:u,beforeMount:e,mounted:n,beforeUpdate:t,updated:o,activated:c,deactivated:s,beforeDestroy:h,beforeUnmount:p,destroyed:y,unmounted:_,render:T,renderTracked:A,renderTriggered:v,errorCaptured:V,serverPrefetch:tt,expose:pt,inheritAttrs:_t,components:Tt,directives:vt,filters:bt}=r;if(l&&cu(l,x,null),z)for(const St in z){const xt=z[St];Wt(xt)&&(x[St]=xt.bind(b))}if(O){const St=O.call(b,b);ee(St)&&(f.data=Ir(St))}if(_r=!0,P)for(const St in P){const xt=P[St],D=Wt(xt)?xt.bind(b,b):Wt(xt.get)?xt.get.bind(b,b):De,H=!Wt(xt)&&Wt(xt.set)?xt.set.bind(b):De,N=Wu({get:D,set:H});Object.defineProperty(x,St,{enumerable:!0,configurable:!0,get:()=>N.value,set:B=>N.value=B})}if(d)for(const St in d)ko(d[St],x,b,St);if(i){const St=Wt(i)?i.call(b):i;Reflect.ownKeys(St).forEach(xt=>{vu(xt,St[xt])})}u&&Bs(u,f,"c");function Et(St,xt){Nt(xt)?xt.forEach(D=>St(D.bind(b))):xt&&St(xt.bind(b))}if(Et(Ql,e),Et(Zl,n),Et(tu,t),Et(eu,o),Et(Kl,c),Et($l,s),Et(ou,V),Et(su,A),Et(ru,v),Et(iu,p),Et(Do,_),Et(nu,tt),Nt(pt))if(pt.length){const St=f.exposed||(f.exposed={});pt.forEach(xt=>{Object.defineProperty(St,xt,{get:()=>b[xt],set:D=>b[xt]=D})})}else f.exposed||(f.exposed={});T&&f.render===De&&(f.render=T),_t!=null&&(f.inheritAttrs=_t),Tt&&(f.components=Tt),vt&&(f.directives=vt)}function cu(f,r,b=De){Nt(f)&&(f=Cr(f));for(const x in f){const O=f[x];let P;ee(O)?"default"in O?P=yn(O.from||x,O.default,!0):P=yn(O.from||x):P=yn(O),ge(P)?Object.defineProperty(r,x,{enumerable:!0,configurable:!0,get:()=>P.value,set:z=>P.value=z}):r[x]=P}}function Bs(f,r,b){ke(Nt(f)?f.map(x=>x.bind(r.proxy)):f.bind(r.proxy),r,b)}function ko(f,r,b,x){const O=x.includes(".")?Oo(b,x):()=>b[x];if(ae(f)){const P=r[f];Wt(P)&&sr(O,P)}else if(Wt(f))sr(O,f.bind(b));else if(ee(f))if(Nt(f))f.forEach(P=>ko(P,r,b,x));else{const P=Wt(f.handler)?f.handler.bind(b):r[f.handler];Wt(P)&&sr(O,P,f)}}function Xr(f){const r=f.type,{mixins:b,extends:x}=r,{mixins:O,optionsCache:P,config:{optionMergeStrategies:z}}=f.appContext,d=P.get(r);let i;return d?i=d:!O.length&&!b&&!x?i=r:(i={},O.length&&O.forEach(l=>Sn(i,l,z,!0)),Sn(i,r,z)),ee(r)&&P.set(r,i),i}function Sn(f,r,b,x=!1){const{mixins:O,extends:P}=r;P&&Sn(f,P,b,!0),O&&O.forEach(z=>Sn(f,z,b,!0));for(const z in r)if(!(x&&z==="expose")){const d=fu[z]||b&&b[z];f[z]=d?d(f[z],r[z]):r[z]}return f}const fu={data:Ns,props:Hs,emits:Hs,methods:Ui,computed:Ui,beforeCreate:de,created:de,beforeMount:de,mounted:de,beforeUpdate:de,updated:de,beforeDestroy:de,beforeUnmount:de,destroyed:de,unmounted:de,activated:de,deactivated:de,errorCaptured:de,serverPrefetch:de,components:Ui,directives:Ui,watch:du,provide:Ns,inject:hu};function Ns(f,r){return r?f?function(){return re(Wt(f)?f.call(this,this):f,Wt(r)?r.call(this,this):r)}:r:f}function hu(f,r){return Ui(Cr(f),Cr(r))}function Cr(f){if(Nt(f)){const r={};for(let b=0;b<f.length;b++)r[f[b]]=f[b];return r}return f}function de(f,r){return f?[...new Set([].concat(f,r))]:r}function Ui(f,r){return f?re(Object.create(null),f,r):r}function Hs(f,r){return f?Nt(f)&&Nt(r)?[...new Set([...f,...r])]:re(Object.create(null),Rs(f),Rs(r??{})):r}function du(f,r){if(!f)return r;if(!r)return f;const b=re(Object.create(null),f);for(const x in r)b[x]=de(f[x],r[x]);return b}function Mo(){return{app:null,config:{isNativeTag:La,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gu=0;function pu(f,r){return function(x,O=null){Wt(x)||(x=re({},x)),O!=null&&!ee(O)&&(O=null);const P=Mo(),z=new Set;let d=!1;const i=P.app={_uid:gu++,_component:x,_props:O,_container:null,_context:P,_instance:null,version:Uu,get config(){return P.config},set config(l){},use(l,...u){return z.has(l)||(l&&Wt(l.install)?(z.add(l),l.install(i,...u)):Wt(l)&&(z.add(l),l(i,...u))),i},mixin(l){return P.mixins.includes(l)||P.mixins.push(l),i},component(l,u){return u?(P.components[l]=u,i):P.components[l]},directive(l,u){return u?(P.directives[l]=u,i):P.directives[l]},mount(l,u,e){if(!d){const n=ze(x,O);return n.appContext=P,u&&r?r(n,l):f(n,l,e),d=!0,i._container=l,l.__vue_app__=i,qr(n.component)||n.component.proxy}},unmount(){d&&(f(null,i._container),delete i._container.__vue_app__)},provide(l,u){return P.provides[l]=u,i},runWithContext(l){wn=i;try{return l()}finally{wn=null}}};return i}}let wn=null;function vu(f,r){if(ce){let b=ce.provides;const x=ce.parent&&ce.parent.provides;x===b&&(b=ce.provides=Object.create(x)),b[f]=r}}function yn(f,r,b=!1){const x=ce||We;if(x||wn){const O=x?x.parent==null?x.vnode.appContext&&x.vnode.appContext.provides:x.parent.provides:wn._context.provides;if(O&&f in O)return O[f];if(arguments.length>1)return b&&Wt(r)?r.call(x&&x.proxy):r}}function mu(f,r,b,x=!1){const O={},P={};bn(P,Ln,1),f.propsDefaults=Object.create(null),Fo(f,r,O,P);for(const z in f.propsOptions[0])z in O||(O[z]=void 0);b?f.props=x?O:Tl(O):f.type.props?f.props=O:f.props=P,f.attrs=P}function yu(f,r,b,x){const{props:O,attrs:P,vnode:{patchFlag:z}}=f,d=Kt(O),[i]=f.propsOptions;let l=!1;if((x||z>0)&&!(z&16)){if(z&8){const u=f.vnode.dynamicProps;for(let e=0;e<u.length;e++){let n=u[e];if(Dn(f.emitsOptions,n))continue;const t=r[n];if(i)if(Gt(P,n))t!==P[n]&&(P[n]=t,l=!0);else{const o=Pi(n);O[o]=br(i,d,o,t,f,!1)}else t!==P[n]&&(P[n]=t,l=!0)}}}else{Fo(f,r,O,P)&&(l=!0);let u;for(const e in d)(!r||!Gt(r,e)&&((u=ki(e))===e||!Gt(r,u)))&&(i?b&&(b[e]!==void 0||b[u]!==void 0)&&(O[e]=br(i,d,e,void 0,f,!0)):delete O[e]);if(P!==d)for(const e in P)(!r||!Gt(r,e))&&(delete P[e],l=!0)}l&&Ve(f,"set","$attrs")}function Fo(f,r,b,x){const[O,P]=f.propsOptions;let z=!1,d;if(r)for(let i in r){if(vn(i))continue;const l=r[i];let u;O&&Gt(O,u=Pi(i))?!P||!P.includes(u)?b[u]=l:(d||(d={}))[u]=l:Dn(f.emitsOptions,i)||(!(i in x)||l!==x[i])&&(x[i]=l,z=!0)}if(P){const i=Kt(b),l=d||Jt;for(let u=0;u<P.length;u++){const e=P[u];b[e]=br(O,i,e,l[e],f,!Gt(l,e))}}return z}function br(f,r,b,x,O,P){const z=f[b];if(z!=null){const d=Gt(z,"default");if(d&&x===void 0){const i=z.default;if(z.type!==Function&&!z.skipFactory&&Wt(i)){const{propsDefaults:l}=O;b in l?x=l[b]:(Di(O),x=l[b]=i.call(null,r),pi())}else x=i}z[0]&&(P&&!d?x=!1:z[1]&&(x===""||x===ki(b))&&(x=!0))}return x}function Lo(f,r,b=!1){const x=r.propsCache,O=x.get(f);if(O)return O;const P=f.props,z={},d=[];let i=!1;if(!Wt(f)){const u=e=>{i=!0;const[n,t]=Lo(e,r,!0);re(z,n),t&&d.push(...t)};!b&&r.mixins.length&&r.mixins.forEach(u),f.extends&&u(f.extends),f.mixins&&f.mixins.forEach(u)}if(!P&&!i)return ee(f)&&x.set(f,Ti),Ti;if(Nt(P))for(let u=0;u<P.length;u++){const e=Pi(P[u]);Ws(e)&&(z[e]=Jt)}else if(P)for(const u in P){const e=Pi(u);if(Ws(e)){const n=P[u],t=z[e]=Nt(n)||Wt(n)?{type:n}:re({},n);if(t){const o=Us(Boolean,t.type),c=Us(String,t.type);t[0]=o>-1,t[1]=c<0||o<c,(o>-1||Gt(t,"default"))&&d.push(e)}}}const l=[z,d];return ee(f)&&x.set(f,l),l}function Ws(f){return f[0]!=="$"}function Xs(f){const r=f&&f.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:f===null?"null":""}function Ys(f,r){return Xs(f)===Xs(r)}function Us(f,r){return Nt(r)?r.findIndex(b=>Ys(b,f)):Wt(r)&&Ys(r,f)?0:-1}const jo=f=>f[0]==="_"||f==="$stable",Yr=f=>Nt(f)?f.map(Ne):[Ne(f)],_u=(f,r,b)=>{if(r._n)return r;const x=Wl((...O)=>Yr(r(...O)),b);return x._c=!1,x},Io=(f,r,b)=>{const x=f._ctx;for(const O in f){if(jo(O))continue;const P=f[O];if(Wt(P))r[O]=_u(O,P,x);else if(P!=null){const z=Yr(P);r[O]=()=>z}}},Ro=(f,r)=>{const b=Yr(r);f.slots.default=()=>b},Cu=(f,r)=>{if(f.vnode.shapeFlag&32){const b=r._;b?(f.slots=Kt(r),bn(r,"_",b)):Io(r,f.slots={})}else f.slots={},r&&Ro(f,r);bn(f.slots,Ln,1)},bu=(f,r,b)=>{const{vnode:x,slots:O}=f;let P=!0,z=Jt;if(x.shapeFlag&32){const d=r._;d?b&&d===1?P=!1:(re(O,r),!b&&d===1&&delete O._):(P=!r.$stable,Io(r,O)),z=r}else r&&(Ro(f,r),z={default:1});if(P)for(const d in O)!jo(d)&&!(d in z)&&delete O[d]};function xr(f,r,b,x,O=!1){if(Nt(f)){f.forEach((n,t)=>xr(n,r&&(Nt(r)?r[t]:r),b,x,O));return}if(mn(x)&&!O)return;const P=x.shapeFlag&4?qr(x.component)||x.component.proxy:x.el,z=O?null:P,{i:d,r:i}=f,l=r&&r.r,u=d.refs===Jt?d.refs={}:d.refs,e=d.setupState;if(l!=null&&l!==i&&(ae(l)?(u[l]=null,Gt(e,l)&&(e[l]=null)):ge(l)&&(l.value=null)),Wt(i))ii(i,d,12,[z,u]);else{const n=ae(i),t=ge(i);if(n||t){const o=()=>{if(f.f){const c=n?Gt(e,i)?e[i]:u[i]:i.value;O?Nt(c)&&Or(c,P):Nt(c)?c.includes(P)||c.push(P):n?(u[i]=[P],Gt(e,i)&&(e[i]=u[i])):(i.value=[P],f.k&&(u[f.k]=i.value))}else n?(u[i]=z,Gt(e,i)&&(e[i]=z)):t&&(i.value=z,f.k&&(u[f.k]=z))};z?(o.id=-1,_e(o,b)):o()}}}const _e=Gl;function xu(f){return Su(f)}function Su(f,r){const b=fr();b.__VUE__=!0;const{insert:x,remove:O,patchProp:P,createElement:z,createText:d,createComment:i,setText:l,setElementText:u,parentNode:e,nextSibling:n,setScopeId:t=De,insertStaticContent:o}=f,c=(F,k,L,U=null,X=null,Y=null,K=!1,Z=null,ft=!!k.dynamicChildren)=>{if(F===k)return;F&&!Xi(F,k)&&(U=Q(F),B(F,X,Y,!0),F=null),k.patchFlag===-2&&(ft=!1,k.dynamicChildren=null);const{type:it,ref:J,shapeFlag:ht}=k;switch(it){case Fn:s(F,k,L,U);break;case Ji:h(F,k,L,U);break;case ar:F==null&&p(k,L,U,K);break;case Be:Tt(F,k,L,U,X,Y,K,Z,ft);break;default:ht&1?T(F,k,L,U,X,Y,K,Z,ft):ht&6?vt(F,k,L,U,X,Y,K,Z,ft):(ht&64||ht&128)&&it.process(F,k,L,U,X,Y,K,Z,ft,rt)}J!=null&&X&&xr(J,F&&F.ref,Y,k||F,!k)},s=(F,k,L,U)=>{if(F==null)x(k.el=d(k.children),L,U);else{const X=k.el=F.el;k.children!==F.children&&l(X,k.children)}},h=(F,k,L,U)=>{F==null?x(k.el=i(k.children||""),L,U):k.el=F.el},p=(F,k,L,U)=>{[F.el,F.anchor]=o(F.children,k,L,U,F.el,F.anchor)},y=({el:F,anchor:k},L,U)=>{let X;for(;F&&F!==k;)X=n(F),x(F,L,U),F=X;x(k,L,U)},_=({el:F,anchor:k})=>{let L;for(;F&&F!==k;)L=n(F),O(F),F=L;O(k)},T=(F,k,L,U,X,Y,K,Z,ft)=>{K=K||k.type==="svg",F==null?A(k,L,U,X,Y,K,Z,ft):tt(F,k,X,Y,K,Z,ft)},A=(F,k,L,U,X,Y,K,Z)=>{let ft,it;const{type:J,props:ht,shapeFlag:yt,transition:at,dirs:Pt}=F;if(ft=F.el=z(F.type,Y,ht&&ht.is,ht),yt&8?u(ft,F.children):yt&16&&V(F.children,ft,null,U,X,Y&&J!=="foreignObject",K,Z),Pt&&ui(F,null,U,"created"),v(ft,F,F.scopeId,K,U),ht){for(const jt in ht)jt!=="value"&&!vn(jt)&&P(ft,jt,null,ht[jt],Y,F.children,U,X,q);"value"in ht&&P(ft,"value",null,ht.value),(it=ht.onVnodeBeforeMount)&&Re(it,U,F)}Pt&&ui(F,null,U,"beforeMount");const Mt=(!X||X&&!X.pendingBranch)&&at&&!at.persisted;Mt&&at.beforeEnter(ft),x(ft,k,L),((it=ht&&ht.onVnodeMounted)||Mt||Pt)&&_e(()=>{it&&Re(it,U,F),Mt&&at.enter(ft),Pt&&ui(F,null,U,"mounted")},X)},v=(F,k,L,U,X)=>{if(L&&t(F,L),U)for(let Y=0;Y<U.length;Y++)t(F,U[Y]);if(X){let Y=X.subTree;if(k===Y){const K=X.vnode;v(F,K,K.scopeId,K.slotScopeIds,X.parent)}}},V=(F,k,L,U,X,Y,K,Z,ft=0)=>{for(let it=ft;it<F.length;it++){const J=F[it]=Z?ti(F[it]):Ne(F[it]);c(null,J,k,L,U,X,Y,K,Z)}},tt=(F,k,L,U,X,Y,K)=>{const Z=k.el=F.el;let{patchFlag:ft,dynamicChildren:it,dirs:J}=k;ft|=F.patchFlag&16;const ht=F.props||Jt,yt=k.props||Jt;let at;L&&ci(L,!1),(at=yt.onVnodeBeforeUpdate)&&Re(at,L,k,F),J&&ui(k,F,L,"beforeUpdate"),L&&ci(L,!0);const Pt=X&&k.type!=="foreignObject";if(it?pt(F.dynamicChildren,it,Z,L,U,Pt,Y):K||xt(F,k,Z,null,L,U,Pt,Y,!1),ft>0){if(ft&16)_t(Z,k,ht,yt,L,U,X);else if(ft&2&&ht.class!==yt.class&&P(Z,"class",null,yt.class,X),ft&4&&P(Z,"style",ht.style,yt.style,X),ft&8){const Mt=k.dynamicProps;for(let jt=0;jt<Mt.length;jt++){const Bt=Mt[jt],Qt=ht[Bt],fe=yt[Bt];(fe!==Qt||Bt==="value")&&P(Z,Bt,Qt,fe,X,F.children,L,U,q)}}ft&1&&F.children!==k.children&&u(Z,k.children)}else!K&&it==null&&_t(Z,k,ht,yt,L,U,X);((at=yt.onVnodeUpdated)||J)&&_e(()=>{at&&Re(at,L,k,F),J&&ui(k,F,L,"updated")},U)},pt=(F,k,L,U,X,Y,K)=>{for(let Z=0;Z<k.length;Z++){const ft=F[Z],it=k[Z],J=ft.el&&(ft.type===Be||!Xi(ft,it)||ft.shapeFlag&70)?e(ft.el):L;c(ft,it,J,null,U,X,Y,K,!0)}},_t=(F,k,L,U,X,Y,K)=>{if(L!==U){if(L!==Jt)for(const Z in L)!vn(Z)&&!(Z in U)&&P(F,Z,L[Z],null,K,k.children,X,Y,q);for(const Z in U){if(vn(Z))continue;const ft=U[Z],it=L[Z];ft!==it&&Z!=="value"&&P(F,Z,it,ft,K,k.children,X,Y,q)}"value"in U&&P(F,"value",L.value,U.value)}},Tt=(F,k,L,U,X,Y,K,Z,ft)=>{const it=k.el=F?F.el:d(""),J=k.anchor=F?F.anchor:d("");let{patchFlag:ht,dynamicChildren:yt,slotScopeIds:at}=k;at&&(Z=Z?Z.concat(at):at),F==null?(x(it,L,U),x(J,L,U),V(k.children,L,J,X,Y,K,Z,ft)):ht>0&&ht&64&&yt&&F.dynamicChildren?(pt(F.dynamicChildren,yt,L,X,Y,K,Z),(k.key!=null||X&&k===X.subTree)&&Bo(F,k,!0)):xt(F,k,L,J,X,Y,K,Z,ft)},vt=(F,k,L,U,X,Y,K,Z,ft)=>{k.slotScopeIds=Z,F==null?k.shapeFlag&512?X.ctx.activate(k,L,U,K,ft):bt(k,L,U,X,Y,K,ft):wt(F,k,ft)},bt=(F,k,L,U,X,Y,K)=>{const Z=F.component=ju(F,U,X);if(Po(F)&&(Z.ctx.renderer=rt),Iu(Z),Z.asyncDep){if(X&&X.registerDep(Z,Et),!F.el){const ft=Z.subTree=ze(Ji);h(null,ft,k,L)}return}Et(Z,F,k,L,X,Y,K)},wt=(F,k,L)=>{const U=k.component=F.component;if(Ul(F,k,L))if(U.asyncDep&&!U.asyncResolved){St(U,k,L);return}else U.next=k,jl(U.update),U.update();else k.el=F.el,U.vnode=k},Et=(F,k,L,U,X,Y,K)=>{const Z=()=>{if(F.isMounted){let{next:J,bu:ht,u:yt,parent:at,vnode:Pt}=F,Mt=J,jt;ci(F,!1),J?(J.el=Pt.el,St(F,J,K)):J=Pt,ht&&nr(ht),(jt=J.props&&J.props.onVnodeBeforeUpdate)&&Re(jt,at,J,Pt),ci(F,!0);const Bt=rr(F),Qt=F.subTree;F.subTree=Bt,c(Qt,Bt,e(Qt.el),Q(Qt),F,X,Y),J.el=Bt.el,Mt===null&&zl(F,Bt.el),yt&&_e(yt,X),(jt=J.props&&J.props.onVnodeUpdated)&&_e(()=>Re(jt,at,J,Pt),X)}else{let J;const{el:ht,props:yt}=k,{bm:at,m:Pt,parent:Mt}=F,jt=mn(k);if(ci(F,!1),at&&nr(at),!jt&&(J=yt&&yt.onVnodeBeforeMount)&&Re(J,Mt,k),ci(F,!0),ht&&mt){const Bt=()=>{F.subTree=rr(F),mt(ht,F.subTree,F,X,null)};jt?k.type.__asyncLoader().then(()=>!F.isUnmounted&&Bt()):Bt()}else{const Bt=F.subTree=rr(F);c(null,Bt,L,U,F,X,Y),k.el=Bt.el}if(Pt&&_e(Pt,X),!jt&&(J=yt&&yt.onVnodeMounted)){const Bt=k;_e(()=>Re(J,Mt,Bt),X)}(k.shapeFlag&256||Mt&&mn(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&F.a&&_e(F.a,X),F.isMounted=!0,k=L=U=null}},ft=F.effect=new Mr(Z,()=>Wr(it),F.scope),it=F.update=()=>ft.run();it.id=F.uid,ci(F,!0),it()},St=(F,k,L)=>{k.component=F;const U=F.vnode.props;F.vnode=k,F.next=null,yu(F,k.props,U,L),bu(F,k.children,L),Mi(),js(),Fi()},xt=(F,k,L,U,X,Y,K,Z,ft=!1)=>{const it=F&&F.children,J=F?F.shapeFlag:0,ht=k.children,{patchFlag:yt,shapeFlag:at}=k;if(yt>0){if(yt&128){H(it,ht,L,U,X,Y,K,Z,ft);return}else if(yt&256){D(it,ht,L,U,X,Y,K,Z,ft);return}}at&8?(J&16&&q(it,X,Y),ht!==it&&u(L,ht)):J&16?at&16?H(it,ht,L,U,X,Y,K,Z,ft):q(it,X,Y,!0):(J&8&&u(L,""),at&16&&V(ht,L,U,X,Y,K,Z,ft))},D=(F,k,L,U,X,Y,K,Z,ft)=>{F=F||Ti,k=k||Ti;const it=F.length,J=k.length,ht=Math.min(it,J);let yt;for(yt=0;yt<ht;yt++){const at=k[yt]=ft?ti(k[yt]):Ne(k[yt]);c(F[yt],at,L,null,X,Y,K,Z,ft)}it>J?q(F,X,Y,!0,!1,ht):V(k,L,U,X,Y,K,Z,ft,ht)},H=(F,k,L,U,X,Y,K,Z,ft)=>{let it=0;const J=k.length;let ht=F.length-1,yt=J-1;for(;it<=ht&&it<=yt;){const at=F[it],Pt=k[it]=ft?ti(k[it]):Ne(k[it]);if(Xi(at,Pt))c(at,Pt,L,null,X,Y,K,Z,ft);else break;it++}for(;it<=ht&&it<=yt;){const at=F[ht],Pt=k[yt]=ft?ti(k[yt]):Ne(k[yt]);if(Xi(at,Pt))c(at,Pt,L,null,X,Y,K,Z,ft);else break;ht--,yt--}if(it>ht){if(it<=yt){const at=yt+1,Pt=at<J?k[at].el:U;for(;it<=yt;)c(null,k[it]=ft?ti(k[it]):Ne(k[it]),L,Pt,X,Y,K,Z,ft),it++}}else if(it>yt)for(;it<=ht;)B(F[it],X,Y,!0),it++;else{const at=it,Pt=it,Mt=new Map;for(it=Pt;it<=yt;it++){const Zt=k[it]=ft?ti(k[it]):Ne(k[it]);Zt.key!=null&&Mt.set(Zt.key,it)}let jt,Bt=0;const Qt=yt-Pt+1;let fe=!1,ie=0;const se=new Array(Qt);for(it=0;it<Qt;it++)se[it]=0;for(it=at;it<=ht;it++){const Zt=F[it];if(Bt>=Qt){B(Zt,X,Y,!0);continue}let pe;if(Zt.key!=null)pe=Mt.get(Zt.key);else for(jt=Pt;jt<=yt;jt++)if(se[jt-Pt]===0&&Xi(Zt,k[jt])){pe=jt;break}pe===void 0?B(Zt,X,Y,!0):(se[pe-Pt]=it+1,pe>=ie?ie=pe:fe=!0,c(Zt,k[pe],L,null,X,Y,K,Z,ft),Bt++)}const be=fe?wu(se):Ti;for(jt=be.length-1,it=Qt-1;it>=0;it--){const Zt=Pt+it,pe=k[Zt],ri=Zt+1<J?k[Zt+1].el:U;se[it]===0?c(null,pe,L,ri,X,Y,K,Z,ft):fe&&(jt<0||it!==be[jt]?N(pe,L,ri,2):jt--)}}},N=(F,k,L,U,X=null)=>{const{el:Y,type:K,transition:Z,children:ft,shapeFlag:it}=F;if(it&6){N(F.component.subTree,k,L,U);return}if(it&128){F.suspense.move(k,L,U);return}if(it&64){K.move(F,k,L,rt);return}if(K===Be){x(Y,k,L);for(let ht=0;ht<ft.length;ht++)N(ft[ht],k,L,U);x(F.anchor,k,L);return}if(K===ar){y(F,k,L);return}if(U!==2&&it&1&&Z)if(U===0)Z.beforeEnter(Y),x(Y,k,L),_e(()=>Z.enter(Y),X);else{const{leave:ht,delayLeave:yt,afterLeave:at}=Z,Pt=()=>x(Y,k,L),Mt=()=>{ht(Y,()=>{Pt(),at&&at()})};yt?yt(Y,Pt,Mt):Mt()}else x(Y,k,L)},B=(F,k,L,U=!1,X=!1)=>{const{type:Y,props:K,ref:Z,children:ft,dynamicChildren:it,shapeFlag:J,patchFlag:ht,dirs:yt}=F;if(Z!=null&&xr(Z,null,L,F,!0),J&256){k.ctx.deactivate(F);return}const at=J&1&&yt,Pt=!mn(F);let Mt;if(Pt&&(Mt=K&&K.onVnodeBeforeUnmount)&&Re(Mt,k,F),J&6)M(F.component,L,U);else{if(J&128){F.suspense.unmount(L,U);return}at&&ui(F,null,k,"beforeUnmount"),J&64?F.type.remove(F,k,L,X,rt,U):it&&(Y!==Be||ht>0&&ht&64)?q(it,k,L,!1,!0):(Y===Be&&ht&384||!X&&J&16)&&q(ft,k,L),U&&st(F)}(Pt&&(Mt=K&&K.onVnodeUnmounted)||at)&&_e(()=>{Mt&&Re(Mt,k,F),at&&ui(F,null,k,"unmounted")},L)},st=F=>{const{type:k,el:L,anchor:U,transition:X}=F;if(k===Be){I(L,U);return}if(k===ar){_(F);return}const Y=()=>{O(L),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(F.shapeFlag&1&&X&&!X.persisted){const{leave:K,delayLeave:Z}=X,ft=()=>K(L,Y);Z?Z(F.el,Y,ft):ft()}else Y()},I=(F,k)=>{let L;for(;F!==k;)L=n(F),O(F),F=L;O(k)},M=(F,k,L)=>{const{bum:U,scope:X,update:Y,subTree:K,um:Z}=F;U&&nr(U),X.stop(),Y&&(Y.active=!1,B(K,F,k,L)),Z&&_e(Z,k),_e(()=>{F.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},q=(F,k,L,U=!1,X=!1,Y=0)=>{for(let K=Y;K<F.length;K++)B(F[K],k,L,U,X)},Q=F=>F.shapeFlag&6?Q(F.component.subTree):F.shapeFlag&128?F.suspense.next():n(F.anchor||F.el),ut=(F,k,L)=>{F==null?k._vnode&&B(k._vnode,null,null,!0):c(k._vnode||null,F,k,null,null,null,L),js(),xo(),k._vnode=F},rt={p:c,um:B,m:N,r:st,mt:bt,mc:V,pc:xt,pbc:pt,n:Q,o:f};let ct,mt;return r&&([ct,mt]=r(rt)),{render:ut,hydrate:ct,createApp:pu(ut,ct)}}function ci({effect:f,update:r},b){f.allowRecurse=r.allowRecurse=b}function Bo(f,r,b=!1){const x=f.children,O=r.children;if(Nt(x)&&Nt(O))for(let P=0;P<x.length;P++){const z=x[P];let d=O[P];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=O[P]=ti(O[P]),d.el=z.el),b||Bo(z,d)),d.type===Fn&&(d.el=z.el)}}function wu(f){const r=f.slice(),b=[0];let x,O,P,z,d;const i=f.length;for(x=0;x<i;x++){const l=f[x];if(l!==0){if(O=b[b.length-1],f[O]<l){r[x]=O,b.push(x);continue}for(P=0,z=b.length-1;P<z;)d=P+z>>1,f[b[d]]<l?P=d+1:z=d;l<f[b[P]]&&(P>0&&(r[x]=b[P-1]),b[P]=x)}}for(P=b.length,z=b[P-1];P-- >0;)b[P]=z,z=r[z];return b}const Tu=f=>f.__isTeleport,Be=Symbol.for("v-fgt"),Fn=Symbol.for("v-txt"),Ji=Symbol.for("v-cmt"),ar=Symbol.for("v-stc"),Gi=[];let Ae=null;function Ur(f=!1){Gi.push(Ae=f?null:[])}function Ou(){Gi.pop(),Ae=Gi[Gi.length-1]||null}let Qi=1;function zs(f){Qi+=f}function Eu(f){return f.dynamicChildren=Qi>0?Ae||Ti:null,Ou(),Qi>0&&Ae&&Ae.push(f),f}function zr(f,r,b,x,O,P){return Eu(Zi(f,r,b,x,O,P,!0))}function Pu(f){return f?f.__v_isVNode===!0:!1}function Xi(f,r){return f.type===r.type&&f.key===r.key}const Ln="__vInternal",No=({key:f})=>f??null,_n=({ref:f,ref_key:r,ref_for:b})=>(typeof f=="number"&&(f=""+f),f!=null?ae(f)||ge(f)||Wt(f)?{i:We,r:f,k:r,f:!!b}:f:null);function Zi(f,r=null,b=null,x=0,O=null,P=f===Be?0:1,z=!1,d=!1){const i={__v_isVNode:!0,__v_skip:!0,type:f,props:r,key:r&&No(r),ref:r&&_n(r),scopeId:kn,slotScopeIds:null,children:b,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:P,patchFlag:x,dynamicProps:O,dynamicChildren:null,appContext:null,ctx:We};return d?(Vr(i,b),P&128&&f.normalize(i)):b&&(i.shapeFlag|=ae(b)?8:16),Qi>0&&!z&&Ae&&(i.patchFlag>0||P&6)&&i.patchFlag!==32&&Ae.push(i),i}const ze=Au;function Au(f,r=null,b=null,x=0,O=null,P=!1){if((!f||f===au)&&(f=Ji),Pu(f)){const d=Ai(f,r,!0);return b&&Vr(d,b),Qi>0&&!P&&Ae&&(d.shapeFlag&6?Ae[Ae.indexOf(f)]=d:Ae.push(d)),d.patchFlag|=-2,d}if(Hu(f)&&(f=f.__vccOpts),r){r=Du(r);let{class:d,style:i}=r;d&&!ae(d)&&(r.class=Dr(d)),ee(i)&&(mo(i)&&!Nt(i)&&(i=re({},i)),r.style=Ar(i))}const z=ae(f)?1:Vl(f)?128:Tu(f)?64:ee(f)?4:Wt(f)?2:0;return Zi(f,r,b,x,O,z,P,!0)}function Du(f){return f?mo(f)||Ln in f?re({},f):f:null}function Ai(f,r,b=!1){const{props:x,ref:O,patchFlag:P,children:z}=f,d=r?Mu(x||{},r):x;return{__v_isVNode:!0,__v_skip:!0,type:f.type,props:d,key:d&&No(d),ref:r&&r.ref?b&&O?Nt(O)?O.concat(_n(r)):[O,_n(r)]:_n(r):O,scopeId:f.scopeId,slotScopeIds:f.slotScopeIds,children:z,target:f.target,targetAnchor:f.targetAnchor,staticCount:f.staticCount,shapeFlag:f.shapeFlag,patchFlag:r&&f.type!==Be?P===-1?16:P|16:P,dynamicProps:f.dynamicProps,dynamicChildren:f.dynamicChildren,appContext:f.appContext,dirs:f.dirs,transition:f.transition,component:f.component,suspense:f.suspense,ssContent:f.ssContent&&Ai(f.ssContent),ssFallback:f.ssFallback&&Ai(f.ssFallback),el:f.el,anchor:f.anchor,ctx:f.ctx,ce:f.ce}}function ku(f=" ",r=0){return ze(Fn,null,f,r)}function Ne(f){return f==null||typeof f=="boolean"?ze(Ji):Nt(f)?ze(Be,null,f.slice()):typeof f=="object"?ti(f):ze(Fn,null,String(f))}function ti(f){return f.el===null&&f.patchFlag!==-1||f.memo?f:Ai(f)}function Vr(f,r){let b=0;const{shapeFlag:x}=f;if(r==null)r=null;else if(Nt(r))b=16;else if(typeof r=="object")if(x&65){const O=r.default;O&&(O._c&&(O._d=!1),Vr(f,O()),O._c&&(O._d=!0));return}else{b=32;const O=r._;!O&&!(Ln in r)?r._ctx=We:O===3&&We&&(We.slots._===1?r._=1:(r._=2,f.patchFlag|=1024))}else Wt(r)?(r={default:r,_ctx:We},b=32):(r=String(r),x&64?(b=16,r=[ku(r)]):b=8);f.children=r,f.shapeFlag|=b}function Mu(...f){const r={};for(let b=0;b<f.length;b++){const x=f[b];for(const O in x)if(O==="class")r.class!==x.class&&(r.class=Dr([r.class,x.class]));else if(O==="style")r.style=Ar([r.style,x.style]);else if(Tn(O)){const P=r[O],z=x[O];z&&P!==z&&!(Nt(P)&&P.includes(z))&&(r[O]=P?[].concat(P,z):z)}else O!==""&&(r[O]=x[O])}return r}function Re(f,r,b,x=null){ke(f,r,7,[b,x])}const Fu=Mo();let Lu=0;function ju(f,r,b){const x=f.type,O=(r?r.appContext:f.appContext)||Fu,P={uid:Lu++,vnode:f,type:x,parent:r,appContext:O,root:null,next:null,subTree:null,effect:null,update:null,scope:new $a(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(O.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lo(x,O),emitsOptions:wo(x,O),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:x.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:b,suspenseId:b?b.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return P.ctx={_:P},P.root=r?r.root:P,P.emit=Bl.bind(null,P),f.ce&&f.ce(P),P}let ce=null,Gr,Si,Vs="__VUE_INSTANCE_SETTERS__";(Si=fr()[Vs])||(Si=fr()[Vs]=[]),Si.push(f=>ce=f),Gr=f=>{Si.length>1?Si.forEach(r=>r(f)):Si[0](f)};const Di=f=>{Gr(f),f.scope.on()},pi=()=>{ce&&ce.scope.off(),Gr(null)};function Ho(f){return f.vnode.shapeFlag&4}let tn=!1;function Iu(f,r=!1){tn=r;const{props:b,children:x}=f.vnode,O=Ho(f);mu(f,b,O,r),Cu(f,x);const P=O?Ru(f,r):void 0;return tn=!1,P}function Ru(f,r){const b=f.type;f.accessCache=Object.create(null),f.proxy=yo(new Proxy(f.ctx,lu));const{setup:x}=b;if(x){const O=f.setupContext=x.length>1?Nu(f):null;Di(f),Mi();const P=ii(x,f,0,[f.props,O]);if(Fi(),pi(),io(P)){if(P.then(pi,pi),r)return P.then(z=>{Gs(f,z,r)}).catch(z=>{An(z,f,0)});f.asyncDep=P}else Gs(f,P,r)}else Wo(f,r)}function Gs(f,r,b){Wt(r)?f.type.__ssrInlineRender?f.ssrRender=r:f.render=r:ee(r)&&(f.setupState=_o(r)),Wo(f,b)}let qs;function Wo(f,r,b){const x=f.type;if(!f.render){if(!r&&qs&&!x.render){const O=x.template||Xr(f).template;if(O){const{isCustomElement:P,compilerOptions:z}=f.appContext.config,{delimiters:d,compilerOptions:i}=x,l=re(re({isCustomElement:P,delimiters:d},z),i);x.render=qs(O,l)}}f.render=x.render||De}Di(f),Mi(),uu(f),Fi(),pi()}function Bu(f){return f.attrsProxy||(f.attrsProxy=new Proxy(f.attrs,{get(r,b){return Ce(f,"get","$attrs"),r[b]}}))}function Nu(f){const r=b=>{f.exposed=b||{}};return{get attrs(){return Bu(f)},slots:f.slots,emit:f.emit,expose:r}}function qr(f){if(f.exposed)return f.exposeProxy||(f.exposeProxy=new Proxy(_o(yo(f.exposed)),{get(r,b){if(b in r)return r[b];if(b in Vi)return Vi[b](f)},has(r,b){return b in r||b in Vi}}))}function Hu(f){return Wt(f)&&"__vccOpts"in f}const Wu=(f,r)=>kl(f,r,tn),Xu=Symbol.for("v-scx"),Yu=()=>yn(Xu),Uu="3.3.4",zu="http://www.w3.org/2000/svg",di=typeof document<"u"?document:null,Ks=di&&di.createElement("template"),Vu={insert:(f,r,b)=>{r.insertBefore(f,b||null)},remove:f=>{const r=f.parentNode;r&&r.removeChild(f)},createElement:(f,r,b,x)=>{const O=r?di.createElementNS(zu,f):di.createElement(f,b?{is:b}:void 0);return f==="select"&&x&&x.multiple!=null&&O.setAttribute("multiple",x.multiple),O},createText:f=>di.createTextNode(f),createComment:f=>di.createComment(f),setText:(f,r)=>{f.nodeValue=r},setElementText:(f,r)=>{f.textContent=r},parentNode:f=>f.parentNode,nextSibling:f=>f.nextSibling,querySelector:f=>di.querySelector(f),setScopeId(f,r){f.setAttribute(r,"")},insertStaticContent(f,r,b,x,O,P){const z=b?b.previousSibling:r.lastChild;if(O&&(O===P||O.nextSibling))for(;r.insertBefore(O.cloneNode(!0),b),!(O===P||!(O=O.nextSibling)););else{Ks.innerHTML=x?`<svg>${f}</svg>`:f;const d=Ks.content;if(x){const i=d.firstChild;for(;i.firstChild;)d.appendChild(i.firstChild);d.removeChild(i)}r.insertBefore(d,b)}return[z?z.nextSibling:r.firstChild,b?b.previousSibling:r.lastChild]}};function Gu(f,r,b){const x=f._vtc;x&&(r=(r?[r,...x]:[...x]).join(" ")),r==null?f.removeAttribute("class"):b?f.setAttribute("class",r):f.className=r}function qu(f,r,b){const x=f.style,O=ae(b);if(b&&!O){if(r&&!ae(r))for(const P in r)b[P]==null&&Sr(x,P,"");for(const P in b)Sr(x,P,b[P])}else{const P=x.display;O?r!==b&&(x.cssText=b):r&&f.removeAttribute("style"),"_vod"in f&&(x.display=P)}}const $s=/\s*!important$/;function Sr(f,r,b){if(Nt(b))b.forEach(x=>Sr(f,r,x));else if(b==null&&(b=""),r.startsWith("--"))f.setProperty(r,b);else{const x=Ku(f,r);$s.test(b)?f.setProperty(ki(x),b.replace($s,""),"important"):f[x]=b}}const Js=["Webkit","Moz","ms"],lr={};function Ku(f,r){const b=lr[r];if(b)return b;let x=Pi(r);if(x!=="filter"&&x in f)return lr[r]=x;x=no(x);for(let O=0;O<Js.length;O++){const P=Js[O]+x;if(P in f)return lr[r]=P}return r}const Qs="http://www.w3.org/1999/xlink";function $u(f,r,b,x,O){if(x&&r.startsWith("xlink:"))b==null?f.removeAttributeNS(Qs,r.slice(6,r.length)):f.setAttributeNS(Qs,r,b);else{const P=Ka(r);b==null||P&&!ro(b)?f.removeAttribute(r):f.setAttribute(r,P?"":b)}}function Ju(f,r,b,x,O,P,z){if(r==="innerHTML"||r==="textContent"){x&&z(x,O,P),f[r]=b??"";return}const d=f.tagName;if(r==="value"&&d!=="PROGRESS"&&!d.includes("-")){f._value=b;const l=d==="OPTION"?f.getAttribute("value"):f.value,u=b??"";l!==u&&(f.value=u),b==null&&f.removeAttribute(r);return}let i=!1;if(b===""||b==null){const l=typeof f[r];l==="boolean"?b=ro(b):b==null&&l==="string"?(b="",i=!0):l==="number"&&(b=0,i=!0)}try{f[r]=b}catch{}i&&f.removeAttribute(r)}function Qu(f,r,b,x){f.addEventListener(r,b,x)}function Zu(f,r,b,x){f.removeEventListener(r,b,x)}function tc(f,r,b,x,O=null){const P=f._vei||(f._vei={}),z=P[r];if(x&&z)z.value=x;else{const[d,i]=ec(r);if(x){const l=P[r]=rc(x,O);Qu(f,d,l,i)}else z&&(Zu(f,d,z,i),P[r]=void 0)}}const Zs=/(?:Once|Passive|Capture)$/;function ec(f){let r;if(Zs.test(f)){r={};let x;for(;x=f.match(Zs);)f=f.slice(0,f.length-x[0].length),r[x[0].toLowerCase()]=!0}return[f[2]===":"?f.slice(3):ki(f.slice(2)),r]}let ur=0;const ic=Promise.resolve(),nc=()=>ur||(ic.then(()=>ur=0),ur=Date.now());function rc(f,r){const b=x=>{if(!x._vts)x._vts=Date.now();else if(x._vts<=b.attached)return;ke(sc(x,b.value),r,5,[x])};return b.value=f,b.attached=nc(),b}function sc(f,r){if(Nt(r)){const b=f.stopImmediatePropagation;return f.stopImmediatePropagation=()=>{b.call(f),f._stopped=!0},r.map(x=>O=>!O._stopped&&x&&x(O))}else return r}const to=/^on[a-z]/,oc=(f,r,b,x,O=!1,P,z,d,i)=>{r==="class"?Gu(f,x,O):r==="style"?qu(f,b,x):Tn(r)?Tr(r)||tc(f,r,b,x,z):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):ac(f,r,x,O))?Ju(f,r,x,P,z,d,i):(r==="true-value"?f._trueValue=x:r==="false-value"&&(f._falseValue=x),$u(f,r,x,O))};function ac(f,r,b,x){return x?!!(r==="innerHTML"||r==="textContent"||r in f&&to.test(r)&&Wt(b)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&f.tagName==="INPUT"||r==="type"&&f.tagName==="TEXTAREA"||to.test(r)&&ae(b)?!1:r in f}const lc=re({patchProp:oc},Vu);let eo;function uc(){return eo||(eo=xu(lc))}const cc=(...f)=>{const r=uc().createApp(...f),{mount:b}=r;return r.mount=x=>{const O=fc(x);if(!O)return;const P=r._component;!Wt(P)&&!P.render&&!P.template&&(P.template=O.innerHTML),O.innerHTML="";const z=b(O,!1,O instanceof SVGElement);return O instanceof Element&&(O.removeAttribute("v-cloak"),O.setAttribute("data-v-app","")),z},r};function fc(f){return ae(f)?document.querySelector(f):f}const hc=(f,r)=>{const b=f.__vccOpts||f;for(const[x,O]of r)b[x]=O;return b},dc={},Xo=f=>(Nl("data-v-7f891567"),f=f(),Hl(),f),gc=Xo(()=>Zi("input",{type:"checkbox"},null,-1)),pc=Xo(()=>Zi("span",null,[Zi("span")],-1)),vc=[gc,pc];function mc(f,r){return Ur(),zr("label",null,vc)}const yc=hc(dc,[["render",mc],["__scopeId","data-v-7f891567"]]);var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cc(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function bc(f){if(f.__esModule)return f;var r=f.default;if(typeof r=="function"){var b=function x(){return this instanceof x?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};b.prototype=r.prototype}else b={};return Object.defineProperty(b,"__esModule",{value:!0}),Object.keys(f).forEach(function(x){var O=Object.getOwnPropertyDescriptor(f,x);Object.defineProperty(b,x,O.get?O:{enumerable:!0,get:function(){return f[x]}})}),b}var fi={};const xc={},Sc=Object.freeze(Object.defineProperty({__proto__:null,default:xc},Symbol.toStringTag,{value:"Module"})),cr=bc(Sc);(function(f){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var r=r||{version:"5.3.0"};if(f.fabric=r,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?r.document=document:r.document=document.implementation.createHTMLDocument(""),r.window=window;else{var b=cr,x=new b.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;r.document=x.document,r.jsdomImplForWrapper=cr.implForWrapper,r.nodeCanvas=cr.Canvas,r.window=x,DOMParser=r.window.DOMParser}r.isTouchSupported="ontouchstart"in r.window||"ontouchstart"in r.document||r.window&&r.window.navigator&&r.window.navigator.maxTouchPoints>0,r.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",r.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],r.DPI=96,r.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",r.commaWsp="(?:\\s+,?\\s*|,\\s*)",r.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,r.reNonWord=/[ \n\.,;!\?\-]/,r.fontPaths={},r.iMatrix=[1,0,0,1,0,0],r.svgNS="http://www.w3.org/2000/svg",r.perfLimitSizeTotal=2097152,r.maxCacheSideLimit=4096,r.minCacheSideLimit=256,r.charWidthsCache={},r.textureSize=2048,r.disableStyleCopyPaste=!1,r.enableGLFiltering=!0,r.devicePixelRatio=r.window.devicePixelRatio||r.window.webkitDevicePixelRatio||r.window.mozDevicePixelRatio||1,r.browserShadowBlurConstant=1,r.arcToSegmentsCache={},r.boundsOfCurveCache={},r.cachesBoundsOfCurve=!0,r.forceGLPutImageData=!1,r.initFilterBackend=function(){if(r.enableGLFiltering&&r.isWebglSupported&&r.isWebglSupported(r.textureSize))return console.log("max texture size: "+r.maxTextureSize),new r.WebglFilterBackend({tileSize:r.textureSize});if(r.Canvas2dFilterBackend)return new r.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=r),function(){function d(t,o){if(this.__eventListeners[t]){var c=this.__eventListeners[t];o?c[c.indexOf(o)]=!1:r.util.array.fill(c,!1)}}function i(t,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var c in t)this.on(c,t[c]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(o);return this}function l(t,o){var c=(function(){o.apply(this,arguments),this.off(t,c)}).bind(this);this.on(t,c)}function u(t,o){if(arguments.length===1)for(var c in t)l.call(this,c,t[c]);else l.call(this,t,o);return this}function e(t,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(t in this.__eventListeners)d.call(this,t);else if(arguments.length===1&&typeof arguments[0]=="object")for(var c in t)d.call(this,c,t[c]);else d.call(this,t,o);return this}function n(t,o){if(!this.__eventListeners)return this;var c=this.__eventListeners[t];if(!c)return this;for(var s=0,h=c.length;s<h;s++)c[s]&&c[s].call(this,o||{});return this.__eventListeners[t]=c.filter(function(p){return p!==!1}),this}r.Observable={fire:n,on:i,once:u,off:e}}(),r.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,i=arguments.length;d<i;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,i,l){var u=this._objects;return l?u[i]=d:u.splice(i,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,i,l=!1,u=0,e=arguments.length;u<e;u++)i=d.indexOf(arguments[u]),i!==-1&&(l=!0,d.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(d,i){for(var l=this.getObjects(),u=0,e=l.length;u<e;u++)d.call(i,l[u],u,l);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d,i){return this._objects.indexOf(d)>-1?!0:i?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(d,!0)}):!1},complexity:function(){return this._objects.reduce(function(d,i){return d+=i.complexity?i.complexity():0,d},0)}},r.CommonMethods={_setOptions:function(d){for(var i in d)this.set(i,d[i])},_initGradient:function(d,i){d&&d.colorStops&&!(d instanceof r.Gradient)&&this.set(i,new r.Gradient(d))},_initPattern:function(d,i,l){d&&d.source&&!(d instanceof r.Pattern)?this.set(i,new r.Pattern(d,l)):l&&l()},_setObject:function(d){for(var i in d)this._set(i,d[i])},set:function(d,i){return typeof d=="object"?this._setObject(d):this._set(d,i),this},_set:function(d,i){this[d]=i},toggle:function(d){var i=this.get(d);return typeof i=="boolean"&&this.set(d,!i),this},get:function(d){return this[d]}},function(d){var i=Math.sqrt,l=Math.atan2,u=Math.pow,e=Math.PI/180,n=Math.PI/2;r.util={cos:function(t){if(t===0)return 1;t<0&&(t=-t);var o=t/n;switch(o){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(t===0)return 0;var o=t/n,c=1;switch(t<0&&(c=-1),o){case 1:return c;case 2:return 0;case 3:return-c}return Math.sin(t)},removeFromArray:function(t,o){var c=t.indexOf(o);return c!==-1&&t.splice(c,1),t},getRandomInt:function(t,o){return Math.floor(Math.random()*(o-t+1))+t},degreesToRadians:function(t){return t*e},radiansToDegrees:function(t){return t/e},rotatePoint:function(t,o,c){var s=new r.Point(t.x-o.x,t.y-o.y),h=r.util.rotateVector(s,c);return new r.Point(h.x,h.y).addEquals(o)},rotateVector:function(t,o){var c=r.util.sin(o),s=r.util.cos(o),h=t.x*s-t.y*c,p=t.x*c+t.y*s;return{x:h,y:p}},createVector:function(t,o){return new r.Point(o.x-t.x,o.y-t.y)},calcAngleBetweenVectors:function(t,o){return Math.acos((t.x*o.x+t.y*o.y)/(Math.hypot(t.x,t.y)*Math.hypot(o.x,o.y)))},getHatVector:function(t){return new r.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,o,c){var s=r.util.createVector(t,o),h=r.util.createVector(t,c),p=r.util.calcAngleBetweenVectors(s,h),y=r.util.calcAngleBetweenVectors(r.util.rotateVector(s,p),h),_=p*(y===0?1:-1)/2;return{vector:r.util.getHatVector(r.util.rotateVector(s,_)),angle:p}},projectStrokeOnPoints:function(t,o,c){var s=[],h=o.strokeWidth/2,p=o.strokeUniform?new r.Point(1/o.scaleX,1/o.scaleY):new r.Point(1,1),y=function(_){var T=h/Math.hypot(_.x,_.y);return new r.Point(_.x*T*p.x,_.y*T*p.y)};return t.length<=1||t.forEach(function(_,T){var A=new r.Point(_.x,_.y),v,V;T===0?(V=t[T+1],v=c?y(r.util.createVector(V,A)).addEquals(A):t[t.length-1]):T===t.length-1?(v=t[T-1],V=c?y(r.util.createVector(v,A)).addEquals(A):t[0]):(v=t[T-1],V=t[T+1]);var tt=r.util.getBisector(A,v,V),pt=tt.vector,_t=tt.angle,Tt,vt;if(o.strokeLineJoin==="miter"&&(Tt=-h/Math.sin(_t/2),vt=new r.Point(pt.x*Tt*p.x,pt.y*Tt*p.y),Math.hypot(vt.x,vt.y)/h<=o.strokeMiterLimit)){s.push(A.add(vt)),s.push(A.subtract(vt));return}Tt=-h*Math.SQRT2,vt=new r.Point(pt.x*Tt*p.x,pt.y*Tt*p.y),s.push(A.add(vt)),s.push(A.subtract(vt))}),s},transformPoint:function(t,o,c){return c?new r.Point(o[0]*t.x+o[2]*t.y,o[1]*t.x+o[3]*t.y):new r.Point(o[0]*t.x+o[2]*t.y+o[4],o[1]*t.x+o[3]*t.y+o[5])},makeBoundingBoxFromPoints:function(t,o){if(o)for(var c=0;c<t.length;c++)t[c]=r.util.transformPoint(t[c],o);var s=[t[0].x,t[1].x,t[2].x,t[3].x],h=r.util.array.min(s),p=r.util.array.max(s),y=p-h,_=[t[0].y,t[1].y,t[2].y,t[3].y],T=r.util.array.min(_),A=r.util.array.max(_),v=A-T;return{left:h,top:T,width:y,height:v}},invertTransform:function(t){var o=1/(t[0]*t[3]-t[1]*t[2]),c=[o*t[3],-o*t[1],-o*t[2],o*t[0]],s=r.util.transformPoint({x:t[4],y:t[5]},c,!0);return c[4]=-s.x,c[5]=-s.y,c},toFixed:function(t,o){return parseFloat(Number(t).toFixed(o))},parseUnit:function(t,o){var c=/\D{0,2}$/.exec(t),s=parseFloat(t);switch(o||(o=r.Text.DEFAULT_SVG_FONT_SIZE),c[0]){case"mm":return s*r.DPI/25.4;case"cm":return s*r.DPI/2.54;case"in":return s*r.DPI;case"pt":return s*r.DPI/72;case"pc":return s*r.DPI/72*12;case"em":return s*o;default:return s}},falseFunction:function(){return!1},getKlass:function(t,o){return t=r.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),r.util.resolveNamespace(o)[t]},getSvgAttributes:function(t){var o=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":o=o.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":o=o.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":o=o.concat(["offset","stop-color","stop-opacity"]);break}return o},resolveNamespace:function(t){if(!t)return r;var o=t.split("."),c=o.length,s,h=d||r.window;for(s=0;s<c;++s)h=h[o[s]];return h},loadImage:function(t,o,c,s){if(!t){o&&o.call(c,t);return}var h=r.util.createImage(),p=function(){o&&o.call(c,h,!1),h=h.onload=h.onerror=null};h.onload=p,h.onerror=function(){r.log("Error loading "+h.src),o&&o.call(c,null,!0),h=h.onload=h.onerror=null},t.indexOf("data")!==0&&s!==void 0&&s!==null&&(h.crossOrigin=s),t.substring(0,14)==="data:image/svg"&&(h.onload=null,r.util.loadImageInDom(h,p)),h.src=t},loadImageInDom:function(t,o){var c=r.document.createElement("div");c.style.width=c.style.height="1px",c.style.left=c.style.top="-100%",c.style.position="absolute",c.appendChild(t),r.document.querySelector("body").appendChild(c),t.onload=function(){o(),c.parentNode.removeChild(c),c=null}},enlivenObjects:function(t,o,c,s){t=t||[];var h=[],p=0,y=t.length;function _(){++p===y&&o&&o(h.filter(function(T){return T}))}if(!y){o&&o(h);return}t.forEach(function(T,A){if(!T||!T.type){_();return}var v=r.util.getKlass(T.type,c);v.fromObject(T,function(V,tt){tt||(h[A]=V),s&&s(T,V,tt),_()})})},enlivenObjectEnlivables:function(t,o,c){var s=r.Object.ENLIVEN_PROPS.filter(function(h){return!!t[h]});r.util.enlivenObjects(s.map(function(h){return t[h]}),function(h){var p={};s.forEach(function(y,_){p[y]=h[_],o&&(o[y]=h[_])}),c&&c(p)})},enlivenPatterns:function(t,o){t=t||[];function c(){++h===p&&o&&o(s)}var s=[],h=0,p=t.length;if(!p){o&&o(s);return}t.forEach(function(y,_){y&&y.source?new r.Pattern(y,function(T){s[_]=T,c()}):(s[_]=y,c())})},groupSVGElements:function(t,o,c){var s;return t&&t.length===1?(typeof c<"u"&&(t[0].sourcePath=c),t[0]):(o&&(o.width&&o.height?o.centerPoint={x:o.width/2,y:o.height/2}:(delete o.width,delete o.height)),s=new r.Group(t,o),typeof c<"u"&&(s.sourcePath=c),s)},populateWithProperties:function(t,o,c){if(c&&Array.isArray(c))for(var s=0,h=c.length;s<h;s++)c[s]in t&&(o[c[s]]=t[c[s]])},createCanvasElement:function(){return r.document.createElement("canvas")},copyCanvasElement:function(t){var o=r.util.createCanvasElement();return o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(t,0,0),o},toDataURL:function(t,o,c){return t.toDataURL("image/"+o,c)},createImage:function(){return r.document.createElement("img")},multiplyTransformMatrices:function(t,o,c){return[t[0]*o[0]+t[2]*o[1],t[1]*o[0]+t[3]*o[1],t[0]*o[2]+t[2]*o[3],t[1]*o[2]+t[3]*o[3],c?0:t[0]*o[4]+t[2]*o[5]+t[4],c?0:t[1]*o[4]+t[3]*o[5]+t[5]]},qrDecompose:function(t){var o=l(t[1],t[0]),c=u(t[0],2)+u(t[1],2),s=i(c),h=(t[0]*t[3]-t[2]*t[1])/s,p=l(t[0]*t[2]+t[1]*t[3],c);return{angle:o/e,scaleX:s,scaleY:h,skewX:p/e,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return r.iMatrix.concat();var o=r.util.degreesToRadians(t.angle),c=r.util.cos(o),s=r.util.sin(o);return[c,s,-s,c,0,0]},calcDimensionsMatrix:function(t){var o=typeof t.scaleX>"u"?1:t.scaleX,c=typeof t.scaleY>"u"?1:t.scaleY,s=[t.flipX?-o:o,0,0,t.flipY?-c:c,0,0],h=r.util.multiplyTransformMatrices,p=r.util.degreesToRadians;return t.skewX&&(s=h(s,[1,0,Math.tan(p(t.skewX)),1],!0)),t.skewY&&(s=h(s,[1,Math.tan(p(t.skewY)),0,1],!0)),s},composeMatrix:function(t){var o=[1,0,0,1,t.translateX||0,t.translateY||0],c=r.util.multiplyTransformMatrices;return t.angle&&(o=c(o,r.util.calcRotateMatrix(t))),(t.scaleX!==1||t.scaleY!==1||t.skewX||t.skewY||t.flipX||t.flipY)&&(o=c(o,r.util.calcDimensionsMatrix(t))),o},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,o,c,s){s>0&&(o>s?o-=s:o=0,c>s?c-=s:c=0);var h=!0,p,y,_=t.getImageData(o,c,s*2||1,s*2||1),T=_.data.length;for(p=3;p<T&&(y=_.data[p],h=y<=0,h!==!1);p+=4);return _=null,h},parsePreserveAspectRatioAttribute:function(t){var o="meet",c="Mid",s="Mid",h=t.split(" "),p;return h&&h.length&&(o=h.pop(),o!=="meet"&&o!=="slice"?(p=o,o="meet"):h.length&&(p=h.pop())),c=p!=="none"?p.slice(1,4):"none",s=p!=="none"?p.slice(5,8):"none",{meetOrSlice:o,alignX:c,alignY:s}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?r.charWidthsCache[t]&&delete r.charWidthsCache[t]:r.charWidthsCache={}},limitDimsByArea:function(t,o){var c=Math.sqrt(o*t),s=Math.floor(o/c);return{x:Math.floor(c),y:s}},capValue:function(t,o,c){return Math.max(t,Math.min(o,c))},findScaleToFit:function(t,o){return Math.min(o.width/t.width,o.height/t.height)},findScaleToCover:function(t,o){return Math.max(o.width/t.width,o.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(o){return r.util.toFixed(o,r.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(t,o){var c=r.util.invertTransform(o),s=r.util.multiplyTransformMatrices(c,t.calcOwnMatrix());r.util.applyTransformToObject(t,s)},addTransformToObject:function(t,o){r.util.applyTransformToObject(t,r.util.multiplyTransformMatrices(o,t.calcOwnMatrix()))},applyTransformToObject:function(t,o){var c=r.util.qrDecompose(o),s=new r.Point(c.translateX,c.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",c.scaleX),t.set("scaleY",c.scaleY),t.skewX=c.skewX,t.skewY=c.skewY,t.angle=c.angle,t.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(t,o,c){var s=t/2,h=o/2,p=[{x:-s,y:-h},{x:s,y:-h},{x:-s,y:h},{x:s,y:h}],y=r.util.calcDimensionsMatrix(c),_=r.util.makeBoundingBoxFromPoints(p,y);return{x:_.width,y:_.height}},mergeClipPaths:function(t,o){var c=t,s=o;c.inverted&&!s.inverted&&(c=o,s=t),r.util.applyTransformToObject(s,r.util.multiplyTransformMatrices(r.util.invertTransform(c.calcTransformMatrix()),s.calcTransformMatrix()));var h=c.inverted&&s.inverted;return h&&(c.inverted=s.inverted=!1),new r.Group([c],{clipPath:s,inverted:h})},hasStyleChanged:function(t,o,c){return c=c||!1,t.fill!==o.fill||t.stroke!==o.stroke||t.strokeWidth!==o.strokeWidth||t.fontSize!==o.fontSize||t.fontFamily!==o.fontFamily||t.fontWeight!==o.fontWeight||t.fontStyle!==o.fontStyle||t.textBackgroundColor!==o.textBackgroundColor||t.deltaY!==o.deltaY||c&&(t.overline!==o.overline||t.underline!==o.underline||t.linethrough!==o.linethrough)},stylesToArray:function(c,o){for(var c=r.util.object.clone(c,!0),s=o.split(`
`),h=-1,p={},y=[],_=0;_<s.length;_++){if(!c[_]){h+=s[_].length;continue}for(var T=0;T<s[_].length;T++){h++;var A=c[_][T];if(A&&Object.keys(A).length>0){var v=r.util.hasStyleChanged(p,A,!0);v?y.push({start:h,end:h+1,style:A}):y[y.length-1].end++}p=A||{}}}return y},stylesFromArray:function(t,o){if(!Array.isArray(t))return t;for(var c=o.split(`
`),s=-1,h=0,p={},y=0;y<c.length;y++)for(var _=0;_<c[y].length;_++)s++,t[h]&&t[h].start<=s&&s<t[h].end&&(p[y]=p[y]||{},p[y][_]=Object.assign({},t[h].style),s===t[h].end-1&&h++);return p}}}(f),function(){var d=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function u(D,H,N,B,st,I,M,q,Q,ut,rt){var ct=r.util.cos(D),mt=r.util.sin(D),F=r.util.cos(H),k=r.util.sin(H),L=N*st*F-B*I*k+M,U=B*st*F+N*I*k+q,X=ut+Q*(-N*st*mt-B*I*ct),Y=rt+Q*(-B*st*mt+N*I*ct),K=L+Q*(N*st*k+B*I*F),Z=U+Q*(B*st*k-N*I*F);return["C",X,Y,K,Z,L,U]}function e(D,H,N,B,st,I,M){var q=Math.PI,Q=M*q/180,ut=r.util.sin(Q),rt=r.util.cos(Q),ct=0,mt=0;N=Math.abs(N),B=Math.abs(B);var F=-rt*D*.5-ut*H*.5,k=-rt*H*.5+ut*D*.5,L=N*N,U=B*B,X=k*k,Y=F*F,K=L*U-L*X-U*Y,Z=0;if(K<0){var ft=Math.sqrt(1-K/(L*U));N*=ft,B*=ft}else Z=(st===I?-1:1)*Math.sqrt(K/(L*X+U*Y));var it=Z*N*k/B,J=-Z*B*F/N,ht=rt*it-ut*J+D*.5,yt=ut*it+rt*J+H*.5,at=n(1,0,(F-it)/N,(k-J)/B),Pt=n((F-it)/N,(k-J)/B,(-F-it)/N,(-k-J)/B);I===0&&Pt>0?Pt-=2*q:I===1&&Pt<0&&(Pt+=2*q);for(var Mt=Math.ceil(Math.abs(Pt/q*2)),jt=[],Bt=Pt/Mt,Qt=8/3*Math.sin(Bt/4)*Math.sin(Bt/4)/Math.sin(Bt/2),fe=at+Bt,ie=0;ie<Mt;ie++)jt[ie]=u(at,fe,rt,ut,N,B,ht,yt,Qt,ct,mt),ct=jt[ie][5],mt=jt[ie][6],at=fe,fe+=Bt;return jt}function n(D,H,N,B){var st=Math.atan2(H,D),I=Math.atan2(B,N);return I>=st?I-st:2*Math.PI-(st-I)}function t(D,H,N,B,st,I,M,q){var Q;if(r.cachesBoundsOfCurve&&(Q=d.call(arguments),r.boundsOfCurveCache[Q]))return r.boundsOfCurveCache[Q];var ut=Math.sqrt,rt=Math.min,ct=Math.max,mt=Math.abs,F=[],k=[[],[]],L,U,X,Y,K,Z,ft,it;U=6*D-12*N+6*st,L=-3*D+9*N-9*st+3*M,X=3*N-3*D;for(var J=0;J<2;++J){if(J>0&&(U=6*H-12*B+6*I,L=-3*H+9*B-9*I+3*q,X=3*B-3*H),mt(L)<1e-12){if(mt(U)<1e-12)continue;Y=-X/U,0<Y&&Y<1&&F.push(Y);continue}ft=U*U-4*X*L,!(ft<0)&&(it=ut(ft),K=(-U+it)/(2*L),0<K&&K<1&&F.push(K),Z=(-U-it)/(2*L),0<Z&&Z<1&&F.push(Z))}for(var ht,yt,at=F.length,Pt=at,Mt;at--;)Y=F[at],Mt=1-Y,ht=Mt*Mt*Mt*D+3*Mt*Mt*Y*N+3*Mt*Y*Y*st+Y*Y*Y*M,k[0][at]=ht,yt=Mt*Mt*Mt*H+3*Mt*Mt*Y*B+3*Mt*Y*Y*I+Y*Y*Y*q,k[1][at]=yt;k[0][Pt]=D,k[1][Pt]=H,k[0][Pt+1]=M,k[1][Pt+1]=q;var jt=[{x:rt.apply(null,k[0]),y:rt.apply(null,k[1])},{x:ct.apply(null,k[0]),y:ct.apply(null,k[1])}];return r.cachesBoundsOfCurve&&(r.boundsOfCurveCache[Q]=jt),jt}function o(D,H,N){for(var B=N[1],st=N[2],I=N[3],M=N[4],q=N[5],Q=N[6],ut=N[7],rt=e(Q-D,ut-H,B,st,M,q,I),ct=0,mt=rt.length;ct<mt;ct++)rt[ct][1]+=D,rt[ct][2]+=H,rt[ct][3]+=D,rt[ct][4]+=H,rt[ct][5]+=D,rt[ct][6]+=H;return rt}function c(D){var H=0,N=0,B=D.length,st=0,I=0,M,q,Q,ut=[],rt,ct,mt;for(q=0;q<B;++q){switch(Q=!1,M=D[q].slice(0),M[0]){case"l":M[0]="L",M[1]+=H,M[2]+=N;case"L":H=M[1],N=M[2];break;case"h":M[1]+=H;case"H":M[0]="L",M[2]=N,H=M[1];break;case"v":M[1]+=N;case"V":M[0]="L",N=M[1],M[1]=H,M[2]=N;break;case"m":M[0]="M",M[1]+=H,M[2]+=N;case"M":H=M[1],N=M[2],st=M[1],I=M[2];break;case"c":M[0]="C",M[1]+=H,M[2]+=N,M[3]+=H,M[4]+=N,M[5]+=H,M[6]+=N;case"C":ct=M[3],mt=M[4],H=M[5],N=M[6];break;case"s":M[0]="S",M[1]+=H,M[2]+=N,M[3]+=H,M[4]+=N;case"S":rt==="C"?(ct=2*H-ct,mt=2*N-mt):(ct=H,mt=N),H=M[3],N=M[4],M[0]="C",M[5]=M[3],M[6]=M[4],M[3]=M[1],M[4]=M[2],M[1]=ct,M[2]=mt,ct=M[3],mt=M[4];break;case"q":M[0]="Q",M[1]+=H,M[2]+=N,M[3]+=H,M[4]+=N;case"Q":ct=M[1],mt=M[2],H=M[3],N=M[4];break;case"t":M[0]="T",M[1]+=H,M[2]+=N;case"T":rt==="Q"?(ct=2*H-ct,mt=2*N-mt):(ct=H,mt=N),M[0]="Q",H=M[1],N=M[2],M[1]=ct,M[2]=mt,M[3]=H,M[4]=N;break;case"a":M[0]="A",M[6]+=H,M[7]+=N;case"A":Q=!0,ut=ut.concat(o(H,N,M)),H=M[6],N=M[7];break;case"z":case"Z":H=st,N=I;break}Q||ut.push(M),rt=M[0]}return ut}function s(D,H,N,B){return Math.sqrt((N-D)*(N-D)+(B-H)*(B-H))}function h(D){return D*D*D}function p(D){return 3*D*D*(1-D)}function y(D){return 3*D*(1-D)*(1-D)}function _(D){return(1-D)*(1-D)*(1-D)}function T(D,H,N,B,st,I,M,q){return function(Q){var ut=h(Q),rt=p(Q),ct=y(Q),mt=_(Q);return{x:M*ut+st*rt+N*ct+D*mt,y:q*ut+I*rt+B*ct+H*mt}}}function A(D,H,N,B,st,I,M,q){return function(Q){var ut=1-Q,rt=3*ut*ut*(N-D)+6*ut*Q*(st-N)+3*Q*Q*(M-st),ct=3*ut*ut*(B-H)+6*ut*Q*(I-B)+3*Q*Q*(q-I);return Math.atan2(ct,rt)}}function v(D){return D*D}function V(D){return 2*D*(1-D)}function tt(D){return(1-D)*(1-D)}function pt(D,H,N,B,st,I){return function(M){var q=v(M),Q=V(M),ut=tt(M);return{x:st*q+N*Q+D*ut,y:I*q+B*Q+H*ut}}}function _t(D,H,N,B,st,I){return function(M){var q=1-M,Q=2*q*(N-D)+2*M*(st-N),ut=2*q*(B-H)+2*M*(I-B);return Math.atan2(ut,Q)}}function Tt(D,H,N){var B={x:H,y:N},st,I=0,M;for(M=1;M<=100;M+=1)st=D(M/100),I+=s(B.x,B.y,st.x,st.y),B=st;return I}function vt(D,H){for(var N=0,B=0,st=D.iterator,I={x:D.x,y:D.y},M,q,Q=.01,ut=D.angleFinder,rt;B<H&&Q>1e-4;)M=st(N),rt=N,q=s(I.x,I.y,M.x,M.y),q+B>H?(N-=Q,Q/=2):(I=M,N+=Q,B+=q);return M.angle=ut(rt),M}function bt(D){for(var H=0,N=D.length,B,st=0,I=0,M=0,q=0,Q=[],ut,rt,ct,mt=0;mt<N;mt++){switch(B=D[mt],rt={x:st,y:I,command:B[0]},B[0]){case"M":rt.length=0,M=st=B[1],q=I=B[2];break;case"L":rt.length=s(st,I,B[1],B[2]),st=B[1],I=B[2];break;case"C":ut=T(st,I,B[1],B[2],B[3],B[4],B[5],B[6]),ct=A(st,I,B[1],B[2],B[3],B[4],B[5],B[6]),rt.iterator=ut,rt.angleFinder=ct,rt.length=Tt(ut,st,I),st=B[5],I=B[6];break;case"Q":ut=pt(st,I,B[1],B[2],B[3],B[4]),ct=_t(st,I,B[1],B[2],B[3],B[4]),rt.iterator=ut,rt.angleFinder=ct,rt.length=Tt(ut,st,I),st=B[3],I=B[4];break;case"Z":case"z":rt.destX=M,rt.destY=q,rt.length=s(st,I,M,q),st=M,I=q;break}H+=rt.length,Q.push(rt)}return Q.push({length:H,x:st,y:I}),Q}function wt(D,H,N){N||(N=bt(D));for(var B=0;H-N[B].length>0&&B<N.length-2;)H-=N[B].length,B++;var st=N[B],I=H/st.length,M=st.command,q=D[B],Q;switch(M){case"M":return{x:st.x,y:st.y,angle:0};case"Z":case"z":return Q=new r.Point(st.x,st.y).lerp(new r.Point(st.destX,st.destY),I),Q.angle=Math.atan2(st.destY-st.y,st.destX-st.x),Q;case"L":return Q=new r.Point(st.x,st.y).lerp(new r.Point(q[1],q[2]),I),Q.angle=Math.atan2(q[2]-st.y,q[1]-st.x),Q;case"C":return vt(st,H);case"Q":return vt(st,H)}}function Et(D){var H=[],N=[],B,st,I=r.rePathCommand,M="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",q="("+M+")"+r.commaWsp,Q="([01])"+r.commaWsp+"?",ut=q+"?"+q+"?"+q+Q+Q+q+"?("+M+")",rt=new RegExp(ut,"g"),ct,mt,F;if(!D||!D.match)return H;F=D.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var k=0,L,U=F.length;k<U;k++){B=F[k],mt=B.slice(1).trim(),N.length=0;var X=B.charAt(0);if(L=[X],X.toLowerCase()==="a")for(var Y;Y=rt.exec(mt);)for(var K=1;K<Y.length;K++)N.push(Y[K]);else for(;ct=I.exec(mt);)N.push(ct[0]);for(var K=0,Z=N.length;K<Z;K++)st=parseFloat(N[K]),isNaN(st)||L.push(st);var ft=i[X.toLowerCase()],it=l[X]||X;if(L.length-1>ft)for(var J=1,ht=L.length;J<ht;J+=ft)H.push([X].concat(L.slice(J,J+ft))),X=it;else H.push(L)}return H}function St(D,H){var N=[],B,st=new r.Point(D[0].x,D[0].y),I=new r.Point(D[1].x,D[1].y),M=D.length,q=1,Q=0,ut=M>2;for(H=H||0,ut&&(q=D[2].x<I.x?-1:D[2].x===I.x?0:1,Q=D[2].y<I.y?-1:D[2].y===I.y?0:1),N.push(["M",st.x-q*H,st.y-Q*H]),B=1;B<M;B++){if(!st.eq(I)){var rt=st.midPointFrom(I);N.push(["Q",st.x,st.y,rt.x,rt.y])}st=D[B],B+1<D.length&&(I=D[B+1])}return ut&&(q=st.x>D[B-2].x?1:st.x===D[B-2].x?0:-1,Q=st.y>D[B-2].y?1:st.y===D[B-2].y?0:-1),N.push(["L",st.x+q*H,st.y+Q*H]),N}function xt(D,H,N){return N&&(H=r.util.multiplyTransformMatrices(H,[1,0,0,1,-N.x,-N.y])),D.map(function(B){for(var st=B.slice(0),I={},M=1;M<B.length-1;M+=2)I.x=B[M],I.y=B[M+1],I=r.util.transformPoint(I,H),st[M]=I.x,st[M+1]=I.y;return st})}r.util.joinPath=function(D){return D.map(function(H){return H.join(" ")}).join(" ")},r.util.parsePath=Et,r.util.makePathSimpler=c,r.util.getSmoothPathFromPoints=St,r.util.getPathSegmentsInfo=bt,r.util.getBoundsOfCurve=t,r.util.getPointOnPath=wt,r.util.transformPath=xt}(),function(){var d=Array.prototype.slice;function i(t,o){for(var c=d.call(arguments,2),s=[],h=0,p=t.length;h<p;h++)s[h]=c.length?t[h][o].apply(t[h],c):t[h][o].call(t[h]);return s}function l(t,o){return n(t,o,function(c,s){return c>=s})}function u(t,o){return n(t,o,function(c,s){return c<s})}function e(t,o){for(var c=t.length;c--;)t[c]=o;return t}function n(t,o,c){if(!(!t||t.length===0)){var s=t.length-1,h=o?t[s][o]:t[s];if(o)for(;s--;)c(t[s][o],h)&&(h=t[s][o]);else for(;s--;)c(t[s],h)&&(h=t[s]);return h}}r.util.array={fill:e,invoke:i,min:u,max:l}}(),function(){function d(l,u,e){if(e)if(!r.isLikelyNode&&u instanceof Element)l=u;else if(u instanceof Array){l=[];for(var n=0,t=u.length;n<t;n++)l[n]=d({},u[n],e)}else if(u&&typeof u=="object")for(var o in u)o==="canvas"||o==="group"?l[o]=null:u.hasOwnProperty(o)&&(l[o]=d({},u[o],e));else l=u;else for(var o in u)l[o]=u[o];return l}function i(l,u){return d({},l,u)}r.util.object={extend:d,clone:i},r.util.object.extend(r.util,r.Observable)}(),function(){function d(n){return n.replace(/-+(.)?/g,function(t,o){return o?o.toUpperCase():""})}function i(n,t){return n.charAt(0).toUpperCase()+(t?n.slice(1):n.slice(1).toLowerCase())}function l(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(n){var t=0,o,c=[];for(t=0,o;t<n.length;t++)(o=e(n,t))!==!1&&c.push(o);return c}function e(n,t){var o=n.charCodeAt(t);if(isNaN(o))return"";if(o<55296||o>57343)return n.charAt(t);if(55296<=o&&o<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";var c=n.charCodeAt(t+1);if(56320>c||c>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";var s=n.charCodeAt(t-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}r.util.string={camelize:d,capitalize:i,escapeXml:l,graphemeSplit:u}}(),function(){var d=Array.prototype.slice,i=function(){},l=function(){for(var o in{toString:1})if(o==="toString")return!1;return!0}(),u=function(o,c,s){for(var h in c)h in o.prototype&&typeof o.prototype[h]=="function"&&(c[h]+"").indexOf("callSuper")>-1?o.prototype[h]=function(p){return function(){var y=this.constructor.superclass;this.constructor.superclass=s;var _=c[p].apply(this,arguments);if(this.constructor.superclass=y,p!=="initialize")return _}}(h):o.prototype[h]=c[h],l&&(c.toString!==Object.prototype.toString&&(o.prototype.toString=c.toString),c.valueOf!==Object.prototype.valueOf&&(o.prototype.valueOf=c.valueOf))};function e(){}function n(o){for(var c=null,s=this;s.constructor.superclass;){var h=s.constructor.superclass.prototype[o];if(s[o]!==h){c=h;break}s=s.constructor.superclass.prototype}return c?arguments.length>1?c.apply(this,d.call(arguments,1)):c.call(this):console.log("tried to callSuper "+o+", method not found in prototype chain",this)}function t(){var o=null,c=d.call(arguments,0);typeof c[0]=="function"&&(o=c.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=o,s.subclasses=[],o&&(e.prototype=o.prototype,s.prototype=new e,o.subclasses.push(s));for(var h=0,p=c.length;h<p;h++)u(s,c[h],o);return s.prototype.initialize||(s.prototype.initialize=i),s.prototype.constructor=s,s.prototype.callSuper=n,s}r.util.createClass=t}(),function(){var d=!!r.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];r.util.addListener=function(u,e,n,t){u&&u.addEventListener(e,n,d?!1:t)},r.util.removeListener=function(u,e,n,t){u&&u.removeEventListener(e,n,d?!1:t)};function l(u){var e=u.changedTouches;return e&&e[0]?e[0]:u}r.util.getPointer=function(u){var e=u.target,n=r.util.getScrollLeftTop(e),t=l(u);return{x:t.clientX+n.left,y:t.clientY+n.top}},r.util.isTouchEvent=function(u){return i.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function d(t,o){var c=t.style;if(!c)return t;if(typeof o=="string")return t.style.cssText+=";"+o,o.indexOf("opacity")>-1?n(t,o.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var s in o)if(s==="opacity")n(t,o[s]);else{var h=s==="float"||s==="cssFloat"?typeof c.styleFloat>"u"?"cssFloat":"styleFloat":s;c.setProperty(h,o[s])}return t}var i=r.document.createElement("div"),l=typeof i.style.opacity=="string",u=typeof i.style.filter=="string",e=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return t};l?n=function(t,o){return t.style.opacity=o,t}:u&&(n=function(t,o){var c=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(c.zoom=1),e.test(c.filter)?(o=o>=.9999?"":"alpha(opacity="+o*100+")",c.filter=c.filter.replace(e,o)):c.filter+=" alpha(opacity="+o*100+")",t}),r.util.setStyle=d}(),function(){var d=Array.prototype.slice;function i(_){return typeof _=="string"?r.document.getElementById(_):_}var l,u=function(_){return d.call(_,0)};try{l=u(r.document.childNodes)instanceof Array}catch{}l||(u=function(_){for(var T=new Array(_.length),A=_.length;A--;)T[A]=_[A];return T});function e(_,T){var A=r.document.createElement(_);for(var v in T)v==="class"?A.className=T[v]:v==="for"?A.htmlFor=T[v]:A.setAttribute(v,T[v]);return A}function n(_,T){_&&(" "+_.className+" ").indexOf(" "+T+" ")===-1&&(_.className+=(_.className?" ":"")+T)}function t(_,T,A){return typeof T=="string"&&(T=e(T,A)),_.parentNode&&_.parentNode.replaceChild(T,_),T.appendChild(_),T}function o(_){for(var T=0,A=0,v=r.document.documentElement,V=r.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===r.document?(T=V.scrollLeft||v.scrollLeft||0,A=V.scrollTop||v.scrollTop||0):(T+=_.scrollLeft||0,A+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:T,top:A}}function c(_){var T,A=_&&_.ownerDocument,v={left:0,top:0},V={left:0,top:0},tt,pt={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!A)return V;for(var _t in pt)V[pt[_t]]+=parseInt(s(_,_t),10)||0;return T=A.documentElement,typeof _.getBoundingClientRect<"u"&&(v=_.getBoundingClientRect()),tt=o(_),{left:v.left+tt.left-(T.clientLeft||0)+V.left,top:v.top+tt.top-(T.clientTop||0)+V.top}}var s;r.document.defaultView&&r.document.defaultView.getComputedStyle?s=function(_,T){var A=r.document.defaultView.getComputedStyle(_,null);return A?A[T]:void 0}:s=function(_,T){var A=_.style[T];return!A&&_.currentStyle&&(A=_.currentStyle[T]),A},function(){var _=r.document.documentElement.style,T="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function A(V){return typeof V.onselectstart<"u"&&(V.onselectstart=r.util.falseFunction),T?V.style[T]="none":typeof V.unselectable=="string"&&(V.unselectable="on"),V}function v(V){return typeof V.onselectstart<"u"&&(V.onselectstart=null),T?V.style[T]="":typeof V.unselectable=="string"&&(V.unselectable=""),V}r.util.makeElementUnselectable=A,r.util.makeElementSelectable=v}();function h(_){var T=r.jsdomImplForWrapper(_);return T._canvas||T._image}function p(_){if(r.isLikelyNode){var T=r.jsdomImplForWrapper(_);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function y(_,T){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=T}r.util.setImageSmoothing=y,r.util.getById=i,r.util.toArray=u,r.util.addClass=n,r.util.makeElement=e,r.util.wrapElement=t,r.util.getScrollLeftTop=o,r.util.getElementOffset=c,r.util.getNodeCanvas=h,r.util.cleanUpJsdomNode=p}(),function(){function d(u,e){return u+(/\?/.test(u)?"&":"?")+e}function i(){}function l(u,e){e||(e={});var n=e.method?e.method.toUpperCase():"GET",t=e.onComplete||function(){},o=new r.window.XMLHttpRequest,c=e.body||e.parameters;return o.onreadystatechange=function(){o.readyState===4&&(t(o),o.onreadystatechange=i)},n==="GET"&&(c=null,typeof e.parameters=="string"&&(u=d(u,e.parameters))),o.open(n,u,!0),(n==="POST"||n==="PUT")&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(c),o}r.util.request=l}(),r.log=console.log,r.warn=console.warn,function(){var d=r.util.object.extend,i=r.util.object.clone,l=[];r.util.object.extend(l,{cancelAll:function(){var h=this.splice(0);return h.forEach(function(p){p.cancel()}),h},cancelByCanvas:function(h){if(!h)return[];var p=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===h});return p.forEach(function(y){y.cancel()}),p},cancelByTarget:function(h){var p=this.findAnimationsByTarget(h);return p.forEach(function(y){y.cancel()}),p},findAnimationIndex:function(h){return this.indexOf(this.findAnimation(h))},findAnimation:function(h){return this.find(function(p){return p.cancel===h})},findAnimationsByTarget:function(h){return h?this.filter(function(p){return p.target===h}):[]}});function u(){return!1}function e(h,p,y,_){return-y*Math.cos(h/_*(Math.PI/2))+y+p}function n(h){h||(h={});var p=!1,y,_=function(){var T=r.runningAnimations.indexOf(y);return T>-1&&r.runningAnimations.splice(T,1)[0]};return y=d(i(h),{cancel:function(){return p=!0,_()},currentValue:"startValue"in h?h.startValue:0,completionRate:0,durationRate:0}),r.runningAnimations.push(y),c(function(T){var A=T||+new Date,v=h.duration||500,V=A+v,tt,pt=h.onChange||u,_t=h.abort||u,Tt=h.onComplete||u,vt=h.easing||e,bt="startValue"in h?h.startValue.length>0:!1,wt="startValue"in h?h.startValue:0,Et="endValue"in h?h.endValue:100,St=h.byValue||(bt?wt.map(function(xt,D){return Et[D]-wt[D]}):Et-wt);h.onStart&&h.onStart(),function xt(D){tt=D||+new Date;var H=tt>V?v:tt-A,N=H/v,B=bt?wt.map(function(I,M){return vt(H,wt[M],St[M],v)}):vt(H,wt,St,v),st=Math.abs(bt?(B[0]-wt[0])/St[0]:(B-wt)/St);if(y.currentValue=bt?B.slice():B,y.completionRate=st,y.durationRate=N,!p){if(_t(B,st,N)){_();return}if(tt>V){y.currentValue=bt?Et.slice():Et,y.completionRate=1,y.durationRate=1,pt(bt?Et.slice():Et,1,1),Tt(Et,1,1),_();return}else pt(B,st,N),c(xt)}}(A)}),y.cancel}var t=r.window.requestAnimationFrame||r.window.webkitRequestAnimationFrame||r.window.mozRequestAnimationFrame||r.window.oRequestAnimationFrame||r.window.msRequestAnimationFrame||function(h){return r.window.setTimeout(h,1e3/60)},o=r.window.cancelAnimationFrame||r.window.clearTimeout;function c(){return t.apply(r.window,arguments)}function s(){return o.apply(r.window,arguments)}r.util.animate=n,r.util.requestAnimFrame=c,r.util.cancelAnimFrame=s,r.runningAnimations=l}(),function(){function d(l,u,e){var n="rgba("+parseInt(l[0]+e*(u[0]-l[0]),10)+","+parseInt(l[1]+e*(u[1]-l[1]),10)+","+parseInt(l[2]+e*(u[2]-l[2]),10);return n+=","+(l&&u?parseFloat(l[3]+e*(u[3]-l[3])):1),n+=")",n}function i(l,u,e,n){var t=new r.Color(l).getSource(),o=new r.Color(u).getSource(),c=n.onComplete,s=n.onChange;return n=n||{},r.util.animate(r.util.object.extend(n,{duration:e||500,startValue:t,endValue:o,byValue:o,easing:function(h,p,y,_){var T=n.colorEasing?n.colorEasing(h,_):1-Math.cos(h/_*(Math.PI/2));return d(p,y,T)},onComplete:function(h,p,y){if(c)return c(d(o,o,0),p,y)},onChange:function(h,p,y){if(s){if(Array.isArray(h))return s(d(h,h,0),p,y);s(h,p,y)}}}))}r.util.animateColor=i}(),function(){function d(D,H,N,B){return D<Math.abs(H)?(D=H,B=N/4):H===0&&D===0?B=N/(2*Math.PI)*Math.asin(1):B=N/(2*Math.PI)*Math.asin(H/D),{a:D,c:H,p:N,s:B}}function i(D,H,N){return D.a*Math.pow(2,10*(H-=1))*Math.sin((H*N-D.s)*(2*Math.PI)/D.p)}function l(D,H,N,B){return N*((D=D/B-1)*D*D+1)+H}function u(D,H,N,B){return D/=B/2,D<1?N/2*D*D*D+H:N/2*((D-=2)*D*D+2)+H}function e(D,H,N,B){return N*(D/=B)*D*D*D+H}function n(D,H,N,B){return-N*((D=D/B-1)*D*D*D-1)+H}function t(D,H,N,B){return D/=B/2,D<1?N/2*D*D*D*D+H:-N/2*((D-=2)*D*D*D-2)+H}function o(D,H,N,B){return N*(D/=B)*D*D*D*D+H}function c(D,H,N,B){return N*((D=D/B-1)*D*D*D*D+1)+H}function s(D,H,N,B){return D/=B/2,D<1?N/2*D*D*D*D*D+H:N/2*((D-=2)*D*D*D*D+2)+H}function h(D,H,N,B){return-N*Math.cos(D/B*(Math.PI/2))+N+H}function p(D,H,N,B){return N*Math.sin(D/B*(Math.PI/2))+H}function y(D,H,N,B){return-N/2*(Math.cos(Math.PI*D/B)-1)+H}function _(D,H,N,B){return D===0?H:N*Math.pow(2,10*(D/B-1))+H}function T(D,H,N,B){return D===B?H+N:N*(-Math.pow(2,-10*D/B)+1)+H}function A(D,H,N,B){return D===0?H:D===B?H+N:(D/=B/2,D<1?N/2*Math.pow(2,10*(D-1))+H:N/2*(-Math.pow(2,-10*--D)+2)+H)}function v(D,H,N,B){return-N*(Math.sqrt(1-(D/=B)*D)-1)+H}function V(D,H,N,B){return N*Math.sqrt(1-(D=D/B-1)*D)+H}function tt(D,H,N,B){return D/=B/2,D<1?-N/2*(Math.sqrt(1-D*D)-1)+H:N/2*(Math.sqrt(1-(D-=2)*D)+1)+H}function pt(D,H,N,B){var st=1.70158,I=0,M=N;if(D===0)return H;if(D/=B,D===1)return H+N;I||(I=B*.3);var q=d(M,N,I,st);return-i(q,D,B)+H}function _t(D,H,N,B){var st=1.70158,I=0,M=N;if(D===0)return H;if(D/=B,D===1)return H+N;I||(I=B*.3);var q=d(M,N,I,st);return q.a*Math.pow(2,-10*D)*Math.sin((D*B-q.s)*(2*Math.PI)/q.p)+q.c+H}function Tt(D,H,N,B){var st=1.70158,I=0,M=N;if(D===0)return H;if(D/=B/2,D===2)return H+N;I||(I=B*(.3*1.5));var q=d(M,N,I,st);return D<1?-.5*i(q,D,B)+H:q.a*Math.pow(2,-10*(D-=1))*Math.sin((D*B-q.s)*(2*Math.PI)/q.p)*.5+q.c+H}function vt(D,H,N,B,st){return st===void 0&&(st=1.70158),N*(D/=B)*D*((st+1)*D-st)+H}function bt(D,H,N,B,st){return st===void 0&&(st=1.70158),N*((D=D/B-1)*D*((st+1)*D+st)+1)+H}function wt(D,H,N,B,st){return st===void 0&&(st=1.70158),D/=B/2,D<1?N/2*(D*D*(((st*=1.525)+1)*D-st))+H:N/2*((D-=2)*D*(((st*=1.525)+1)*D+st)+2)+H}function Et(D,H,N,B){return N-St(B-D,0,N,B)+H}function St(D,H,N,B){return(D/=B)<1/2.75?N*(7.5625*D*D)+H:D<2/2.75?N*(7.5625*(D-=1.5/2.75)*D+.75)+H:D<2.5/2.75?N*(7.5625*(D-=2.25/2.75)*D+.9375)+H:N*(7.5625*(D-=2.625/2.75)*D+.984375)+H}function xt(D,H,N,B){return D<B/2?Et(D*2,0,N,B)*.5+H:St(D*2-B,0,N,B)*.5+N*.5+H}r.util.ease={easeInQuad:function(D,H,N,B){return N*(D/=B)*D+H},easeOutQuad:function(D,H,N,B){return-N*(D/=B)*(D-2)+H},easeInOutQuad:function(D,H,N,B){return D/=B/2,D<1?N/2*D*D+H:-N/2*(--D*(D-2)-1)+H},easeInCubic:function(D,H,N,B){return N*(D/=B)*D*D+H},easeOutCubic:l,easeInOutCubic:u,easeInQuart:e,easeOutQuart:n,easeInOutQuart:t,easeInQuint:o,easeOutQuint:c,easeInOutQuint:s,easeInSine:h,easeOutSine:p,easeInOutSine:y,easeInExpo:_,easeOutExpo:T,easeInOutExpo:A,easeInCirc:v,easeOutCirc:V,easeInOutCirc:tt,easeInElastic:pt,easeOutElastic:_t,easeInOutElastic:Tt,easeInBack:vt,easeOutBack:bt,easeInOutBack:wt,easeInBounce:Et,easeOutBounce:St,easeInOutBounce:xt}}(),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.util.object.clone,e=i.util.toFixed,n=i.util.parseUnit,t=i.util.multiplyTransformMatrices,o=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],c=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],h=["symbol","g","a","svg","clipPath","defs"],p={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",T="clip-path";i.svgValidTagNamesRegEx=V(o),i.svgViewBoxElementsRegEx=V(c),i.svgInvalidAncestorsRegEx=V(s),i.svgValidParentsRegEx=V(h),i.cssRules={},i.gradientDefs={},i.clipPaths={};function A(I){return I in p?p[I]:I}function v(I,M,q,Q){var ut=Array.isArray(M),rt;if((I==="fill"||I==="stroke")&&M==="none")M="";else{if(I==="strokeUniform")return M==="non-scaling-stroke";if(I==="strokeDashArray")M==="none"?M=null:M=M.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(I==="transformMatrix")q&&q.transformMatrix?M=t(q.transformMatrix,i.parseTransformAttribute(M)):M=i.parseTransformAttribute(M);else if(I==="visible")M=M!=="none"&&M!=="hidden",q&&q.visible===!1&&(M=!1);else if(I==="opacity")M=parseFloat(M),q&&typeof q.opacity<"u"&&(M*=q.opacity);else if(I==="textAnchor")M=M==="start"?"left":M==="end"?"right":"center";else if(I==="charSpacing")rt=n(M,Q)/Q*1e3;else if(I==="paintFirst"){var ct=M.indexOf("fill"),mt=M.indexOf("stroke"),M="fill";(ct>-1&&mt>-1&&mt<ct||ct===-1&&mt>-1)&&(M="stroke")}else{if(I==="href"||I==="xlink:href"||I==="font")return M;if(I==="imageSmoothing")return M==="optimizeQuality";rt=ut?M.map(n):n(M,Q)}}return!ut&&isNaN(rt)?M:rt}function V(I){return new RegExp("^("+I.join("|")+")\\b","i")}function tt(I){for(var M in y)if(!(typeof I[y[M]]>"u"||I[M]==="")){if(typeof I[M]>"u"){if(!i.Object.prototype[M])continue;I[M]=i.Object.prototype[M]}if(I[M].indexOf("url(")!==0){var q=new i.Color(I[M]);I[M]=q.setAlpha(e(q.getAlpha()*I[y[M]],2)).toRgba()}}return I}function pt(I,M){var q,Q=[],ut,rt,ct;for(rt=0,ct=M.length;rt<ct;rt++)q=M[rt],ut=I.getElementsByTagName(q),Q=Q.concat(Array.prototype.slice.call(ut));return Q}i.parseTransformAttribute=function(){function I(J,ht){var yt=i.util.cos(ht[0]),at=i.util.sin(ht[0]),Pt=0,Mt=0;ht.length===3&&(Pt=ht[1],Mt=ht[2]),J[0]=yt,J[1]=at,J[2]=-at,J[3]=yt,J[4]=Pt-(yt*Pt-at*Mt),J[5]=Mt-(at*Pt+yt*Mt)}function M(J,ht){var yt=ht[0],at=ht.length===2?ht[1]:ht[0];J[0]=yt,J[3]=at}function q(J,ht,yt){J[yt]=Math.tan(i.util.degreesToRadians(ht[0]))}function Q(J,ht){J[4]=ht[0],ht.length===2&&(J[5]=ht[1])}var ut=i.iMatrix,rt=i.reNum,ct=i.commaWsp,mt="(?:(skewX)\\s*\\(\\s*("+rt+")\\s*\\))",F="(?:(skewY)\\s*\\(\\s*("+rt+")\\s*\\))",k="(?:(rotate)\\s*\\(\\s*("+rt+")(?:"+ct+"("+rt+")"+ct+"("+rt+"))?\\s*\\))",L="(?:(scale)\\s*\\(\\s*("+rt+")(?:"+ct+"("+rt+"))?\\s*\\))",U="(?:(translate)\\s*\\(\\s*("+rt+")(?:"+ct+"("+rt+"))?\\s*\\))",X="(?:(matrix)\\s*\\(\\s*("+rt+")"+ct+"("+rt+")"+ct+"("+rt+")"+ct+"("+rt+")"+ct+"("+rt+")"+ct+"("+rt+")\\s*\\))",Y="(?:"+X+"|"+U+"|"+L+"|"+k+"|"+mt+"|"+F+")",K="(?:"+Y+"(?:"+ct+"*"+Y+")*)",Z="^\\s*(?:"+K+"?)\\s*$",ft=new RegExp(Z),it=new RegExp(Y,"g");return function(J){var ht=ut.concat(),yt=[];if(!J||J&&!ft.test(J))return ht;J.replace(it,function(Pt){var Mt=new RegExp(Y).exec(Pt).filter(function(Qt){return!!Qt}),jt=Mt[1],Bt=Mt.slice(2).map(parseFloat);switch(jt){case"translate":Q(ht,Bt);break;case"rotate":Bt[0]=i.util.degreesToRadians(Bt[0]),I(ht,Bt);break;case"scale":M(ht,Bt);break;case"skewX":q(ht,Bt,2);break;case"skewY":q(ht,Bt,1);break;case"matrix":ht=Bt;break}yt.push(ht.concat()),ht=ut.concat()});for(var at=yt[0];yt.length>1;)yt.shift(),at=i.util.multiplyTransformMatrices(at,yt[0]);return at}}();function _t(I,M){var q,Q;I.replace(/;\s*$/,"").split(";").forEach(function(ut){var rt=ut.split(":");q=rt[0].trim().toLowerCase(),Q=rt[1].trim(),M[q]=Q})}function Tt(I,M){var q,Q;for(var ut in I)typeof I[ut]>"u"||(q=ut.toLowerCase(),Q=I[ut],M[q]=Q)}function vt(I,M){var q={};for(var Q in i.cssRules[M])if(bt(I,Q.split(" ")))for(var ut in i.cssRules[M][Q])q[ut]=i.cssRules[M][Q][ut];return q}function bt(I,M){var q,Q=!0;return q=Et(I,M.pop()),q&&M.length&&(Q=wt(I,M)),q&&Q&&M.length===0}function wt(I,M){for(var q,Q=!0;I.parentNode&&I.parentNode.nodeType===1&&M.length;)Q&&(q=M.pop()),I=I.parentNode,Q=Et(I,q);return M.length===0}function Et(I,M){var q=I.nodeName,Q=I.getAttribute("class"),ut=I.getAttribute("id"),rt,ct;if(rt=new RegExp("^"+q,"i"),M=M.replace(rt,""),ut&&M.length&&(rt=new RegExp("#"+ut+"(?![a-zA-Z\\-]+)","i"),M=M.replace(rt,"")),Q&&M.length)for(Q=Q.split(" "),ct=Q.length;ct--;)rt=new RegExp("\\."+Q[ct]+"(?![a-zA-Z\\-]+)","i"),M=M.replace(rt,"");return M.length===0}function St(I,M){var q;if(I.getElementById&&(q=I.getElementById(M)),q)return q;var Q,ut,rt,ct=I.getElementsByTagName("*");for(ut=0,rt=ct.length;ut<rt;ut++)if(Q=ct[ut],M===Q.getAttribute("id"))return Q}function xt(I){for(var M=pt(I,["use","svg:use"]),q=0;M.length&&q<M.length;){var Q=M[q],ut=Q.getAttribute("xlink:href")||Q.getAttribute("href");if(ut===null)return;var rt=ut.slice(1),ct=Q.getAttribute("x")||0,mt=Q.getAttribute("y")||0,F=St(I,rt).cloneNode(!0),k=(F.getAttribute("transform")||"")+" translate("+ct+", "+mt+")",L,U=M.length,X,Y,K,Z,ft=i.svgNS;if(H(F),/^svg$/i.test(F.nodeName)){var it=F.ownerDocument.createElementNS(ft,"g");for(Y=0,K=F.attributes,Z=K.length;Y<Z;Y++)X=K.item(Y),it.setAttributeNS(ft,X.nodeName,X.nodeValue);for(;F.firstChild;)it.appendChild(F.firstChild);F=it}for(Y=0,K=Q.attributes,Z=K.length;Y<Z;Y++)X=K.item(Y),!(X.nodeName==="x"||X.nodeName==="y"||X.nodeName==="xlink:href"||X.nodeName==="href")&&(X.nodeName==="transform"?k=X.nodeValue+" "+k:F.setAttribute(X.nodeName,X.nodeValue));F.setAttribute("transform",k),F.setAttribute("instantiated_by_use","1"),F.removeAttribute("id"),L=Q.parentNode,L.replaceChild(F,Q),M.length===U&&q++}}var D=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function H(I){if(!i.svgViewBoxElementsRegEx.test(I.nodeName))return{};var M=I.getAttribute("viewBox"),q=1,Q=1,ut=0,rt=0,ct,mt,F,k,L=I.getAttribute("width"),U=I.getAttribute("height"),X=I.getAttribute("x")||0,Y=I.getAttribute("y")||0,K=I.getAttribute("preserveAspectRatio")||"",Z=!M||!(M=M.match(D)),ft=!L||!U||L==="100%"||U==="100%",it=Z&&ft,J={},ht="",yt=0,at=0;if(J.width=0,J.height=0,J.toBeParsed=it,Z&&(X||Y)&&I.parentNode&&I.parentNode.nodeName!=="#document"&&(ht=" translate("+n(X)+" "+n(Y)+") ",F=(I.getAttribute("transform")||"")+ht,I.setAttribute("transform",F),I.removeAttribute("x"),I.removeAttribute("y")),it)return J;if(Z)return J.width=n(L),J.height=n(U),J;if(ut=-parseFloat(M[1]),rt=-parseFloat(M[2]),ct=parseFloat(M[3]),mt=parseFloat(M[4]),J.minX=ut,J.minY=rt,J.viewBoxWidth=ct,J.viewBoxHeight=mt,ft?(J.width=ct,J.height=mt):(J.width=n(L),J.height=n(U),q=J.width/ct,Q=J.height/mt),K=i.util.parsePreserveAspectRatioAttribute(K),K.alignX!=="none"&&(K.meetOrSlice==="meet"&&(Q=q=q>Q?Q:q),K.meetOrSlice==="slice"&&(Q=q=q>Q?q:Q),yt=J.width-ct*q,at=J.height-mt*q,K.alignX==="Mid"&&(yt/=2),K.alignY==="Mid"&&(at/=2),K.alignX==="Min"&&(yt=0),K.alignY==="Min"&&(at=0)),q===1&&Q===1&&ut===0&&rt===0&&X===0&&Y===0)return J;if((X||Y)&&I.parentNode.nodeName!=="#document"&&(ht=" translate("+n(X)+" "+n(Y)+") "),F=ht+" matrix("+q+" 0 0 "+Q+" "+(ut*q+yt)+" "+(rt*Q+at)+") ",I.nodeName==="svg"){for(k=I.ownerDocument.createElementNS(i.svgNS,"g");I.firstChild;)k.appendChild(I.firstChild);I.appendChild(k)}else k=I,k.removeAttribute("x"),k.removeAttribute("y"),F=k.getAttribute("transform")+F;return k.setAttribute("transform",F),J}function N(I,M){for(;I&&(I=I.parentNode);)if(I.nodeName&&M.test(I.nodeName.replace("svg:",""))&&!I.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(I,M,q,Q){if(I){xt(I);var ut=i.Object.__uid++,rt,ct,mt=H(I),F=i.util.toArray(I.getElementsByTagName("*"));if(mt.crossOrigin=Q&&Q.crossOrigin,mt.svgUid=ut,F.length===0&&i.isLikelyNode){F=I.selectNodes('//*[name(.)!="svg"]');var k=[];for(rt=0,ct=F.length;rt<ct;rt++)k[rt]=F[rt];F=k}var L=F.filter(function(X){return H(X),i.svgValidTagNamesRegEx.test(X.nodeName.replace("svg:",""))&&!N(X,i.svgInvalidAncestorsRegEx)});if(!L||L&&!L.length){M&&M([],{});return}var U={};F.filter(function(X){return X.nodeName.replace("svg:","")==="clipPath"}).forEach(function(X){var Y=X.getAttribute("id");U[Y]=i.util.toArray(X.getElementsByTagName("*")).filter(function(K){return i.svgValidTagNamesRegEx.test(K.nodeName.replace("svg:",""))})}),i.gradientDefs[ut]=i.getGradientDefs(I),i.cssRules[ut]=i.getCSSRules(I),i.clipPaths[ut]=U,i.parseElements(L,function(X,Y){M&&(M(X,mt,Y,F),delete i.gradientDefs[ut],delete i.cssRules[ut],delete i.clipPaths[ut])},u(mt),q,Q)}};function B(I,M){var q=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Q="xlink:href",ut=M.getAttribute(Q).slice(1),rt=St(I,ut);if(rt&&rt.getAttribute(Q)&&B(I,rt),q.forEach(function(mt){rt&&!M.hasAttribute(mt)&&rt.hasAttribute(mt)&&M.setAttribute(mt,rt.getAttribute(mt))}),!M.children.length)for(var ct=rt.cloneNode(!0);ct.firstChild;)M.appendChild(ct.firstChild);M.removeAttribute(Q)}var st=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");l(i,{parseFontDeclaration:function(I,M){var q=I.match(st);if(q){var Q=q[1],ut=q[3],rt=q[4],ct=q[5],mt=q[6];Q&&(M.fontStyle=Q),ut&&(M.fontWeight=isNaN(parseFloat(ut))?ut:parseFloat(ut)),rt&&(M.fontSize=n(rt)),mt&&(M.fontFamily=mt),ct&&(M.lineHeight=ct==="normal"?1:ct)}},getGradientDefs:function(I){var M=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],q=pt(I,M),Q,ut=0,rt={};for(ut=q.length;ut--;)Q=q[ut],Q.getAttribute("xlink:href")&&B(I,Q),rt[Q.getAttribute("id")]=Q;return rt},parseAttributes:function(I,M,q){if(I){var Q,ut={},rt,ct;typeof q>"u"&&(q=I.getAttribute("svgUid")),I.parentNode&&i.svgValidParentsRegEx.test(I.parentNode.nodeName)&&(ut=i.parseAttributes(I.parentNode,M,q));var mt=M.reduce(function(K,Z){return Q=I.getAttribute(Z),Q&&(K[Z]=Q),K},{}),F=l(vt(I,q),i.parseStyleAttribute(I));mt=l(mt,F),F[T]&&I.setAttribute(T,F[T]),rt=ct=ut.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,mt[_]&&(mt[_]=rt=n(mt[_],ct));var k,L,U={};for(var X in mt)k=A(X),L=v(k,mt[X],ut,rt),U[k]=L;U&&U.font&&i.parseFontDeclaration(U.font,U);var Y=l(ut,U);return i.svgValidParentsRegEx.test(I.nodeName)?Y:tt(Y)}},parseElements:function(I,M,q,Q,ut){new i.ElementsParser(I,M,q,Q,ut).parse()},parseStyleAttribute:function(I){var M={},q=I.getAttribute("style");return q&&(typeof q=="string"?_t(q,M):Tt(q,M)),M},parsePointsAttribute:function(I){if(!I)return null;I=I.replace(/,/g," ").trim(),I=I.split(/\s+/);var M=[],q,Q;for(q=0,Q=I.length;q<Q;q+=2)M.push({x:parseFloat(I[q]),y:parseFloat(I[q+1])});return M},getCSSRules:function(I){var M=I.getElementsByTagName("style"),q,Q,ut={},rt;for(q=0,Q=M.length;q<Q;q++){var ct=M[q].textContent;ct=ct.replace(/\/\*[\s\S]*?\*\//g,""),ct.trim()!==""&&(rt=ct.split("}"),rt=rt.filter(function(mt){return mt.trim()}),rt.forEach(function(mt){var F=mt.split("{"),k={},L=F[1].trim(),U=L.split(";").filter(function(Z){return Z.trim()});for(q=0,Q=U.length;q<Q;q++){var X=U[q].split(":"),Y=X[0].trim(),K=X[1].trim();k[Y]=K}mt=F[0].trim(),mt.split(",").forEach(function(Z){Z=Z.replace(/^svg/i,"").trim(),Z!==""&&(ut[Z]?i.util.object.extend(ut[Z],k):ut[Z]=i.util.object.clone(k))})}))}return ut},loadSVGFromURL:function(I,M,q,Q){I=I.replace(/^\n\s*/,"").trim(),new i.util.request(I,{method:"get",onComplete:ut});function ut(rt){var ct=rt.responseXML;if(!ct||!ct.documentElement)return M&&M(null),!1;i.parseSVGDocument(ct.documentElement,function(mt,F,k,L){M&&M(mt,F,k,L)},q,Q)}},loadSVGFromString:function(I,M,q,Q){var ut=new i.window.DOMParser,rt=ut.parseFromString(I.trim(),"text/xml");i.parseSVGDocument(rt.documentElement,function(ct,mt,F,k){M(ct,mt,F,k)},q,Q)}})}(f),r.ElementsParser=function(d,i,l,u,e,n){this.elements=d,this.callback=i,this.options=l,this.reviver=u,this.svgUid=l&&l.svgUid||0,this.parsingOptions=e,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=n},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var i=this;this.elements.forEach(function(l,u){l.setAttribute("svgUid",i.svgUid),i.createObject(l,u)})},d.findTag=function(i){return r[r.util.string.capitalize(i.tagName.replace("svg:",""))]},d.createObject=function(i,l){var u=this.findTag(i);if(u&&u.fromElement)try{u.fromElement(i,this.createCallback(l,i),this.options)}catch(e){r.log(e)}else this.checkIfDone()},d.createCallback=function(i,l){var u=this;return function(e){var n;u.resolveGradient(e,l,"fill"),u.resolveGradient(e,l,"stroke"),e instanceof r.Image&&e._originalElement&&(n=e.parsePreserveAspectRatioAttribute(l)),e._removeTransformMatrix(n),u.resolveClipPath(e,l),u.reviver&&u.reviver(l,e),u.instances[i]=e,u.checkIfDone()}},d.extractPropertyDefinition=function(i,l,u){var e=i[l],n=this.regexUrl;if(n.test(e)){n.lastIndex=0;var t=n.exec(e)[1];return n.lastIndex=0,r[u][this.svgUid][t]}},d.resolveGradient=function(i,l,u){var e=this.extractPropertyDefinition(i,u,"gradientDefs");if(e){var n=l.getAttribute(u+"-opacity"),t=r.Gradient.fromElement(e,i,n,this.options);i.set(u,t)}},d.createClipPathCallback=function(i,l){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,l.push(u)}},d.resolveClipPath=function(i,l){var u=this.extractPropertyDefinition(i,"clipPath","clipPaths"),e,n,t,o,c,s;if(u){o=[],t=r.util.invertTransform(i.calcTransformMatrix());for(var h=u[0].parentNode,p=l;p.parentNode&&p.getAttribute("clip-path")!==i.clipPath;)p=p.parentNode;p.parentNode.appendChild(h);for(var y=0;y<u.length;y++)e=u[y],n=this.findTag(e),n.fromElement(e,this.createClipPathCallback(i,o),this.options);o.length===1?u=o[0]:u=new r.Group(o),c=r.util.multiplyTransformMatrices(t,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,p);var s=r.util.qrDecompose(c);u.flipX=!1,u.flipY=!1,u.set("scaleX",s.scaleX),u.set("scaleY",s.scaleY),u.angle=s.angle,u.skewX=s.skewX,u.skewY=0,u.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),i.clipPath=u}else delete i.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(r.ElementsParser.prototype),function(d){var i=d.fabric||(d.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=l;function l(u,e){this.x=u,this.y=e}l.prototype={type:"point",constructor:l,add:function(u){return new l(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new l(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new l(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new l(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new l(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new l(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,e){return typeof e>"u"&&(e=.5),e=Math.max(Math.min(1,e),0),new l(this.x+(u.x-this.x)*e,this.y+(u.y-this.y)*e)},distanceFrom:function(u){var e=this.x-u.x,n=this.y-u.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new l(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new l(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,e){return this.x=u,this.y=e,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var e=this.x,n=this.y;this.x=u.x,this.y=u.y,u.x=e,u.y=n},clone:function(){return new l(this.x,this.y)}}}(f),function(d){var i=d.fabric||(d.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function l(u){this.status=u,this.points=[]}i.Intersection=l,i.Intersection.prototype={constructor:l,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},i.Intersection.intersectLineLine=function(u,e,n,t){var o,c=(t.x-n.x)*(u.y-n.y)-(t.y-n.y)*(u.x-n.x),s=(e.x-u.x)*(u.y-n.y)-(e.y-u.y)*(u.x-n.x),h=(t.y-n.y)*(e.x-u.x)-(t.x-n.x)*(e.y-u.y);if(h!==0){var p=c/h,y=s/h;0<=p&&p<=1&&0<=y&&y<=1?(o=new l("Intersection"),o.appendPoint(new i.Point(u.x+p*(e.x-u.x),u.y+p*(e.y-u.y)))):o=new l}else c===0||s===0?o=new l("Coincident"):o=new l("Parallel");return o},i.Intersection.intersectLinePolygon=function(u,e,n){var t=new l,o=n.length,c,s,h,p;for(p=0;p<o;p++)c=n[p],s=n[(p+1)%o],h=l.intersectLineLine(u,e,c,s),t.appendPoints(h.points);return t.points.length>0&&(t.status="Intersection"),t},i.Intersection.intersectPolygonPolygon=function(u,e){var n=new l,t=u.length,o;for(o=0;o<t;o++){var c=u[o],s=u[(o+1)%t],h=l.intersectLinePolygon(c,s,e);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(u,e,n){var t=e.min(n),o=e.max(n),c=new i.Point(o.x,t.y),s=new i.Point(t.x,o.y),h=l.intersectLinePolygon(t,c,u),p=l.intersectLinePolygon(c,o,u),y=l.intersectLinePolygon(o,s,u),_=l.intersectLinePolygon(s,t,u),T=new l;return T.appendPoints(h.points),T.appendPoints(p.points),T.appendPoints(y.points),T.appendPoints(_.points),T.points.length>0&&(T.status="Intersection"),T}}(f),function(d){var i=d.fabric||(d.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function l(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}i.Color=l,i.Color.prototype={_tryParsingColor:function(e){var n;e in l.colorNameMap&&(e=l.colorNameMap[e]),e==="transparent"&&(n=[255,255,255,0]),n||(n=l.sourceFromHex(e)),n||(n=l.sourceFromRgb(e)),n||(n=l.sourceFromHsl(e)),n||(n=[0,0,0,1]),n&&this.setSource(n)},_rgbToHsl:function(e,n,t){e/=255,n/=255,t/=255;var o,c,s,h=i.util.array.max([e,n,t]),p=i.util.array.min([e,n,t]);if(s=(h+p)/2,h===p)o=c=0;else{var y=h-p;switch(c=s>.5?y/(2-h-p):y/(h+p),h){case e:o=(n-t)/y+(n<t?6:0);break;case n:o=(t-e)/y+2;break;case t:o=(e-n)/y+4;break}o/=6}return[Math.round(o*360),Math.round(c*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+n[0]+","+n[1]+"%,"+n[2]+"%)"},toHsla:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+e[3]+")"},toHex:function(){var e=this.getSource(),n,t,o;return n=e[0].toString(16),n=n.length===1?"0"+n:n,t=e[1].toString(16),t=t.length===1?"0"+t:t,o=e[2].toString(16),o=o.length===1?"0"+o:o,n.toUpperCase()+t.toUpperCase()+o.toUpperCase()},toHexa:function(){var e=this.getSource(),n;return n=Math.round(e[3]*255),n=n.toString(16),n=n.length===1?"0"+n:n,this.toHex()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var n=this.getSource();return n[3]=e,this.setSource(n),this},toGrayscale:function(){var e=this.getSource(),n=parseInt((e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),10),t=e[3];return this.setSource([n,n,n,t]),this},toBlackWhite:function(e){var n=this.getSource(),t=(n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),o=n[3];return e=e||127,t=Number(t)<Number(e)?0:255,this.setSource([t,t,t,o]),this},overlayWith:function(e){e instanceof l||(e=new l(e));var n=[],t=this.getAlpha(),o=.5,c=this.getSource(),s=e.getSource(),h;for(h=0;h<3;h++)n.push(Math.round(c[h]*(1-o)+s[h]*o));return n[3]=t,this.setSource(n),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(e,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+(n-e)*6*t:t<1/2?n:t<2/3?e+(n-e)*(2/3-t)*6:e}i.Color.fromRgb=function(e){return l.fromSource(l.sourceFromRgb(e))},i.Color.sourceFromRgb=function(e){var n=e.match(l.reRGBa);if(n){var t=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),o=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),c=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(t,10),parseInt(o,10),parseInt(c,10),n[4]?parseFloat(n[4]):1]}},i.Color.fromRgba=l.fromRgb,i.Color.fromHsl=function(e){return l.fromSource(l.sourceFromHsl(e))},i.Color.sourceFromHsl=function(e){var n=e.match(l.reHSLa);if(n){var t=(parseFloat(n[1])%360+360)%360/360,o=parseFloat(n[2])/(/%$/.test(n[2])?100:1),c=parseFloat(n[3])/(/%$/.test(n[3])?100:1),s,h,p;if(o===0)s=h=p=c;else{var y=c<=.5?c*(o+1):c+o-c*o,_=c*2-y;s=u(_,y,t+1/3),h=u(_,y,t),p=u(_,y,t-1/3)}return[Math.round(s*255),Math.round(h*255),Math.round(p*255),n[4]?parseFloat(n[4]):1]}},i.Color.fromHsla=l.fromHsl,i.Color.fromHex=function(e){return l.fromSource(l.sourceFromHex(e))},i.Color.sourceFromHex=function(e){if(e.match(l.reHex)){var n=e.slice(e.indexOf("#")+1),t=n.length===3||n.length===4,o=n.length===8||n.length===4,c=t?n.charAt(0)+n.charAt(0):n.substring(0,2),s=t?n.charAt(1)+n.charAt(1):n.substring(2,4),h=t?n.charAt(2)+n.charAt(2):n.substring(4,6),p=o?t?n.charAt(3)+n.charAt(3):n.substring(6,8):"FF";return[parseInt(c,16),parseInt(s,16),parseInt(h,16),parseFloat((parseInt(p,16)/255).toFixed(2))]}},i.Color.fromSource=function(e){var n=new l;return n.setSource(e),n}}(f),function(d){var i=d.fabric||(d.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],e={},n="left",t="top",o="right",c="bottom",s="center",h={top:c,bottom:t,left:o,right:n,center:s},p=i.util.radiansToDegrees,y=Math.sign||function(k){return(k>0)-(k<0)||+k};function _(k,L){var U=k.angle+p(Math.atan2(L.y,L.x))+360;return Math.round(U%360/45)}function T(k,L){var U=L.transform.target,X=U.canvas,Y=i.util.object.clone(L);Y.target=U,X&&X.fire("object:"+k,Y),U.fire(k,L)}function A(k,L){var U=L.canvas,X=U.uniScaleKey,Y=k[X];return U.uniformScaling&&!Y||!U.uniformScaling&&Y}function v(k){return k.originX===s&&k.originY===s}function V(k,L,U){var X=k.lockScalingX,Y=k.lockScalingY;return!!(X&&Y||!L&&(X||Y)&&U||X&&L==="x"||Y&&L==="y")}function tt(k,L,U){var X="not-allowed",Y=A(k,U),K="";if(L.x!==0&&L.y===0?K="x":L.x===0&&L.y!==0&&(K="y"),V(U,K,Y))return X;var Z=_(U,L);return l[Z]+"-resize"}function pt(k,L,U){var X="not-allowed";if(L.x!==0&&U.lockSkewingY||L.y!==0&&U.lockSkewingX)return X;var Y=_(U,L)%4;return u[Y]+"-resize"}function _t(k,L,U){return k[U.canvas.altActionKey]?e.skewCursorStyleHandler(k,L,U):e.scaleCursorStyleHandler(k,L,U)}function Tt(k,L,U){var X=k[U.canvas.altActionKey];if(L.x===0)return X?"skewX":"scaleY";if(L.y===0)return X?"skewY":"scaleX"}function vt(k,L,U){return U.lockRotation?"not-allowed":L.cursorStyle}function bt(k,L,U,X){return{e:k,transform:L,pointer:{x:U,y:X}}}function wt(k){return function(L,U,X,Y){var K=U.target,Z=K.getCenterPoint(),ft=K.translateToOriginPoint(Z,U.originX,U.originY),it=k(L,U,X,Y);return K.setPositionByOrigin(ft,U.originX,U.originY),it}}function Et(k,L){return function(U,X,Y,K){var Z=L(U,X,Y,K);return Z&&T(k,bt(U,X,Y,K)),Z}}function St(k,L,U,X,Y){var K=k.target,Z=K.controls[k.corner],ft=K.canvas.getZoom(),it=K.padding/ft,J=K.toLocalPoint(new i.Point(X,Y),L,U);return J.x>=it&&(J.x-=it),J.x<=-it&&(J.x+=it),J.y>=it&&(J.y-=it),J.y<=it&&(J.y+=it),J.x-=Z.offsetX,J.y-=Z.offsetY,J}function xt(k){return k.flipX!==k.flipY}function D(k,L,U,X,Y){if(k[L]!==0){var K=k._getTransformedDimensions()[X],Z=Y/K*k[U];k.set(U,Z)}}function H(k,L,U,X){var Y=L.target,K=Y._getTransformedDimensions(0,Y.skewY),Z=St(L,L.originX,L.originY,U,X),ft=Math.abs(Z.x*2)-K.x,it=Y.skewX,J;ft<2?J=0:(J=p(Math.atan2(ft/Y.scaleX,K.y/Y.scaleY)),L.originX===n&&L.originY===c&&(J=-J),L.originX===o&&L.originY===t&&(J=-J),xt(Y)&&(J=-J));var ht=it!==J;if(ht){var yt=Y._getTransformedDimensions().y;Y.set("skewX",J),D(Y,"skewY","scaleY","y",yt)}return ht}function N(k,L,U,X){var Y=L.target,K=Y._getTransformedDimensions(Y.skewX,0),Z=St(L,L.originX,L.originY,U,X),ft=Math.abs(Z.y*2)-K.y,it=Y.skewY,J;ft<2?J=0:(J=p(Math.atan2(ft/Y.scaleY,K.x/Y.scaleX)),L.originX===n&&L.originY===c&&(J=-J),L.originX===o&&L.originY===t&&(J=-J),xt(Y)&&(J=-J));var ht=it!==J;if(ht){var yt=Y._getTransformedDimensions().x;Y.set("skewY",J),D(Y,"skewX","scaleX","x",yt)}return ht}function B(k,L,U,X){var Y=L.target,K=Y.skewX,Z,ft=L.originY;if(Y.lockSkewingX)return!1;if(K===0){var it=St(L,s,s,U,X);it.x>0?Z=n:Z=o}else K>0&&(Z=ft===t?n:o),K<0&&(Z=ft===t?o:n),xt(Y)&&(Z=Z===n?o:n);L.originX=Z;var J=Et("skewing",wt(H));return J(k,L,U,X)}function st(k,L,U,X){var Y=L.target,K=Y.skewY,Z,ft=L.originX;if(Y.lockSkewingY)return!1;if(K===0){var it=St(L,s,s,U,X);it.y>0?Z=t:Z=c}else K>0&&(Z=ft===n?t:c),K<0&&(Z=ft===n?c:t),xt(Y)&&(Z=Z===t?c:t);L.originY=Z;var J=Et("skewing",wt(N));return J(k,L,U,X)}function I(k,L,U,X){var Y=L,K=Y.target,Z=K.translateToOriginPoint(K.getCenterPoint(),Y.originX,Y.originY);if(K.lockRotation)return!1;var ft=Math.atan2(Y.ey-Z.y,Y.ex-Z.x),it=Math.atan2(X-Z.y,U-Z.x),J=p(it-ft+Y.theta),ht=!0;if(K.snapAngle>0){var yt=K.snapAngle,at=K.snapThreshold||yt,Pt=Math.ceil(J/yt)*yt,Mt=Math.floor(J/yt)*yt;Math.abs(J-Mt)<at?J=Mt:Math.abs(J-Pt)<at&&(J=Pt)}return J<0&&(J=360+J),J%=360,ht=K.angle!==J,K.angle=J,ht}function M(k,L,U,X,Y){Y=Y||{};var K=L.target,Z=K.lockScalingX,ft=K.lockScalingY,it=Y.by,J,ht,yt,at,Pt=A(k,K),Mt=V(K,it,Pt),jt,Bt,Qt=L.gestureScale;if(Mt)return!1;if(Qt)ht=L.scaleX*Qt,yt=L.scaleY*Qt;else{if(J=St(L,L.originX,L.originY,U,X),jt=it!=="y"?y(J.x):1,Bt=it!=="x"?y(J.y):1,L.signX||(L.signX=jt),L.signY||(L.signY=Bt),K.lockScalingFlip&&(L.signX!==jt||L.signY!==Bt))return!1;if(at=K._getTransformedDimensions(),Pt&&!it){var fe=Math.abs(J.x)+Math.abs(J.y),ie=L.original,se=Math.abs(at.x*ie.scaleX/K.scaleX)+Math.abs(at.y*ie.scaleY/K.scaleY),be=fe/se;ht=ie.scaleX*be,yt=ie.scaleY*be}else ht=Math.abs(J.x*K.scaleX/at.x),yt=Math.abs(J.y*K.scaleY/at.y);v(L)&&(ht*=2,yt*=2),L.signX!==jt&&it!=="y"&&(L.originX=h[L.originX],ht*=-1,L.signX=jt),L.signY!==Bt&&it!=="x"&&(L.originY=h[L.originY],yt*=-1,L.signY=Bt)}var Zt=K.scaleX,pe=K.scaleY;return it?(it==="x"&&K.set("scaleX",ht),it==="y"&&K.set("scaleY",yt)):(!Z&&K.set("scaleX",ht),!ft&&K.set("scaleY",yt)),Zt!==K.scaleX||pe!==K.scaleY}function q(k,L,U,X){return M(k,L,U,X)}function Q(k,L,U,X){return M(k,L,U,X,{by:"x"})}function ut(k,L,U,X){return M(k,L,U,X,{by:"y"})}function rt(k,L,U,X){return k[L.target.canvas.altActionKey]?e.skewHandlerX(k,L,U,X):e.scalingY(k,L,U,X)}function ct(k,L,U,X){return k[L.target.canvas.altActionKey]?e.skewHandlerY(k,L,U,X):e.scalingX(k,L,U,X)}function mt(k,L,U,X){var Y=L.target,K=St(L,L.originX,L.originY,U,X),Z=Y.strokeWidth/(Y.strokeUniform?Y.scaleX:1),ft=v(L)?2:1,it=Y.width,J=Math.abs(K.x*ft/Y.scaleX)-Z;return Y.set("width",Math.max(J,0)),it!==J}function F(k,L,U,X){var Y=L.target,K=U-L.offsetX,Z=X-L.offsetY,ft=!Y.get("lockMovementX")&&Y.left!==K,it=!Y.get("lockMovementY")&&Y.top!==Z;return ft&&Y.set("left",K),it&&Y.set("top",Z),(ft||it)&&T("moving",bt(k,L,U,X)),ft||it}e.scaleCursorStyleHandler=tt,e.skewCursorStyleHandler=pt,e.scaleSkewCursorStyleHandler=_t,e.rotationWithSnapping=Et("rotating",wt(I)),e.scalingEqually=Et("scaling",wt(q)),e.scalingX=Et("scaling",wt(Q)),e.scalingY=Et("scaling",wt(ut)),e.scalingYOrSkewingX=rt,e.scalingXOrSkewingY=ct,e.changeWidth=Et("resizing",wt(mt)),e.skewHandlerX=B,e.skewHandlerY=st,e.dragHandler=F,e.scaleOrSkewActionName=Tt,e.rotationStyleHandler=vt,e.fireEvent=T,e.wrapWithFixedAnchor=wt,e.wrapWithFireEvent=Et,e.getLocalPoint=St,i.controlsUtils=e}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.degreesToRadians,u=i.controlsUtils;function e(t,o,c,s,h){s=s||{};var p=this.sizeX||s.cornerSize||h.cornerSize,y=this.sizeY||s.cornerSize||h.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:h.transparentCorners,T=_?"stroke":"fill",A=!_&&(s.cornerStrokeColor||h.cornerStrokeColor),v=o,V=c,tt;t.save(),t.fillStyle=s.cornerColor||h.cornerColor,t.strokeStyle=s.cornerStrokeColor||h.cornerStrokeColor,p>y?(tt=p,t.scale(1,y/p),V=c*p/y):y>p?(tt=y,t.scale(p/y,1),v=o*y/p):tt=p,t.lineWidth=1,t.beginPath(),t.arc(v,V,tt/2,0,2*Math.PI,!1),t[T](),A&&t.stroke(),t.restore()}function n(t,o,c,s,h){s=s||{};var p=this.sizeX||s.cornerSize||h.cornerSize,y=this.sizeY||s.cornerSize||h.cornerSize,_=typeof s.transparentCorners<"u"?s.transparentCorners:h.transparentCorners,T=_?"stroke":"fill",A=!_&&(s.cornerStrokeColor||h.cornerStrokeColor),v=p/2,V=y/2;t.save(),t.fillStyle=s.cornerColor||h.cornerColor,t.strokeStyle=s.cornerStrokeColor||h.cornerStrokeColor,t.lineWidth=1,t.translate(o,c),t.rotate(l(h.angle)),t[T+"Rect"](-v,-V,p,y),A&&t.strokeRect(-v,-V,p,y),t.restore()}u.renderCircleControl=e,u.renderSquareControl=n}(f),function(d){var i=d.fabric||(d.fabric={});function l(u){for(var e in u)this[e]=u[e]}i.Control=l,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,e){return e.cursorStyle},getActionName:function(u,e){return e.actionName},getVisibility:function(u,e){var n=u._controlsVisibility;return n&&typeof n[e]<"u"?n[e]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,e){var n=i.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},e);return n},calcCornerCoords:function(u,e,n,t,o){var c,s,h,p,y=o?this.touchSizeX:this.sizeX,_=o?this.touchSizeY:this.sizeY;if(y&&_&&y!==_){var T=Math.atan2(_,y),A=Math.sqrt(y*y+_*_)/2,v=T-i.util.degreesToRadians(u),V=Math.PI/2-T-i.util.degreesToRadians(u);c=A*i.util.cos(v),s=A*i.util.sin(v),h=A*i.util.cos(V),p=A*i.util.sin(V)}else{var tt=y&&_?y:e;A=tt*.7071067812;var v=i.util.degreesToRadians(45-u);c=h=A*i.util.cos(v),s=p=A*i.util.sin(v)}return{tl:{x:n-p,y:t-h},tr:{x:n+c,y:t-s},bl:{x:n-c,y:t+s},br:{x:n+p,y:t+h}}},render:function(u,e,n,t,o){switch(t=t||{},t.cornerStyle||o.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,u,e,n,t,o);break;default:i.controlsUtils.renderSquareControl.call(this,u,e,n,t,o)}}}}(f),function(){function d(n,t){var o=n.getAttribute("style"),c=n.getAttribute("offset")||0,s,h,p,y;if(c=parseFloat(c)/(/%$/.test(c)?100:1),c=c<0?0:c>1?1:c,o){var _=o.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),y=_.length;y--;){var T=_[y].split(/\s*:\s*/),A=T[0].trim(),v=T[1].trim();A==="stop-color"?s=v:A==="stop-opacity"&&(p=v)}}return s||(s=n.getAttribute("stop-color")||"rgb(0,0,0)"),p||(p=n.getAttribute("stop-opacity")),s=new r.Color(s),h=s.getAlpha(),p=isNaN(parseFloat(p))?1:parseFloat(p),p*=h*t,{offset:c,color:s.toRgb(),opacity:p}}function i(n){return{x1:n.getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}}function l(n){return{x1:n.getAttribute("fx")||n.getAttribute("cx")||"50%",y1:n.getAttribute("fy")||n.getAttribute("cy")||"50%",r1:0,x2:n.getAttribute("cx")||"50%",y2:n.getAttribute("cy")||"50%",r2:n.getAttribute("r")||"50%"}}var u=r.util.object.clone;r.Gradient=r.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(n){n||(n={}),n.coords||(n.coords={});var t,o=this;Object.keys(n).forEach(function(c){o[c]=n[c]}),this.id?this.id+="_"+r.Object.__uid++:this.id=r.Object.__uid++,t={x1:n.coords.x1||0,y1:n.coords.y1||0,x2:n.coords.x2||0,y2:n.coords.y2||0},this.type==="radial"&&(t.r1=n.coords.r1||0,t.r2=n.coords.r2||0),this.coords=t,this.colorStops=n.colorStops.slice()},addColorStop:function(n){for(var t in n){var o=new r.Color(n[t]);this.colorStops.push({offset:parseFloat(t),color:o.toRgb(),opacity:o.getAlpha()})}return this},toObject:function(n){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return r.util.populateWithProperties(this,t,n),t},toSVG:function(n,h){var o=u(this.coords,!0),c,s,h=h||{},p,y,_=u(this.colorStops,!0),T=o.r1>o.r2,A=this.gradientTransform?this.gradientTransform.concat():r.iMatrix.concat(),v=-this.offsetX,V=-this.offsetY,tt=!!h.additionalTransform,pt=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(wt,Et){return wt.offset-Et.offset}),pt==="objectBoundingBox"?(v/=n.width,V/=n.height):(v+=n.width/2,V+=n.height/2),n.type==="path"&&this.gradientUnits!=="percentage"&&(v-=n.pathOffset.x,V-=n.pathOffset.y),A[4]-=v,A[5]-=V,y='id="SVGID_'+this.id+'" gradientUnits="'+pt+'"',y+=' gradientTransform="'+(tt?h.additionalTransform+" ":"")+r.util.matrixToSVG(A)+'" ',this.type==="linear"?p=["<linearGradient ",y,' x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`">
`]:this.type==="radial"&&(p=["<radialGradient ",y,' cx="',T?o.x1:o.x2,'" cy="',T?o.y1:o.y2,'" r="',T?o.r1:o.r2,'" fx="',T?o.x2:o.x1,'" fy="',T?o.y2:o.y1,`">
`]),this.type==="radial"){if(T)for(_=_.concat(),_.reverse(),c=0,s=_.length;c<s;c++)_[c].offset=1-_[c].offset;var _t=Math.min(o.r1,o.r2);if(_t>0){var Tt=Math.max(o.r1,o.r2),vt=_t/Tt;for(c=0,s=_.length;c<s;c++)_[c].offset+=vt*(1-_[c].offset)}}for(c=0,s=_.length;c<s;c++){var bt=_[c];p.push("<stop ",'offset="',bt.offset*100+"%",'" style="stop-color:',bt.color,typeof bt.opacity<"u"?";stop-opacity: "+bt.opacity:";",`"/>
`)}return p.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),p.join("")},toLive:function(n){var t,o=r.util.object.clone(this.coords),c,s;if(this.type){for(this.type==="linear"?t=n.createLinearGradient(o.x1,o.y1,o.x2,o.y2):this.type==="radial"&&(t=n.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),c=0,s=this.colorStops.length;c<s;c++){var h=this.colorStops[c].color,p=this.colorStops[c].opacity,y=this.colorStops[c].offset;typeof p<"u"&&(h=new r.Color(h).setAlpha(p).toRgba()),t.addColorStop(y,h)}return t}}}),r.util.object.extend(r.Gradient,{fromElement:function(n,t,o,c){var s=parseFloat(o)/(/%$/.test(o)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var h=n.getElementsByTagName("stop"),p,y=n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=n.getAttribute("gradientTransform")||"",T=[],A,v,V=0,tt=0,pt;for(n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?(p="linear",A=i(n)):(p="radial",A=l(n)),v=h.length;v--;)T.push(d(h[v],s));pt=r.parseTransformAttribute(_),e(t,A,c,y),y==="pixels"&&(V=-t.left,tt=-t.top);var _t=new r.Gradient({id:n.getAttribute("id"),type:p,coords:A,colorStops:T,gradientUnits:y,gradientTransform:pt,offsetX:V,offsetY:tt});return _t}});function e(n,t,o,c){var s,h;Object.keys(t).forEach(function(p){s=t[p],s==="Infinity"?h=1:s==="-Infinity"?h=0:(h=parseFloat(t[p],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(h*=.01,c==="pixels"&&((p==="x1"||p==="x2"||p==="r2")&&(h*=o.viewBoxWidth||o.width),(p==="y1"||p==="y2")&&(h*=o.viewBoxHeight||o.height)))),t[p]=h})}}(),function(){var d=r.util.toFixed;r.Pattern=r.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,l){if(i||(i={}),this.id=r.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){l&&l(this);return}else{var u=this;this.source=r.util.createImage(),r.util.loadImage(i.source,function(e,n){u.source=e,l&&l(u,n)},null,this.crossOrigin)}},toObject:function(i){var l=r.Object.NUM_FRACTION_DIGITS,u,e;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),e={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,l),offsetY:d(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},r.util.populateWithProperties(this,e,i),e},toSVG:function(i){var l=typeof this.source=="function"?this.source():this.source,u=l.width/i.width,e=l.height/i.height,n=this.offsetX/i.width,t=this.offsetY/i.height,o="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(e=1,t&&(e+=Math.abs(t))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,n&&(u+=Math.abs(n))),l.src?o=l.src:l.toDataURL&&(o=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+t+'" width="'+u+'" height="'+e+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+o+`"></image>
</pattern>
`},setOptions:function(i){for(var l in i)this[l]=i[l]},toLive:function(i){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":i.createPattern(l,this.repeat)}})}(),function(d){var i=d.fabric||(d.fabric={}),l=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var e in u)this[e]=u[e];this.id=i.Object.__uid++},_parseShadow:function(u){var e=u.trim(),n=i.Shadow.reOffsetsAndBlur.exec(e)||[],t=e.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:t.trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var e=40,n=40,t=i.Object.NUM_FRACTION_DIGITS,o=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-u.angle)),c=20,s=new i.Color(this.color);return u.width&&u.height&&(e=l((Math.abs(o.x)+this.blur)/u.width,t)*100+c,n=l((Math.abs(o.y)+this.blur)/u.height,t)*100+c),u.flipX&&(o.x*=-1),u.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+e+'%" width="'+(100+2*e)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,t)+`"></feGaussianBlur>
	<feOffset dx="`+l(o.x,t)+'" dy="'+l(o.y,t)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},e=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(n){this[n]!==e[n]&&(u[n]=this[n])},this),u}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(f),function(){if(r.StaticCanvas){r.warn("fabric.StaticCanvas is already defined.");return}var d=r.util.object.extend,i=r.util.getElementOffset,l=r.util.removeFromArray,u=r.util.toFixed,e=r.util.transformPoint,n=r.util.invertTransform,t=r.util.getNodeCanvas,o=r.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");r.StaticCanvas=r.util.createClass(r.CommonMethods,{initialize:function(s,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,h)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:r.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,h){var p=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(h),this.interactive||this._initRetinaScaling(),h.overlayImage&&this.setOverlayImage(h.overlayImage,p),h.backgroundImage&&this.setBackgroundImage(h.backgroundImage,p),h.backgroundColor&&this.setBackgroundColor(h.backgroundColor,p),h.overlayColor&&this.setOverlayColor(h.overlayColor,p),this.calcOffset()},_isRetinaScaling:function(){return r.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,r.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var s=r.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,h,p){h.setAttribute("width",this.width*s),h.setAttribute("height",this.height*s),p.scale(s,s)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(s,h,p){return this.__setBgOverlayImage("overlayImage",s,h,p)},setBackgroundImage:function(s,h,p){return this.__setBgOverlayImage("backgroundImage",s,h,p)},setOverlayColor:function(s,h){return this.__setBgOverlayColor("overlayColor",s,h)},setBackgroundColor:function(s,h){return this.__setBgOverlayColor("backgroundColor",s,h)},__setBgOverlayImage:function(s,h,p,y){return typeof h=="string"?r.util.loadImage(h,function(_,T){if(_){var A=new r.Image(_,y);this[s]=A,A.canvas=this}p&&p(_,T)},this,y&&y.crossOrigin):(y&&h.setOptions(y),this[s]=h,h&&(h.canvas=this),p&&p(h,!1)),this},__setBgOverlayColor:function(s,h,p){return this[s]=h,this._initGradient(h,s),this._initPattern(h,s,p),this},_createCanvasElement:function(){var s=o();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw c;return s},_initOptions:function(s){var h=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(h.width,10)||0,this.height=this.height||parseInt(h.height,10)||0,this.lowerCanvasEl.style&&(h.width=this.width,h.height=this.height,h.style.width=this.width+"px",h.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=r.util.getById(s)||this._createCanvasElement(),r.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,h){return this.setDimensions({width:s},h)},setHeight:function(s,h){return this.setDimensions({height:s},h)},setDimensions:function(s,h){var p;h=h||{};for(var y in s)p=s[y],h.cssOnly||(this._setBackstoreDimension(y,s[y]),p+="px",this.hasLostContext=!0),h.backstoreOnly||this._setCssDimension(y,p);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),h.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,h){return this.lowerCanvasEl[s]=h,this.upperCanvasEl&&(this.upperCanvasEl[s]=h),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=h),this[s]=h,this},_setCssDimension:function(s,h){return this.lowerCanvasEl.style[s]=h,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=h),this.wrapperEl&&(this.wrapperEl.style[s]=h),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var h=this._activeObject,p=this.backgroundImage,y=this.overlayImage,_,T,A;for(this.viewportTransform=s,T=0,A=this._objects.length;T<A;T++)_=this._objects[T],_.group||_.setCoords(!0);return h&&h.setCoords(),p&&p.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,h){var p=s,y=this.viewportTransform.slice(0);s=e(s,n(this.viewportTransform)),y[0]=h,y[3]=h;var _=e(s,y);return y[4]+=p.x-_.x,y[5]+=p.y-_.y,this.setViewportTransform(y)},setZoom:function(s){return this.zoomToPoint(new r.Point(0,0),s),this},absolutePan:function(s){var h=this.viewportTransform.slice(0);return h[4]=-s.x,h[5]=-s.y,this.setViewportTransform(h)},relativePan:function(s){return this.absolutePan(new r.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=r.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},h=this.width,p=this.height,y=n(this.viewportTransform);return s.tl=e({x:0,y:0},y),s.br=e({x:h,y:p},y),s.tr=new r.Point(s.br.x,s.tl.y),s.bl=new r.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,h){var p=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),r.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._renderObjects(s,h),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var h=this.viewportTransform,p=this.clipPath;s.save(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.globalCompositeOperation="destination-in",p.transform(s),s.scale(1/p.zoomX,1/p.zoomY),s.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),s.restore()},_renderObjects:function(s,h){var p,y;for(p=0,y=h.length;p<y;++p)h[p]&&h[p].render(s)},_renderBackgroundOrOverlay:function(s,h){var p=this[h+"Color"],y=this[h+"Image"],_=this.viewportTransform,T=this[h+"Vpt"];if(!(!p&&!y)){if(p){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=p.toLive?p.toLive(s,this):p,T&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),s.transform(1,0,0,1,p.offsetX||0,p.offsetY||0);var A=p.gradientTransform||p.patternTransform;A&&s.transform(A[0],A[1],A[2],A[3],A[4],A[5]),s.fill(),s.restore()}y&&(s.save(),T&&s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),y.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new r.Point(this.width/2,this.height/2)},centerObjectH:function(s){return this._centerObject(s,new r.Point(this.getCenterPoint().x,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new r.Point(s.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(s){var h=this.getCenterPoint();return this._centerObject(s,h)},viewportCenterObject:function(s){var h=this.getVpCenter();return this._centerObject(s,h)},viewportCenterObjectH:function(s){var h=this.getVpCenter();return this._centerObject(s,new r.Point(h.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var h=this.getVpCenter();return this._centerObject(s,new r.Point(s.getCenterPoint().x,h.y))},getVpCenter:function(){var s=this.getCenterPoint(),h=n(this.viewportTransform);return e(s,h)},_centerObject:function(s,h){return s.setPositionByOrigin(h,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,h){var p=this.clipPath,y={version:r.version,objects:this._toObjects(s,h)};return p&&!p.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,s,h)),d(y,this.__serializeBgOverlay(s,h)),r.util.populateWithProperties(this,y,h),y},_toObjects:function(s,h){return this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){return this._toObject(p,s,h)},this)},_toObject:function(s,h,p){var y;this.includeDefaultValues||(y=s.includeDefaultValues,s.includeDefaultValues=!1);var _=s[h](p);return this.includeDefaultValues||(s.includeDefaultValues=y),_},__serializeBgOverlay:function(s,h){var p={},y=this.backgroundImage,_=this.overlayImage,T=this.backgroundColor,A=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(p.background=T.toObject(h)):T&&(p.background=T),A&&A.toObject?A.excludeFromExport||(p.overlay=A.toObject(h)):A&&(p.overlay=A),y&&!y.excludeFromExport&&(p.backgroundImage=this._toObject(y,s,h)),_&&!_.excludeFromExport&&(p.overlayImage=this._toObject(_,s,h)),p},svgViewportTransformation:!0,toSVG:function(s,h){s||(s={}),s.reviver=h;var p=[];return this._setSVGPreamble(p,s),this._setSVGHeader(p,s),this.clipPath&&p.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(p,"background"),this._setSVGBgOverlayImage(p,"backgroundImage",h),this._setSVGObjects(p,h),this.clipPath&&p.push(`</g>
`),this._setSVGBgOverlayColor(p,"overlay"),this._setSVGBgOverlayImage(p,"overlayImage",h),p.push("</svg>"),p.join("")},_setSVGPreamble:function(s,h){h.suppressPreamble||s.push('<?xml version="1.0" encoding="',h.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,h){var p=h.width||this.width,y=h.height||this.height,_,T='viewBox="0 0 '+this.width+" "+this.height+'" ',A=r.Object.NUM_FRACTION_DIGITS;h.viewBox?T='viewBox="'+h.viewBox.x+" "+h.viewBox.y+" "+h.viewBox.width+" "+h.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,T='viewBox="'+u(-_[4]/_[0],A)+" "+u(-_[5]/_[3],A)+" "+u(this.width/_[0],A)+" "+u(this.height/_[3],A)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',p,'" ','height="',y,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",r.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(h),`</defs>
`)},createSVGClipPathMarkup:function(s){var h=this.clipPath;return h?(h.clipPathId="CLIPPATH_"+r.Object.__uid++,'<clipPath id="'+h.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,h=["background","overlay"].map(function(p){var y=s[p+"Color"];if(y&&y.toLive){var _=s[p+"Vpt"],T=s.viewportTransform,A={width:s.width/(_?T[0]:1),height:s.height/(_?T[3]:1)};return y.toSVG(A,{additionalTransform:_?r.util.matrixToSVG(T):""})}});return h.join("")},createSVGFontFacesMarkup:function(){var s="",h={},p,y,_,T,A,v,V,tt,pt,_t=r.fontPaths,Tt=[];for(this._objects.forEach(function bt(wt){Tt.push(wt),wt._objects&&wt._objects.forEach(bt)}),tt=0,pt=Tt.length;tt<pt;tt++)if(p=Tt[tt],y=p.fontFamily,!(p.type.indexOf("text")===-1||h[y]||!_t[y])&&(h[y]=!0,!!p.styles)){_=p.styles;for(A in _){T=_[A];for(V in T)v=T[V],y=v.fontFamily,!h[y]&&_t[y]&&(h[y]=!0)}}for(var vt in h)s+=[`		@font-face {
`,"			font-family: '",vt,`';
`,"			src: url('",_t[vt],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,h){var p,y,_,T=this._objects;for(y=0,_=T.length;y<_;y++)p=T[y],!p.excludeFromExport&&this._setSVGObject(s,p,h)},_setSVGObject:function(s,h,p){s.push(h.toSVG(p))},_setSVGBgOverlayImage:function(s,h,p){this[h]&&!this[h].excludeFromExport&&this[h].toSVG&&s.push(this[h].toSVG(p))},_setSVGBgOverlayColor:function(s,h){var p=this[h+"Color"],y=this.viewportTransform,_=this.width,T=this.height;if(p)if(p.toLive){var A=p.repeat,v=r.util.invertTransform(y),V=this[h+"Vpt"],tt=V?r.util.matrixToSVG(v):"";s.push('<rect transform="'+tt+" translate(",_/2,",",T/2,')"',' x="',p.offsetX-_/2,'" y="',p.offsetY-T/2,'" ','width="',A==="repeat-y"||A==="no-repeat"?p.source.width:_,'" height="',A==="repeat-x"||A==="no-repeat"?p.source.height:T,'" fill="url(#SVGID_'+p.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',p,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var h=this._activeObject,p,y,_;if(s===h&&s.type==="activeSelection")for(_=h._objects,p=_.length;p--;)y=_[p],l(this._objects,y),this._objects.unshift(y);else l(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var h=this._activeObject,p,y,_;if(s===h&&s.type==="activeSelection")for(_=h._objects,p=0;p<_.length;p++)y=_[p],l(this._objects,y),this._objects.push(y);else l(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,h){if(!s)return this;var p=this._activeObject,y,_,T,A,v,V=0;if(s===p&&s.type==="activeSelection")for(v=p._objects,y=0;y<v.length;y++)_=v[y],T=this._objects.indexOf(_),T>0+V&&(A=T-1,l(this._objects,_),this._objects.splice(A,0,_)),V++;else T=this._objects.indexOf(s),T!==0&&(A=this._findNewLowerIndex(s,T,h),l(this._objects,s),this._objects.splice(A,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,h,p){var y,_;if(p)for(y=h,_=h-1;_>=0;--_){var T=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(T){y=_;break}}else y=h-1;return y},bringForward:function(s,h){if(!s)return this;var p=this._activeObject,y,_,T,A,v,V=0;if(s===p&&s.type==="activeSelection")for(v=p._objects,y=v.length;y--;)_=v[y],T=this._objects.indexOf(_),T<this._objects.length-1-V&&(A=T+1,l(this._objects,_),this._objects.splice(A,0,_)),V++;else T=this._objects.indexOf(s),T!==this._objects.length-1&&(A=this._findNewUpperIndex(s,T,h),l(this._objects,s),this._objects.splice(A,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,h,p){var y,_,T;if(p)for(y=h,_=h+1,T=this._objects.length;_<T;++_){var A=s.intersectsWithObject(this._objects[_])||s.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(s);if(A){y=_;break}}else y=h+1;return y},moveTo:function(s,h){return l(this._objects,s),this._objects.splice(h,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),r.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),r.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(r.StaticCanvas.prototype,r.Observable),d(r.StaticCanvas.prototype,r.Collection),d(r.StaticCanvas.prototype,r.DataURLExporter),d(r.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var h=o();if(!h||!h.getContext)return null;var p=h.getContext("2d");if(!p)return null;switch(s){case"setLineDash":return typeof p.setLineDash<"u";default:return null}}}),r.StaticCanvas.prototype.toJSON=r.StaticCanvas.prototype.toObject,r.isLikelyNode&&(r.StaticCanvas.prototype.createPNGStream=function(){var s=t(this.lowerCanvasEl);return s&&s.createPNGStream()},r.StaticCanvas.prototype.createJPEGStream=function(s){var h=t(this.lowerCanvasEl);return h&&h.createJPEGStream(s)})}(),r.BaseBrush=r.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(d){d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var i=this.canvas.viewportTransform;d.save(),d.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,i=this.shadow,l=d.contextTop,u=d.getZoom();d&&d._isRetinaScaling()&&(u*=r.devicePixelRatio),l.shadowColor=i.color,l.shadowBlur=i.blur*u,l.shadowOffsetX=i.offsetX*u,l.shadowOffsetY=i.offsetY*u}},needsFullRender:function(){var d=new r.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){r.PencilBrush=r.util.createClass(r.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(d){this.canvas=d,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(d,i,l){var u=i.midPointFrom(l);return d.quadraticCurveTo(i.x,i.y,u.x,u.y),u},onMouseDown:function(d,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,u=l.length,e=this.canvas.contextTop;this._saveAndTransform(e),this.oldEnd&&(e.beginPath(),e.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(e,l[u-2],l[u-1],!0),e.stroke(),e.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var i=new r.Point(d.x,d.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(d){var i=new r.Point(d.x,d.y);return this._addPoint(i)},_render:function(d){var i,l,u=this._points[0],e=this._points[1];if(d=d||this.canvas.contextTop,this._saveAndTransform(d),d.beginPath(),this._points.length===2&&u.x===e.x&&u.y===e.y){var n=this.width/1e3;u=new r.Point(u.x,u.y),e=new r.Point(e.x,e.y),u.x-=n,e.x+=n}for(d.moveTo(u.x,u.y),i=1,l=this._points.length;i<l;i++)this._drawSegment(d,u,e),u=this._points[i],e=this._points[i+1];d.lineTo(u.x,u.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var i=this.width/1e3;return r.util.getSmoothPathFromPoints(d,i)},_isEmptySVGPath:function(d){var i=r.util.joinPath(d);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(d){var i=new r.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new r.Shadow(this.shadow)),i},decimatePoints:function(d,i){if(d.length<=2)return d;var l=this.canvas.getZoom(),u=Math.pow(i/l,2),e,n=d.length-1,t=d[0],o=[t],c;for(e=1;e<n-1;e++)c=Math.pow(t.x-d[e].x,2)+Math.pow(t.y-d[e].y,2),c>=u&&(t=d[e],o.push(t));return o.push(d[n]),o},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var l=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),r.CircleBrush=r.util.createClass(r.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var i=this.addPoint(d),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,i),l.restore()},dot:function(d,i){d.fillStyle=i.fill,d.beginPath(),d.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,i,l,u=this.points;for(this._saveAndTransform(d),i=0,l=u.length;i<l;i++)this.dot(d,u[i]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,i,l;this.canvas.renderOnAddRemove=!1;var u=[];for(i=0,l=this.points.length;i<l;i++){var e=this.points[i],n=new r.Circle({radius:e.radius,left:e.x,top:e.y,originX:"center",originY:"center",fill:e.fill});this.shadow&&(n.shadow=new r.Shadow(this.shadow)),u.push(n)}var t=new r.Group(u);t.canvas=this.canvas,this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.fire("path:created",{path:t}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var i=new r.Point(d.x,d.y),l=r.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new r.Color(this.color).setAlpha(r.util.getRandomInt(0,100)/100).toRgba();return i.radius=l,i.fill=u,this.points.push(i),i}}),r.SprayBrush=r.util.createClass(r.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],l=0,u=this.sprayChunks.length;l<u;l++)for(var e=this.sprayChunks[l],n=0,t=e.length;n<t;n++){var o=new r.Rect({width:e[n].width,height:e[n].width,left:e[n].x+1,top:e[n].y+1,originX:"center",originY:"center",fill:this.color});i.push(o)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var c=new r.Group(i);this.shadow&&c.set("shadow",new r.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var i={},l,u,e;for(u=0,e=d.length;u<e;u++)l=d[u].left+""+d[u].top,i[l]||(i[l]=d[u]);var n=[];for(l in i)n.push(i[l]);return n},render:function(d){var i=this.canvas.contextTop,l,u;for(i.fillStyle=this.color,this._saveAndTransform(i),l=0,u=d.length;l<u;l++){var e=d[l];typeof e.opacity<"u"&&(i.globalAlpha=e.opacity),i.fillRect(e.x,e.y,e.width,e.width)}i.restore()},_render:function(){var d=this.canvas.contextTop,i,l;for(d.fillStyle=this.color,this._saveAndTransform(d),i=0,l=this.sprayChunks.length;i<l;i++)this.render(this.sprayChunks[i]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var i,l,u,e=this.width/2,n;for(n=0;n<this.density;n++){i=r.util.getRandomInt(d.x-e,d.x+e),l=r.util.getRandomInt(d.y-e,d.y+e),this.dotWidthVariance?u=r.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var t=new r.Point(i,l);t.width=u,this.randomOpacity&&(t.opacity=r.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(t)}this.sprayChunks.push(this.sprayChunkPoints)}}),r.PatternBrush=r.util.createClass(r.PencilBrush,{getPatternSrc:function(){var d=20,i=5,l=r.util.createCanvasElement(),u=l.getContext("2d");return l.width=l.height=d+i,u.fillStyle=this.color,u.beginPath(),u.arc(d/2,d/2,d/2,0,Math.PI*2,!1),u.closePath(),u.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(d){return d.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(d){this.callSuper("_setBrushStyles",d),d.strokeStyle=this.getPattern(d)},createPath:function(d){var i=this.callSuper("createPath",d),l=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new r.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),i}}),function(){var d=r.util.getPointer,i=r.util.degreesToRadians,l=r.util.isTouchEvent;r.Canvas=r.util.createClass(r.StaticCanvas,{initialize:function(e,n){n||(n={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,n),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=r.PencilBrush&&new r.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e=this.getActiveObjects(),n,t,o;if(e.length>0&&!this.preserveObjectStacking){t=[],o=[];for(var c=0,s=this._objects.length;c<s;c++)n=this._objects[c],e.indexOf(n)===-1?t.push(n):o.push(n);e.length>1&&(this._activeObject._objects=o),t.push.apply(t,o)}else t=this._objects;return t},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,n){var t=e.calcTransformMatrix(),o=r.util.invertTransform(t),c=this.restorePointerVpt(n);return r.util.transformPoint(c,o)},isTargetTransparent:function(e,n,t){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var o=this._normalizePointer(e,{x:n,y:t}),c=Math.max(e.cacheTranslationX+o.x*e.zoomX,0),s=Math.max(e.cacheTranslationY+o.y*e.zoomY,0),_=r.util.isTransparent(e._cacheContext,Math.round(c),Math.round(s),this.targetFindTolerance);return _}var h=this.contextCache,p=e.selectionBackgroundColor,y=this.viewportTransform;e.selectionBackgroundColor="",this.clearContext(h),h.save(),h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),e.render(h),h.restore(),e.selectionBackgroundColor=p;var _=r.util.isTransparent(h,n,t,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(e){var n=!1;return Array.isArray(this.selectionKey)?n=!!this.selectionKey.find(function(t){return e[t]===!0}):n=e[this.selectionKey],n},_shouldClearSelection:function(e,n){var t=this.getActiveObjects(),o=this._activeObject;return!n||n&&o&&t.length>1&&t.indexOf(n)===-1&&o!==n&&!this._isSelectionKeyPressed(e)||n&&!n.evented||n&&!n.selectable&&o&&o!==n},_shouldCenterTransform:function(e,n,t){if(e){var o;return n==="scale"||n==="scaleX"||n==="scaleY"||n==="resizing"?o=this.centeredScaling||e.centeredScaling:n==="rotate"&&(o=this.centeredRotation||e.centeredRotation),o?!t:t}},_getOriginFromCorner:function(e,n){var t={x:e.originX,y:e.originY};return n==="ml"||n==="tl"||n==="bl"?t.x="right":(n==="mr"||n==="tr"||n==="br")&&(t.x="left"),n==="tl"||n==="mt"||n==="tr"?t.y="bottom":(n==="bl"||n==="mb"||n==="br")&&(t.y="top"),t},_getActionFromCorner:function(e,n,t,o){if(!n||!e)return"drag";var c=o.controls[n];return c.getActionName(t,c,o)},_setupCurrentTransform:function(e,n,t){if(n){var o=this.getPointer(e),c=n.__corner,s=n.controls[c],h=t&&c?s.getActionHandler(e,n,s):r.controlsUtils.dragHandler,p=this._getActionFromCorner(t,c,e,n),y=this._getOriginFromCorner(n,c),_=e[this.centeredKey],T={target:n,action:p,actionHandler:h,corner:c,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:o.x-n.left,offsetY:o.y-n.top,originX:y.x,originY:y.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:i(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:_,original:r.util.saveObjectTransform(n)};this._shouldCenterTransform(n,p,_)&&(T.originX="center",T.originY="center"),T.original.originX=y.x,T.original.originY=y.y,this._currentTransform=T,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var n=this._groupSelector,t=new r.Point(n.ex,n.ey),o=r.util.transformPoint(t,this.viewportTransform),c=new r.Point(n.ex+n.left,n.ey+n.top),s=r.util.transformPoint(c,this.viewportTransform),h=Math.min(o.x,s.x),p=Math.min(o.y,s.y),y=Math.max(o.x,s.x),_=Math.max(o.y,s.y),T=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(h,p,y-h,_-p)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,h+=T,p+=T,y-=T,_-=T,r.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(h,p,y-h,_-p))},findTarget:function(e,n){if(!this.skipTargetFind){var t=!0,o=this.getPointer(e,t),c=this._activeObject,s=this.getActiveObjects(),h,p,y=l(e),_=s.length>1&&!n||s.length===1;if(this.targets=[],_&&c._findTargetCorner(o,y)||s.length>1&&!n&&c===this._searchPossibleTargets([c],o))return c;if(s.length===1&&c===this._searchPossibleTargets([c],o))if(this.preserveObjectStacking)h=c,p=this.targets,this.targets=[];else return c;var T=this._searchPossibleTargets(this._objects,o);return e[this.altSelectionKey]&&T&&h&&T!==h&&(T=h,this.targets=p),T}},_checkTarget:function(e,n,t){if(n&&n.visible&&n.evented&&n.containsPoint(e))if((this.perPixelTargetFind||n.perPixelTargetFind)&&!n.isEditing){var o=this.isTargetTransparent(n,t.x,t.y);if(!o)return!0}else return!0},_searchPossibleTargets:function(e,n){for(var t,o=e.length,c;o--;){var s=e[o],h=s.group?this._normalizePointer(s.group,n):n;if(this._checkTarget(h,s,n)){t=e[o],t.subTargetCheck&&t instanceof r.Group&&(c=this._searchPossibleTargets(t._objects,n),c&&this.targets.push(c));break}}return t},restorePointerVpt:function(e){return r.util.transformPoint(e,r.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var t=d(e),o=this.upperCanvasEl,c=o.getBoundingClientRect(),s=c.width||0,h=c.height||0,p;(!s||!h)&&("top"in c&&"bottom"in c&&(h=Math.abs(c.top-c.bottom)),"right"in c&&"left"in c&&(s=Math.abs(c.right-c.left))),this.calcOffset(),t.x=t.x-this._offset.left,t.y=t.y-this._offset.top,n||(t=this.restorePointerVpt(t));var y=this.getRetinaScaling();return y!==1&&(t.x/=y,t.y/=y),s===0||h===0?p={width:1,height:1}:p={width:o.width/s,height:o.height/h},{x:t.x*p.width,y:t.y*p.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),n=this.lowerCanvasEl,t=this.upperCanvasEl;t?t.className="":(t=this._createCanvasElement(),this.upperCanvasEl=t),r.util.addClass(t,"upper-canvas "+e),this.wrapperEl.appendChild(t),this._copyCanvasStyle(n,t),this._applyCanvasStyle(t),this.contextTop=t.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=r.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),r.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),r.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var n=this.width||e.width,t=this.height||e.height;r.util.setStyle(e,{position:"absolute",width:n+"px",height:t+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=n,e.height=t,r.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,n){n.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?e.type==="activeSelection"&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,n){var t=!1,o=this.getActiveObjects(),c=[],s=[];e.forEach(function(h){o.indexOf(h)===-1&&(t=!0,h.fire("deselected",{e:n,target:h}),s.push(h))}),o.forEach(function(h){e.indexOf(h)===-1&&(t=!0,h.fire("selected",{e:n,target:h}),c.push(h))}),e.length>0&&o.length>0?t&&this.fire("selection:updated",{e:n,selected:c,deselected:s}):o.length>0?this.fire("selection:created",{e:n,selected:c}):e.length>0&&this.fire("selection:cleared",{e:n,deselected:s})},setActiveObject:function(e,n){var t=this.getActiveObjects();return this._setActiveObject(e,n),this._fireSelectionEvents(t,n),this},_setActiveObject:function(e,n){return this._activeObject===e||!this._discardActiveObject(n,e)||e.onSelect({e:n})?!1:(this._activeObject=e,!0)},_discardActiveObject:function(e,n){var t=this._activeObject;if(t){if(t.onDeselect({e,object:n}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var n=this.getActiveObjects(),t=this.getActiveObject();return n.length&&this.fire("before:selection:cleared",{target:t,e}),this._discardActiveObject(e),this._fireSelectionEvents(n,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(n){r.util.cleanUpJsdomNode(this[n]),this[n]=void 0}).bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,r.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var n=this._activeObject;n&&n._renderControls(e)},_toObject:function(e,n,t){var o=this._realizeGroupTransformOnObject(e),c=this.callSuper("_toObject",e,n,t);return this._unwindGroupTransformOnObject(e,o),c},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group.type==="activeSelection"&&this._activeObject===e.group){var n=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],t={};return n.forEach(function(o){t[o]=e[o]}),r.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}else return null},_unwindGroupTransformOnObject:function(e,n){n&&e.set(n)},_setSVGObject:function(e,n,t){var o=this._realizeGroupTransformOnObject(n);this.callSuper("_setSVGObject",e,n,t),this._unwindGroupTransformOnObject(n,o)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),r.StaticCanvas.prototype.setViewportTransform.call(this,e)}});for(var u in r.StaticCanvas)u!=="prototype"&&(r.Canvas[u]=r.StaticCanvas[u])}(),function(){var d=r.util.addListener,i=r.util.removeListener,l=3,u=2,e=1,n={passive:!1};function t(o,c){return o.button&&o.button===c-1}r.util.object.extend(r.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(o,c){var s=this.upperCanvasEl,h=this._getEventPrefix();o(r.window,"resize",this._onResize),o(s,h+"down",this._onMouseDown),o(s,h+"move",this._onMouseMove,n),o(s,h+"out",this._onMouseOut),o(s,h+"enter",this._onMouseEnter),o(s,"wheel",this._onMouseWheel),o(s,"contextmenu",this._onContextMenu),o(s,"dblclick",this._onDoubleClick),o(s,"dragover",this._onDragOver),o(s,"dragenter",this._onDragEnter),o(s,"dragleave",this._onDragLeave),o(s,"drop",this._onDrop),this.enablePointerEvents||o(s,"touchstart",this._onTouchStart,n),typeof eventjs<"u"&&c in eventjs&&(eventjs[c](s,"gesture",this._onGesture),eventjs[c](s,"drag",this._onDrag),eventjs[c](s,"orientation",this._onOrientationChange),eventjs[c](s,"shake",this._onShake),eventjs[c](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var o=this._getEventPrefix();i(r.document,o+"up",this._onMouseUp),i(r.document,"touchend",this._onTouchEnd,n),i(r.document,o+"move",this._onMouseMove,n),i(r.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(o,c){this.__onTransformGesture&&this.__onTransformGesture(o,c)},_onDrag:function(o,c){this.__onDrag&&this.__onDrag(o,c)},_onMouseWheel:function(o){this.__onMouseWheel(o)},_onMouseOut:function(o){var c=this._hoveredTarget;this.fire("mouse:out",{target:c,e:o}),this._hoveredTarget=null,c&&c.fire("mouseout",{e:o});var s=this;this._hoveredTargets.forEach(function(h){s.fire("mouse:out",{target:c,e:o}),h&&c.fire("mouseout",{e:o})}),this._hoveredTargets=[]},_onMouseEnter:function(o){!this._currentTransform&&!this.findTarget(o)&&(this.fire("mouse:over",{target:null,e:o}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(o,c){this.__onOrientationChange&&this.__onOrientationChange(o,c)},_onShake:function(o,c){this.__onShake&&this.__onShake(o,c)},_onLongPress:function(o,c){this.__onLongPress&&this.__onLongPress(o,c)},_onDragOver:function(o){o.preventDefault();var c=this._simpleEventHandler("dragover",o);this._fireEnterLeaveEvents(c,o)},_onDrop:function(o){return this._simpleEventHandler("drop:before",o),this._simpleEventHandler("drop",o)},_onContextMenu:function(o){return this.stopContextMenu&&(o.stopPropagation(),o.preventDefault()),!1},_onDoubleClick:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"dblclick"),this._resetTransformEventData(o)},getPointerId:function(o){var c=o.changedTouches;return c?c[0]&&c[0].identifier:this.enablePointerEvents?o.pointerId:-1},_isMainEvent:function(o){return o.isPrimary===!0?!0:o.isPrimary===!1?!1:o.type==="touchend"&&o.touches.length===0?!0:o.changedTouches?o.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(o){o.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(o)),this.__onMouseDown(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();d(r.document,"touchend",this._onTouchEnd,n),d(r.document,"touchmove",this._onMouseMove,n),i(c,s+"down",this._onMouseDown)},_onMouseDown:function(o){this.__onMouseDown(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();i(c,s+"move",this._onMouseMove,n),d(r.document,s+"up",this._onMouseUp),d(r.document,s+"move",this._onMouseMove,n)},_onTouchEnd:function(o){if(!(o.touches.length>0)){this.__onMouseUp(o),this._resetTransformEventData(),this.mainTouchId=null;var c=this._getEventPrefix();i(r.document,"touchend",this._onTouchEnd,n),i(r.document,"touchmove",this._onMouseMove,n);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(s.upperCanvasEl,c+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(o){this.__onMouseUp(o),this._resetTransformEventData();var c=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(o)&&(i(r.document,s+"up",this._onMouseUp),i(r.document,s+"move",this._onMouseMove,n),d(c,s+"move",this._onMouseMove,n))},_onMouseMove:function(o){!this.allowTouchScrolling&&o.preventDefault&&o.preventDefault(),this.__onMouseMove(o)},_onResize:function(){this.calcOffset()},_shouldRender:function(o){var c=this._activeObject;return!!c!=!!o||c&&o&&c!==o?!0:(c&&c.isEditing,!1)},__onMouseUp:function(o){var c,s=this._currentTransform,h=this._groupSelector,p=!1,y=!h||h.left===0&&h.top===0;if(this._cacheTransformEventData(o),c=this._target,this._handleEvent(o,"up:before"),t(o,l)){this.fireRightClick&&this._handleEvent(o,"up",l,y);return}if(t(o,u)){this.fireMiddleClick&&this._handleEvent(o,"up",u,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(o);return}if(this._isMainEvent(o)){if(s&&(this._finalizeCurrentTransform(o),p=s.actionPerformed),!y){var _=c===this._activeObject;this._maybeGroupObjects(o),p||(p=this._shouldRender(c)||!_&&c===this._activeObject)}var T,A;if(c){if(T=c._findTargetCorner(this.getPointer(o,!0),r.util.isTouchEvent(o)),c.selectable&&c!==this._activeObject&&c.activeOn==="up")this.setActiveObject(c,o),p=!0;else{var v=c.controls[T],V=v&&v.getMouseUpHandler(o,c,v);V&&(A=this.getPointer(o),V(o,s,A.x,A.y))}c.isMoving=!1}if(s&&(s.target!==c||s.corner!==T)){var tt=s.target&&s.target.controls[s.corner],pt=tt&&tt.getMouseUpHandler(o,c,v);A=A||this.getPointer(o),pt&&pt(o,s,A.x,A.y)}this._setCursorFromEvent(o,c),this._handleEvent(o,"up",e,y),this._groupSelector=null,this._currentTransform=null,c&&(c.__corner=0),p?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(o,c){var s=this.findTarget(c),h=this.targets,p={e:c,target:s,subTargets:h};if(this.fire(o,p),s&&s.fire(o,p),!h)return s;for(var y=0;y<h.length;y++)h[y].fire(o,p);return s},_handleEvent:function(o,c,s,h){var p=this._target,y=this.targets||[],_={e:o,target:p,subTargets:y,button:s||e,isClick:h||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};c==="up"&&(_.currentTarget=this.findTarget(o),_.currentSubTargets=this.targets),this.fire("mouse:"+c,_),p&&p.fire("mouse"+c,_);for(var T=0;T<y.length;T++)y[T].fire("mouse"+c,_)},_finalizeCurrentTransform:function(o){var c=this._currentTransform,s=c.target,h={e:o,target:s,transform:c,action:c.action};s._scaling&&(s._scaling=!1),s.setCoords(),(c.actionPerformed||this.stateful&&s.hasStateChanged())&&this._fire("modified",h)},_onMouseDownInDrawingMode:function(o){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(o).requestRenderAll();var c=this.getPointer(o);this.freeDrawingBrush.onMouseDown(c,{e:o,pointer:c}),this._handleEvent(o,"down")},_onMouseMoveInDrawingMode:function(o){if(this._isCurrentlyDrawing){var c=this.getPointer(o);this.freeDrawingBrush.onMouseMove(c,{e:o,pointer:c})}this.setCursor(this.freeDrawingCursor),this._handleEvent(o,"move")},_onMouseUpInDrawingMode:function(o){var c=this.getPointer(o);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:o,pointer:c}),this._handleEvent(o,"up")},__onMouseDown:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"down:before");var c=this._target;if(t(o,l)){this.fireRightClick&&this._handleEvent(o,"down",l);return}if(t(o,u)){this.fireMiddleClick&&this._handleEvent(o,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(o);return}if(this._isMainEvent(o)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var h=this._shouldRender(c),p=this._shouldGroup(o,c);if(this._shouldClearSelection(o,c)?this.discardActiveObject(o):p&&(this._handleGrouping(o,c),c=this._activeObject),this.selection&&(!c||!c.selectable&&!c.isEditing&&c!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),c){var y=c===this._activeObject;c.selectable&&c.activeOn==="down"&&this.setActiveObject(c,o);var _=c._findTargetCorner(this.getPointer(o,!0),r.util.isTouchEvent(o));if(c.__corner=_,c===this._activeObject&&(_||!p)){this._setupCurrentTransform(o,c,y);var T=c.controls[_],s=this.getPointer(o),A=T&&T.getMouseDownHandler(o,c,T);A&&A(o,this._currentTransform,s.x,s.y)}}this._handleEvent(o,"down"),(h||p)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(o){this._resetTransformEventData(),this._pointer=this.getPointer(o,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(o)||null},_beforeTransform:function(o){var c=this._currentTransform;this.stateful&&c.target.saveState(),this.fire("before:transform",{e:o,transform:c})},__onMouseMove:function(o){this._handleEvent(o,"move:before"),this._cacheTransformEventData(o);var c,s;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(o);return}if(this._isMainEvent(o)){var h=this._groupSelector;h?(s=this._absolutePointer,h.left=s.x-h.ex,h.top=s.y-h.ey,this.renderTop()):this._currentTransform?this._transformObject(o):(c=this.findTarget(o)||null,this._setCursorFromEvent(o,c),this._fireOverOutEvents(c,o)),this._handleEvent(o,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(o,c){var s=this._hoveredTarget,h=this._hoveredTargets,p=this.targets,y=Math.max(h.length,p.length);this.fireSyntheticInOutEvents(o,c,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(p[_],c,{oldTarget:h[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(o,c){var s=this._draggedoverTarget,h=this._hoveredTargets,p=this.targets,y=Math.max(h.length,p.length);this.fireSyntheticInOutEvents(o,c,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(p[_],c,{oldTarget:h[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=o},fireSyntheticInOutEvents:function(o,c,s){var h,p,y=s.oldTarget,_,T,A=y!==o,v=s.canvasEvtIn,V=s.canvasEvtOut;A&&(h={e:c,target:o,previousTarget:y},p={e:c,target:y,nextTarget:o}),T=o&&A,_=y&&A,_&&(V&&this.fire(V,p),y.fire(s.evtOut,p)),T&&(v&&this.fire(v,h),o.fire(s.evtIn,h))},__onMouseWheel:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"wheel"),this._resetTransformEventData()},_transformObject:function(o){var c=this.getPointer(o),s=this._currentTransform;s.reset=!1,s.shiftKey=o.shiftKey,s.altKey=o[this.centeredKey],this._performTransformAction(o,s,c),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(o,c,s){var h=s.x,p=s.y,y=c.action,_=!1,T=c.actionHandler;T&&(_=T(o,c,h,p)),y==="drag"&&_&&(c.target.isMoving=!0,this.setCursor(c.target.moveCursor||this.moveCursor)),c.actionPerformed=c.actionPerformed||_},_fire:r.controlsUtils.fireEvent,_setCursorFromEvent:function(o,c){if(!c)return this.setCursor(this.defaultCursor),!1;var s=c.hoverCursor||this.hoverCursor,h=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,p=(!h||!h.contains(c))&&c._findTargetCorner(this.getPointer(o,!0));p?this.setCursor(this.getCornerCursor(p,c,o)):(c.subTargetCheck&&this.targets.concat().reverse().map(function(y){s=y.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(o,c,s){var h=c.controls[o];return h.cursorStyleHandler(s,h,c)}})}(),function(){var d=Math.min,i=Math.max;r.util.object.extend(r.Canvas.prototype,{_shouldGroup:function(l,u){var e=this._activeObject;return e&&this._isSelectionKeyPressed(l)&&u&&u.selectable&&this.selection&&(e!==u||e.type==="activeSelection")&&!u.onSelect({e:l})},_handleGrouping:function(l,u){var e=this._activeObject;e.__corner||u===e&&(u=this.findTarget(l,!0),!u||!u.selectable)||(e&&e.type==="activeSelection"?this._updateActiveSelection(u,l):this._createActiveSelection(u,l))},_updateActiveSelection:function(l,u){var e=this._activeObject,n=e._objects.slice(0);e.contains(l)?(e.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),e.size()===1&&this._setActiveObject(e.item(0),u)):(e.addWithUpdate(l),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,u)},_createActiveSelection:function(l,u){var e=this.getActiveObjects(),n=this._createGroup(l);this._hoveredTarget=n,this._setActiveObject(n,u),this._fireSelectionEvents(e,u)},_createGroup:function(l){var u=this._objects,e=u.indexOf(this._activeObject)<u.indexOf(l),n=e?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new r.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(l){var u=this._collectObjects(l),e;u.length===1?this.setActiveObject(u[0],l):u.length>1&&(e=new r.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(e,l))},_collectObjects:function(l){for(var u=[],e,n=this._groupSelector.ex,t=this._groupSelector.ey,o=n+this._groupSelector.left,c=t+this._groupSelector.top,s=new r.Point(d(n,o),d(t,c)),h=new r.Point(i(n,o),i(t,c)),p=!this.selectionFullyContained,y=n===o&&t===c,_=this._objects.length;_--&&(e=this._objects[_],!(!(!e||!e.selectable||!e.visible)&&(p&&e.intersectsWithRect(s,h,!0)||e.isContainedWithinRect(s,h,!0)||p&&e.containsPoint(s,null,!0)||p&&e.containsPoint(h,null,!0))&&(u.push(e),y))););return u.length>1&&(u=u.filter(function(T){return!T.onSelect({e:l})})),u},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){r.util.object.extend(r.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var i=d.format||"png",l=d.quality||1,u=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),e=this.toCanvasElement(u,d);return r.util.toDataURL(e,i,l)},toCanvasElement:function(d,i){d=d||1,i=i||{};var l=(i.width||this.width)*d,u=(i.height||this.height)*d,e=this.getZoom(),n=this.width,t=this.height,o=e*d,c=this.viewportTransform,s=(c[4]-(i.left||0))*d,h=(c[5]-(i.top||0))*d,p=this.interactive,y=[o,0,0,o,s,h],_=this.enableRetinaScaling,T=r.util.createCanvasElement(),A=this.contextTop;return T.width=l,T.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=l,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=c,this.width=n,this.height=t,this.calcViewportBoundaries(),this.interactive=p,this.enableRetinaScaling=_,this.contextTop=A,T}})}(),r.util.object.extend(r.StaticCanvas.prototype,{loadFromJSON:function(d,i,l){if(d){var u=typeof d=="string"?JSON.parse(d):r.util.object.clone(d),e=this,n=u.clipPath,t=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(o){e.clear(),e._setBgOverlay(u,function(){n?e._enlivenObjects([n],function(c){e.clipPath=c[0],e.__setupCanvas.call(e,u,o,t,i)}):e.__setupCanvas.call(e,u,o,t,i)})},l),this}},__setupCanvas:function(d,i,l,u){var e=this;i.forEach(function(n,t){e.insertAt(n,t)}),this.renderOnAddRemove=l,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),u&&u()},_setBgOverlay:function(d,i){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){i&&i();return}var u=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",d.backgroundImage,l,u),this.__setBgOverlay("overlayImage",d.overlayImage,l,u),this.__setBgOverlay("backgroundColor",d.background,l,u),this.__setBgOverlay("overlayColor",d.overlay,l,u)},__setBgOverlay:function(d,i,l,u){var e=this;if(!i){l[d]=!0,u&&u();return}d==="backgroundImage"||d==="overlayImage"?r.util.enlivenObjects([i],function(n){e[d]=n[0],l[d]=!0,u&&u()}):this["set"+r.util.string.capitalize(d,!0)](i,function(){l[d]=!0,u&&u()})},_enlivenObjects:function(d,i,l){if(!d||d.length===0){i&&i([]);return}r.util.enlivenObjects(d,function(u){i&&i(u)},null,l)},_toDataURL:function(d,i){this.clone(function(l){i(l.toDataURL(d))})},_toDataURLWithMultiplier:function(d,i,l){this.clone(function(u){l(u.toDataURLWithMultiplier(d,i))})},clone:function(d,i){var l=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(u){u.loadFromJSON(l,function(){d&&d(u)})})},cloneWithoutData:function(d){var i=r.util.createCanvasElement();i.width=this.width,i.height=this.height;var l=new r.Canvas(i);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),d&&d(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):d&&d(l)}}),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.util.object.clone,e=i.util.toFixed,n=i.util.string.capitalize,t=i.util.degreesToRadians,o=!i.isLikelyNode,c=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:o,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var h=i.perfLimitSizeTotal,p=s.width,y=s.height,_=i.maxCacheSideLimit,T=i.minCacheSideLimit;if(p<=_&&y<=_&&p*y<=h)return p<T&&(s.width=T),y<T&&(s.height=T),s;var A=p/y,v=i.util.limitDimsByArea(A,h),V=i.util.capValue,tt=V(T,v.x,_),pt=V(T,v.y,_);return p>tt&&(s.zoomX/=p/tt,s.width=tt,s.capped=!0),y>pt&&(s.zoomY/=y/pt,s.height=pt,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),h=this._getTransformedDimensions(0,0),p=h.x*s.scaleX/this.scaleX,y=h.y*s.scaleY/this.scaleY;return{width:p+c,height:y+c,zoomX:s.scaleX,zoomY:s.scaleY,x:p,y}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var h=s._currentTransform.target,p=s._currentTransform.action;if(this===h&&p.slice&&p.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),T=i.minCacheSideLimit,A=_.width,v=_.height,V,tt,pt=_.zoomX,_t=_.zoomY,Tt=A!==this.cacheWidth||v!==this.cacheHeight,vt=this.zoomX!==pt||this.zoomY!==_t,bt=Tt||vt,wt=0,Et=0,St=!1;if(Tt){var xt=this._cacheCanvas.width,D=this._cacheCanvas.height,H=A>xt||v>D,N=(A<xt*.9||v<D*.9)&&xt>T&&D>T;St=H||N,H&&!_.capped&&(A>T||v>T)&&(wt=A*.1,Et=v*.1)}return this instanceof i.Text&&this.path&&(bt=!0,St=!0,wt+=this.getHeightOfLine(0)*this.zoomX,Et+=this.getHeightOfLine(0)*this.zoomY),bt?(St?(y.width=Math.ceil(A+wt),y.height=Math.ceil(v+Et)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),V=_.x/2,tt=_.y/2,this.cacheTranslationX=Math.round(y.width/2-V)+V,this.cacheTranslationY=Math.round(y.height/2-tt)+tt,this.cacheWidth=A,this.cacheHeight=v,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(pt,_t),this.zoomX=pt,this.zoomY=_t,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var h=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,p=this.calcTransformMatrix(!h);s.transform(p[0],p[1],p[2],p[3],p[4],p[5])},toObject:function(s){var h=i.Object.NUM_FRACTION_DIGITS,p={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:e(this.left,h),top:e(this.top,h),width:e(this.width,h),height:e(this.height,h),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:e(this.strokeWidth,h),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:e(this.strokeMiterLimit,h),scaleX:e(this.scaleX,h),scaleY:e(this.scaleY,h),angle:e(this.angle,h),flipX:this.flipX,flipY:this.flipY,opacity:e(this.opacity,h),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:e(this.skewX,h),skewY:e(this.skewY,h)};return this.clipPath&&!this.clipPath.excludeFromExport&&(p.clipPath=this.clipPath.toObject(s),p.clipPath.inverted=this.clipPath.inverted,p.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,p,s),this.includeDefaultValues||(p=this._removeDefaultValues(p)),p},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var h=i.util.getKlass(s.type).prototype,p=h.stateProperties;return p.forEach(function(y){y==="left"||y==="top"||(s[y]===h[y]&&delete s[y],Array.isArray(s[y])&&Array.isArray(h[y])&&s[y].length===0&&h[y].length===0&&delete s[y])}),s},toString:function(){return"#<fabric."+n(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),h=s.scaleX,p=s.scaleY;if(this.canvas){var y=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();h*=y*_,p*=y*_}return{scaleX:h,scaleY:p}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,h){var p=s==="scaleX"||s==="scaleY",y=this[s]!==h,_=!1;return p&&(h=this._constrainScale(h)),s==="scaleX"&&h<0?(this.flipX=!this.flipX,h*=-1):s==="scaleY"&&h<0?(this.flipY=!this.flipY,h*=-1):s==="shadow"&&h&&!(h instanceof i.Shadow)?h=new i.Shadow(h):s==="dirty"&&this.group&&this.group.set("dirty",h),this[s]=h,y&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s,h){if(s.save(),h.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",h.absolutePositioned){var p=i.util.invertTransform(this.calcTransformMatrix());s.transform(p[0],p[1],p[2],p[3],p[4],p[5])}h.transform(s),s.scale(1/h.zoomX,1/h.zoomY),s.drawImage(h._cacheCanvas,-h.cacheTranslationX,-h.cacheTranslationY),s.restore()},drawObject:function(s,h){var p=this.fill,y=this.stroke;h?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s,this.clipPath),this.fill=p,this.stroke=y},_drawClipPath:function(s,h){h&&(h.canvas=this.canvas,h.shouldCache(),h._transformDone=!0,h.renderCache({forClipping:!0}),this.drawClipPathOnCache(s,h))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!s){var h=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-p/2,h,p)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var h=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-h.x/2,-h.y/2,h.x,h.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,h){var p=h.stroke;p&&(s.lineWidth=h.strokeWidth,s.lineCap=h.strokeLineCap,s.lineDashOffset=h.strokeDashOffset,s.lineJoin=h.strokeLineJoin,s.miterLimit=h.strokeMiterLimit,p.toLive?p.gradientUnits==="percentage"||p.gradientTransform||p.patternTransform?this._applyPatternForTransformedGradient(s,p):(s.strokeStyle=p.toLive(s,this),this._applyPatternGradientTransform(s,p)):s.strokeStyle=h.stroke)},_setFillStyles:function(s,h){var p=h.fill;p&&(p.toLive?(s.fillStyle=p.toLive(s,this),this._applyPatternGradientTransform(s,h.fill)):s.fillStyle=p)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,h){!h||h.length===0||(1&h.length&&h.push.apply(h,h),s.setLineDash(h))},_renderControls:function(s,h){var p=this.getViewportTransform(),y=this.calcTransformMatrix(),_,T,A;h=h||{},T=typeof h.hasBorders<"u"?h.hasBorders:this.hasBorders,A=typeof h.hasControls<"u"?h.hasControls:this.hasControls,y=i.util.multiplyTransformMatrices(p,y),_=i.util.qrDecompose(y),s.save(),s.translate(_.translateX,_.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),s.rotate(t(this.group?_.angle:this.angle)),h.forActiveSelection||this.group?T&&this.drawBordersInGroup(s,_,h):T&&this.drawBorders(s,h),A&&this.drawControls(s,h),s.restore()},_setShadow:function(s){if(this.shadow){var h=this.shadow,p=this.canvas,y,_=p&&p.viewportTransform[0]||1,T=p&&p.viewportTransform[3]||1;h.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),p&&p._isRetinaScaling()&&(_*=i.devicePixelRatio,T*=i.devicePixelRatio),s.shadowColor=h.color,s.shadowBlur=h.blur*i.browserShadowBlurConstant*(_+T)*(y.scaleX+y.scaleY)/4,s.shadowOffsetX=h.offsetX*_*y.scaleX,s.shadowOffsetY=h.offsetY*T*y.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,h){if(!h||!h.toLive)return{offsetX:0,offsetY:0};var p=h.gradientTransform||h.patternTransform,y=-this.width/2+h.offsetX||0,_=-this.height/2+h.offsetY||0;return h.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,y,_):s.transform(1,0,0,1,y,_),p&&s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),{offsetX:y,offsetY:_}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var h=this.getObjectScaling();s.scale(1/h.scaleX,1/h.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,h){var p=this._limitCacheSize(this._getCacheCanvasDimensions()),y=i.util.createCanvasElement(),_,T=this.canvas.getRetinaScaling(),A=p.x/this.scaleX/T,v=p.y/this.scaleY/T;y.width=A,y.height=v,_=y.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(A,0),_.lineTo(A,v),_.lineTo(0,v),_.closePath(),_.translate(A/2,v/2),_.scale(p.zoomX/this.scaleX/T,p.zoomY/this.scaleY/T),this._applyPatternGradientTransform(_,h),_.fillStyle=h.toLive(s),_.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(T*this.scaleX/p.zoomX,T*this.scaleY/p.zoomY),s.strokeStyle=_.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var h=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),h=i.util.transformPoint(h,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,h.x+=s.offsetLeft,h.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(h,"center","center")},clone:function(s,h){var p=this.toObject(h);this.constructor.fromObject?this.constructor.fromObject(p,s):i.Object._fromObject("Object",p,s)},cloneAsImage:function(s,h){var p=this.toCanvasElement(h);return s&&s(new i.Image(p)),this},toCanvasElement:function(s){s||(s={});var h=i.util,p=h.saveObjectTransform(this),y=this.group,_=this.shadow,T=Math.abs,A=(s.multiplier||1)*(s.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,s.withoutTransform&&h.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var v=i.util.createCanvasElement(),V=this.getBoundingRect(!0,!0),tt=this.shadow,pt,_t={x:0,y:0},Tt,vt,bt;tt&&(Tt=tt.blur,tt.nonScaling?pt={scaleX:1,scaleY:1}:pt=this.getObjectScaling(),_t.x=2*Math.round(T(tt.offsetX)+Tt)*T(pt.scaleX),_t.y=2*Math.round(T(tt.offsetY)+Tt)*T(pt.scaleY)),vt=V.width+_t.x,bt=V.height+_t.y,v.width=Math.ceil(vt),v.height=Math.ceil(bt);var wt=new i.StaticCanvas(v,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(wt.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(wt.width/2,wt.height/2),"center","center");var Et=this.canvas;wt.add(this);var St=wt.toCanvasElement(A||1,s);return this.shadow=_,this.set("canvas",Et),y&&(this.group=y),this.set(p).setCoords(),wt._objects=[],wt.dispose(),wt=null,St},toDataURL:function(s){return s||(s={}),i.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var h=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return h&&this._setOriginToCenter(),this.set("angle",s),h&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,h){h=h||this.canvas.getPointer(s);var p=new i.Point(h.x,h.y),y=this._getLeftTopCoords();return this.angle&&(p=i.util.rotatePoint(p,y,t(-this.angle))),{x:p.x-y.x,y:p.y-y.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),l(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(s,h,p,y){var _=i[s];h=u(h,!0),i.util.enlivenPatterns([h.fill,h.stroke],function(T){typeof T[0]<"u"&&(h.fill=T[0]),typeof T[1]<"u"&&(h.stroke=T[1]),i.util.enlivenObjectEnlivables(h,h,function(){var A=y?new _(h[y],h):new _(h);p&&p(A)})})},i.Object.__uid=0)}(f),function(){var d=r.util.degreesToRadians,i={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};r.util.object.extend(r.Object.prototype,{translateToGivenOrigin:function(u,e,n,t,o){var c=u.x,s=u.y,h,p,y;return typeof e=="string"?e=i[e]:e-=.5,typeof t=="string"?t=i[t]:t-=.5,h=t-e,typeof n=="string"?n=l[n]:n-=.5,typeof o=="string"?o=l[o]:o-=.5,p=o-n,(h||p)&&(y=this._getTransformedDimensions(),c=u.x+h*y.x,s=u.y+p*y.y),new r.Point(c,s)},translateToCenterPoint:function(u,e,n){var t=this.translateToGivenOrigin(u,e,n,"center","center");return this.angle?r.util.rotatePoint(t,u,d(this.angle)):t},translateToOriginPoint:function(u,e,n){var t=this.translateToGivenOrigin(u,"center","center",e,n);return this.angle?r.util.rotatePoint(t,u,d(this.angle)):t},getCenterPoint:function(){var u=new r.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,u,e)},toLocalPoint:function(u,e,n){var t=this.getCenterPoint(),o,c;return typeof e<"u"&&typeof n<"u"?o=this.translateToGivenOrigin(t,"center","center",e,n):o=new r.Point(this.left,this.top),c=new r.Point(u.x,u.y),this.angle&&(c=r.util.rotatePoint(c,t,-d(this.angle))),c.subtractEquals(o)},setPositionByOrigin:function(u,e,n){var t=this.translateToCenterPoint(u,e,n),o=this.translateToOriginPoint(t,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(u){var e=d(this.angle),n=this.getScaledWidth(),t=r.util.cos(e)*n,o=r.util.sin(e)*n,c,s;typeof this.originX=="string"?c=i[this.originX]:c=this.originX-.5,typeof u=="string"?s=i[u]:s=u-.5,this.left+=t*(s-c),this.top+=o*(s-c),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(n){return[new r.Point(n.tl.x,n.tl.y),new r.Point(n.tr.x,n.tr.y),new r.Point(n.br.x,n.br.y),new r.Point(n.bl.x,n.bl.y)]}var i=r.util,l=i.degreesToRadians,u=i.multiplyTransformMatrices,e=i.transformPoint;i.object.extend(r.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(n,t){return t?n?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),n?this.aCoords:this.lineCoords)},getCoords:function(n,t){return d(this._getCoords(n,t))},intersectsWithRect:function(n,t,o,c){var s=this.getCoords(o,c),h=r.Intersection.intersectPolygonRectangle(s,n,t);return h.status==="Intersection"},intersectsWithObject:function(n,t,o){var c=r.Intersection.intersectPolygonPolygon(this.getCoords(t,o),n.getCoords(t,o));return c.status==="Intersection"||n.isContainedWithinObject(this,t,o)||this.isContainedWithinObject(n,t,o)},isContainedWithinObject:function(n,t,o){for(var c=this.getCoords(t,o),s=t?n.aCoords:n.lineCoords,h=0,p=n._getImageLines(s);h<4;h++)if(!n.containsPoint(c[h],p))return!1;return!0},isContainedWithinRect:function(n,t,o,c){var s=this.getBoundingRect(o,c);return s.left>=n.x&&s.left+s.width<=t.x&&s.top>=n.y&&s.top+s.height<=t.y},containsPoint:function(n,h,o,c){var s=this._getCoords(o,c),h=h||this._getImageLines(s),p=this._findCrossPoints(n,h);return p!==0&&p%2===1},isOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br,c=this.getCoords(!0,n);return c.some(function(s){return s.x<=o.x&&s.x>=t.x&&s.y<=o.y&&s.y>=t.y})||this.intersectsWithRect(t,o,!0,n)?!0:this._containsCenterOfCanvas(t,o,n)},_containsCenterOfCanvas:function(n,t,o){var c={x:(n.x+t.x)/2,y:(n.y+t.y)/2};return!!this.containsPoint(c,null,!0,o)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br;if(this.intersectsWithRect(t,o,!0,n))return!0;var c=this.getCoords(!0,n).every(function(s){return(s.x>=o.x||s.x<=t.x)&&(s.y>=o.y||s.y<=t.y)});return c&&this._containsCenterOfCanvas(t,o,n)},_getImageLines:function(n){var t={topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}};return t},_findCrossPoints:function(n,t){var o,c,s,h,p,y=0,_;for(var T in t)if(_=t[T],!(_.o.y<n.y&&_.d.y<n.y)&&!(_.o.y>=n.y&&_.d.y>=n.y)&&(_.o.x===_.d.x&&_.o.x>=n.x?p=_.o.x:(o=0,c=(_.d.y-_.o.y)/(_.d.x-_.o.x),s=n.y-o*n.x,h=_.o.y-c*_.o.x,p=-(s-h)/(o-c)),p>=n.x&&(y+=1),y===2))break;return y},getBoundingRect:function(n,t){var o=this.getCoords(n,t);return i.makeBoundingBoxFromPoints(o)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,t){var o=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(n/this.width/o)},scaleToHeight:function(n,t){var o=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(n/this.height/o)},calcLineCoords:function(){var n=this.getViewportTransform(),t=this.padding,o=l(this.angle),c=i.cos(o),s=i.sin(o),h=c*t,p=s*t,y=h+p,_=h-p,T=this.calcACoords(),A={tl:e(T.tl,n),tr:e(T.tr,n),bl:e(T.bl,n),br:e(T.br,n)};return t&&(A.tl.x-=_,A.tl.y-=y,A.tr.x+=y,A.tr.y-=_,A.bl.x-=y,A.bl.y+=_,A.br.x+=_,A.br.y+=y),A},calcOCoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),o=this.getViewportTransform(),c=u(o,t),s=u(c,n),s=u(s,[1/o[0],0,0,1/o[3],0,0]),h=this._calculateCurrentDimensions(),p={};return this.forEachControl(function(y,_,T){p[_]=y.positionHandler(h,s,T)}),p},calcACoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),o=u(t,n),c=this._getTransformedDimensions(),s=c.x/2,h=c.y/2;return{tl:e({x:-s,y:-h},o),tr:e({x:s,y:-h},o),bl:e({x:-s,y:h},o),br:e({x:s,y:h},o)}},setCoords:function(n){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),n?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var t="_",o="";return!n&&this.group&&(o=this.group.transformMatrixKey(n)+t),o+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){var t=this.calcOwnMatrix();if(n||!this.group)return t;var o=this.transformMatrixKey(n),c=this.matrixCache||(this.matrixCache={});return c.key===o?c.value:(this.group&&(t=u(this.group.calcTransformMatrix(!1),t)),c.key=o,c.value=t,t)},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===n)return t.value;var o=this._calcTranslateMatrix(),c={angle:this.angle,translateX:o[4],translateY:o[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return t.key=n,t.value=i.composeMatrix(c),t.value},_getNonTransformedDimensions:function(){var n=this.strokeWidth,t=this.width+n,o=this.height+n;return{x:t,y:o}},_getTransformedDimensions:function(n,t){typeof n>"u"&&(n=this.skewX),typeof t>"u"&&(t=this.skewY);var o,c,s,h=n===0&&t===0;if(this.strokeUniform?(c=this.width,s=this.height):(o=this._getNonTransformedDimensions(),c=o.x,s=o.y),h)return this._finalizeDimensions(c*this.scaleX,s*this.scaleY);var p=i.sizeAfterTransform(c,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:t});return this._finalizeDimensions(p.x,p.y)},_finalizeDimensions:function(n,t){return this.strokeUniform?{x:n+this.strokeWidth,y:t+this.strokeWidth}:{x:n,y:t}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),t=this._getTransformedDimensions(),o=e(t,n,!0);return o.scalarAdd(2*this.padding)}})}(),r.util.object.extend(r.Object.prototype,{sendToBack:function(){return this.group?r.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?r.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?r.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?r.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?r.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(l,u){if(u){if(u.toLive)return l+": url(#SVGID_"+u.id+"); ";var e=new r.Color(u),n=l+": "+e.toRgb()+"; ",t=e.getAlpha();return t!==1&&(n+=l+"-opacity: "+t.toString()+"; "),n}else return l+": none; "}var i=r.util.toFixed;r.util.object.extend(r.Object.prototype,{getSvgStyles:function(l){var u=this.fillRule?this.fillRule:"nonzero",e=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",t=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=typeof this.opacity<"u"?this.opacity:"1",p=this.visible?"":" visibility: hidden;",y=l?"":this.getSvgFilter(),_=d("fill",this.fill),T=d("stroke",this.stroke);return[T,"stroke-width: ",e,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",t,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",s,"; ",_,"fill-rule: ",u,"; ","opacity: ",h,";",y,p].join("")},getSvgSpanStyles:function(l,u){var e="; ",t=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+e:"",n=l.strokeWidth?"stroke-width: "+l.strokeWidth+e:"",t=t,o=l.fontSize?"font-size: "+l.fontSize+"px"+e:"",c=l.fontStyle?"font-style: "+l.fontStyle+e:"",s=l.fontWeight?"font-weight: "+l.fontWeight+e:"",h=l.fill?d("fill",l.fill):"",p=l.stroke?d("stroke",l.stroke):"",y=this.getSvgTextDecoration(l),_=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return y&&(y="text-decoration: "+y+e),[p,n,t,o,c,s,y,h,_,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(u){return l[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,u){var e=l?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'+r.util.matrixToSVG(e);return n+(u||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var u=r.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,u),'" y="',i(-this.height/2,u),'" width="',i(this.width,u),'" height="',i(this.height,u),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,u){u=u||{};var e=u.reviver,n=u.additionalTransform||"",t=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=l.indexOf("COMMON_PARTS");return l[o]=t,e?e(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,u){u=u||{};var e=u.noStyle,n=u.reviver,t=e?"":'style="'+this.getSvgStyles()+'" ',o=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,p=this.stroke,y=this.fill,_=this.shadow,T,A=[],v,V=l.indexOf("COMMON_PARTS"),tt=u.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+r.Object.__uid++,v='<clipPath id="'+c.clipPathId+`" >
`+c.toClipPathSVG(n)+`</clipPath>
`),h&&A.push("<g ",o,this.getSvgCommons(),` >
`),A.push("<g ",this.getSvgTransform(!1),h?"":o+this.getSvgCommons(),` >
`),T=[t,s,e?"":this.addPaintOrder()," ",tt?'transform="'+tt+'" ':""].join(""),l[V]=T,y&&y.toLive&&A.push(y.toSVG(this)),p&&p.toLive&&A.push(p.toSVG(this)),_&&A.push(_.toSVG(this)),c&&A.push(v),A.push(l.join("")),A.push(`</g>
`),h&&A.push(`</g>
`),n?n(A.join("")):A.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=r.util.object.extend,i="stateProperties";function l(e,n,t){var o={},c=!0;t.forEach(function(s){o[s]=e[s]}),d(e[n],o,c)}function u(e,n,t){if(e===n)return!0;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var o=0,c=e.length;o<c;o++)if(!u(e[o],n[o]))return!1;return!0}else if(e&&typeof e=="object"){var s=Object.keys(e),h;if(!n||typeof n!="object"||!t&&s.length!==Object.keys(n).length)return!1;for(var o=0,c=s.length;o<c;o++)if(h=s[o],!(h==="canvas"||h==="group")&&!u(e[h],n[h]))return!1;return!0}}r.util.object.extend(r.Object.prototype,{hasStateChanged:function(e){e=e||i;var n="_"+e;return Object.keys(this[n]).length<this[e].length?!0:!u(this[n],this,!0)},saveState:function(e){var n=e&&e.propertySet||i,t="_"+n;return this[t]?(l(this,t,this[n]),e&&e.stateProperties&&l(this,t,e.stateProperties),this):this.setupState(e)},setupState:function(e){e=e||{};var n=e.propertySet||i;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var d=r.util.degreesToRadians;r.util.object.extend(r.Object.prototype,{_findTargetCorner:function(i,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=i.x,e=i.y,n,t,o=Object.keys(this.oCoords),c=o.length-1,s;for(this.__corner=0;c>=0;c--)if(s=o[c],!!this.isControlVisible(s)&&(t=this._getImageLines(l?this.oCoords[s].touchCorner:this.oCoords[s].corner),n=this._findCrossPoints({x:u,y:e},t),n!==0&&n%2===1))return this.__corner=s,s;return!1},forEachControl:function(i){for(var l in this.controls)i(this.controls[l],l,this)},_setCornerCoords:function(){var i=this.oCoords;for(var l in i){var u=this.controls[l];i[l].corner=u.calcCornerCoords(this.angle,this.cornerSize,i[l].x,i[l].y,!1),i[l].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,i[l].x,i[l].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var l=this.getCenterPoint(),u=this._calculateCurrentDimensions(),e=this.canvas.viewportTransform;return i.translate(l.x,l.y),i.scale(1/e[0],1/e[3]),i.rotate(d(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-u.x/2,-u.y/2,u.x,u.y),i.restore(),this},drawBorders:function(i,l){l=l||{};var u=this._calculateCurrentDimensions(),e=this.borderScaleFactor,n=u.x+e,t=u.y+e,o=typeof l.hasControls<"u"?l.hasControls:this.hasControls,c=!1;return i.save(),i.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(i,l.borderDashArray||this.borderDashArray),i.strokeRect(-n/2,-t/2,n,t),o&&(i.beginPath(),this.forEachControl(function(s,h,p){s.withConnection&&s.getVisibility(p,h)&&(c=!0,i.moveTo(s.x*n,s.y*t),i.lineTo(s.x*n+s.offsetX,s.y*t+s.offsetY))}),c&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,l,u){u=u||{};var e=r.util.sizeAfterTransform(this.width,this.height,l),n=this.strokeWidth,t=this.strokeUniform,o=this.borderScaleFactor,c=e.x+n*(t?this.canvas.getZoom():l.scaleX)+o,s=e.y+n*(t?this.canvas.getZoom():l.scaleY)+o;return i.save(),this._setLineDash(i,u.borderDashArray||this.borderDashArray),i.strokeStyle=u.borderColor||this.borderColor,i.strokeRect(-c/2,-s/2,c,s),i.restore(),this},drawControls:function(i,l){l=l||{},i.save();var u=this.canvas.getRetinaScaling(),e,n;return i.setTransform(u,0,0,u,0,0),i.strokeStyle=i.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(e=this.group.calcTransformMatrix()),this.forEachControl(function(t,o,c){n=c.oCoords[o],t.getVisibility(c,o)&&(e&&(n=r.util.transformPoint(n,e)),t.render(i,n.x,n.y,l,c))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=l,this},setControlsVisibility:function(i){i||(i={});for(var l in i)this.setControlVisible(l,i[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),r.util.object.extend(r.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,i){i=i||{};var l=function(){},u=i.onComplete||l,e=i.onChange||l,n=this;return r.util.animate({target:this,startValue:d.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){d.set("left",t),n.requestRenderAll(),e()},onComplete:function(){d.setCoords(),u()}})},fxCenterObjectV:function(d,i){i=i||{};var l=function(){},u=i.onComplete||l,e=i.onChange||l,n=this;return r.util.animate({target:this,startValue:d.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){d.set("top",t),n.requestRenderAll(),e()},onComplete:function(){d.setCoords(),u()}})},fxRemove:function(d,i){i=i||{};var l=function(){},u=i.onComplete||l,e=i.onChange||l,n=this;return r.util.animate({target:this,startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){d.set("opacity",t),n.requestRenderAll(),e()},onComplete:function(){n.remove(d),u()}})}}),r.util.object.extend(r.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],i,l,u=[];for(i in arguments[0])d.push(i);for(var e=0,n=d.length;e<n;e++)i=d[e],l=e!==n-1,u.push(this._animate(i,arguments[0][i],arguments[1],l));return u}else return this._animate.apply(this,arguments)},_animate:function(d,i,l,u){var e=this,n;i=i.toString(),l?l=r.util.object.clone(l):l={},~d.indexOf(".")&&(n=d.split("."));var t=e.colorProperties.indexOf(d)>-1||n&&e.colorProperties.indexOf(n[1])>-1,o=n?this.get(n[0])[n[1]]:this.get(d);"from"in l||(l.from=o),t||(~i.indexOf("=")?i=o+parseFloat(i.replace("=","")):i=parseFloat(i));var c={target:this,startValue:l.from,endValue:i,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(s,h,p){return l.abort.call(e,s,h,p)},onChange:function(s,h,p){n?e[n[0]][n[1]]=s:e.set(d,s),!u&&l.onChange&&l.onChange(s,h,p)},onComplete:function(s,h,p){u||(e.setCoords(),l.onComplete&&l.onComplete(s,h,p))}};return t?r.util.animateColor(c.startValue,c.endValue,c.duration,c):r.util.animate(c)}}),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.util.object.clone,e={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,o){t||(t=[0,0,0,0]),this.callSuper("initialize",o),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(o)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,o){return this.callSuper("_set",t,o),typeof e[t]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:n({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:n({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var o=this.calcLinePoints();t.moveTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineWidth=this.strokeWidth;var c=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=c},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return l(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,o=this.y1<=this.y2?-1:1,c=t*this.width*.5,s=o*this.height*.5,h=t*this.width*-.5,p=o*this.height*-.5;return{x1:c,x2:h,y1:s,y2:p}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,o,c){c=c||{};var s=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),h=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];o(new i.Line(h,l(s,c)))},i.Line.fromObject=function(t,o){function c(h){delete h.points,o&&o(h)}var s=u(t,!0);s.points=[t.x1,t.y1,t.x2,t.y2],i.Object._fromObject("Line",s,c,"points")};function n(t,o){var c=t.origin,s=t.axis1,h=t.axis2,p=t.dimension,y=o.nearest,_=o.center,T=o.farthest;return function(){switch(this.get(c)){case y:return Math.min(this.get(s),this.get(h));case _:return Math.min(this.get(s),this.get(h))+.5*this.get(p);case T:return Math.max(this.get(s),this.get(h))}}}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,n){return this.callSuper("_set",e,n),e==="radius"&&this.setRadius(n),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=0,t=0,o=(this.endAngle-this.startAngle)%360;if(o===0)e=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+t+'" ','r="',this.radius,`" />
`];else{var c=l(this.startAngle),s=l(this.endAngle),h=this.radius,p=i.util.cos(c)*h,y=i.util.sin(c)*h,_=i.util.cos(s)*h,T=i.util.sin(s)*h,A=o>180?"1":"0";e=['<path d="M '+p+" "+y," A "+h+" "+h," 0 ",+A+" 1"," "+_+" "+T,'" ',"COMMON_PARTS",` />
`]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",e*2).set("height",e*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(e,n){var t=i.parseAttributes(e,i.Circle.ATTRIBUTE_NAMES);if(!u(t))throw new Error("value of `r` attribute is required and can not be negative");t.left=(t.left||0)-t.radius,t.top=(t.top||0)-t.radius,n(new i.Circle(t))};function u(e){return"radius"in e&&e.radius>=0}i.Circle.fromObject=function(e,n){i.Object._fromObject("Circle",e,n)}}(f),function(d){var i=d.fabric||(d.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(l){var u=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-u,e),l.lineTo(0,-e),l.lineTo(u,e),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,u=this.height/2,e=[-l+" "+u,"0 "+-u,l+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',e,'" />']}}),i.Triangle.fromObject=function(l,u){return i.Object._fromObject("Triangle",l,u)}}(f),function(d){var i=d.fabric||(d.fabric={}),l=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,e){switch(this.callSuper("_set",u,e),u){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,l,!1),u.restore(),this._renderPaintInOrder(u)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(u,e){var n=i.parseAttributes(u,i.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,e(new i.Ellipse(n))},i.Ellipse.fromObject=function(u,e){i.Object._fromObject("Ellipse",u,e)}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,t=this.width,o=this.height,c=-this.width/2,s=-this.height/2,h=e!==0||n!==0,p=1-.5522847498;u.beginPath(),u.moveTo(c+e,s),u.lineTo(c+t-e,s),h&&u.bezierCurveTo(c+t-p*e,s,c+t,s+p*n,c+t,s+n),u.lineTo(c+t,s+o-n),h&&u.bezierCurveTo(c+t,s+o-p*n,c+t-p*e,s+o,c+t-e,s+o),u.lineTo(c+e,s+o),h&&u.bezierCurveTo(c+p*e,s+o,c,s+o-p*n,c,s+o-n),u.lineTo(c,s+n),h&&u.bezierCurveTo(c,s+p*n,c+p*e,s,c+e,s),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(u,e,n){if(!u)return e(null);n=n||{};var t=i.parseAttributes(u,i.Rect.ATTRIBUTE_NAMES);t.left=t.left||0,t.top=t.top||0,t.height=t.height||0,t.width=t.width||0;var o=new i.Rect(l(n?i.util.object.clone(n):{},t));o.visible=o.visible&&o.width>0&&o.height>0,e(o)},i.Rect.fromObject=function(u,e){return i.Object._fromObject("Rect",u,e)}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.util.array.min,e=i.util.array.max,n=i.util.toFixed,t=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(o,c){c=c||{},this.points=o||[],this.callSuper("initialize",c),this._setPositionDimensions(c)},_projectStrokeOnPoints:function(){return t(this.points,this,!0)},_setPositionDimensions:function(o){var c=this._calcDimensions(o),s,h=this.exactBoundingBox?this.strokeWidth:0;this.width=c.width-h,this.height=c.height-h,o.fromSVG||(s=this.translateToGivenOrigin({x:c.left-this.strokeWidth/2+h/2,y:c.top-this.strokeWidth/2+h/2},"left","top",this.originX,this.originY)),typeof o.left>"u"&&(this.left=o.fromSVG?c.left:s.x),typeof o.top>"u"&&(this.top=o.fromSVG?c.top:s.y),this.pathOffset={x:c.left+this.width/2+h/2,y:c.top+this.height/2+h/2}},_calcDimensions:function(){var o=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,c=u(o,"x")||0,s=u(o,"y")||0,h=e(o,"x")||0,p=e(o,"y")||0,y=h-c,_=p-s;return{left:c,top:s,width:y,height:_}},toObject:function(o){return l(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],c=this.pathOffset.x,s=this.pathOffset.y,h=i.Object.NUM_FRACTION_DIGITS,p=0,y=this.points.length;p<y;p++)o.push(n(this.points[p].x-c,h),",",n(this.points[p].y-s,h)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),`" />
`]},commonRender:function(o){var c,s=this.points.length,h=this.pathOffset.x,p=this.pathOffset.y;if(!s||isNaN(this.points[s-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-h,this.points[0].y-p);for(var y=0;y<s;y++)c=this.points[y],o.lineTo(c.x-h,c.y-p);return!0},_render:function(o){this.commonRender(o)&&this._renderPaintInOrder(o)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(o){return function(c,s,h){if(!c)return s(null);h||(h={});var p=i.parsePointsAttribute(c.getAttribute("points")),y=i.parseAttributes(c,i[o].ATTRIBUTE_NAMES);y.fromSVG=!0,s(new i[o](p,l(y,h)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(o,c){return i.Object._fromObject("Polyline",o,c,"points")}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(u,e){i.Object._fromObject("Polygon",u,e,"points")}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.array.min,u=i.util.array.max,e=i.util.object.extend,n=i.util.object.clone,t=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(o,c){c=n(c||{}),delete c.path,this.callSuper("initialize",c),this._setPath(o||[],c)},_setPath:function(o,c){this.path=i.util.makePathSimpler(Array.isArray(o)?o:i.util.parsePath(o)),i.Polyline.prototype._setPositionDimensions.call(this,c||{})},_renderPathCommands:function(o){var c,s=0,h=0,p=0,y=0,_=0,T=0,A=-this.pathOffset.x,v=-this.pathOffset.y;o.beginPath();for(var V=0,tt=this.path.length;V<tt;++V)switch(c=this.path[V],c[0]){case"L":p=c[1],y=c[2],o.lineTo(p+A,y+v);break;case"M":p=c[1],y=c[2],s=p,h=y,o.moveTo(p+A,y+v);break;case"C":p=c[5],y=c[6],_=c[3],T=c[4],o.bezierCurveTo(c[1]+A,c[2]+v,_+A,T+v,p+A,y+v);break;case"Q":o.quadraticCurveTo(c[1]+A,c[2]+v,c[3]+A,c[4]+v),p=c[3],y=c[4],_=c[1],T=c[2];break;case"z":case"Z":p=s,y=h,o.closePath();break}},_render:function(o){this._renderPathCommands(o),this._renderPaintInOrder(o)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(o){return e(this.callSuper("toObject",o),{path:this.path.map(function(c){return c.slice()})})},toDatalessObject:function(o){var c=this.toObject(["sourcePath"].concat(o));return c.sourcePath&&delete c.path,c},_toSVG:function(){var o=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',o,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var o=i.Object.NUM_FRACTION_DIGITS;return" translate("+t(-this.pathOffset.x,o)+", "+t(-this.pathOffset.y,o)+")"},toClipPathSVG:function(o){var c=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:c})},toSVG:function(o){var c=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:c})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var o=[],c=[],s,h=0,p=0,y=0,_=0,T,A=0,v=this.path.length;A<v;++A){switch(s=this.path[A],s[0]){case"L":y=s[1],_=s[2],T=[];break;case"M":y=s[1],_=s[2],h=y,p=_,T=[];break;case"C":T=i.util.getBoundsOfCurve(y,_,s[1],s[2],s[3],s[4],s[5],s[6]),y=s[5],_=s[6];break;case"Q":T=i.util.getBoundsOfCurve(y,_,s[1],s[2],s[1],s[2],s[3],s[4]),y=s[3],_=s[4];break;case"z":case"Z":y=h,_=p;break}T.forEach(function(bt){o.push(bt.x),c.push(bt.y)}),o.push(y),c.push(_)}var V=l(o)||0,tt=l(c)||0,pt=u(o)||0,_t=u(c)||0,Tt=pt-V,vt=_t-tt;return{left:V,top:tt,width:Tt,height:vt}}}),i.Path.fromObject=function(o,c){if(typeof o.sourcePath=="string"){var s=o.sourcePath;i.loadSVGFromURL(s,function(h){var p=h[0];p.setOptions(o),o.clipPath?i.util.enlivenObjects([o.clipPath],function(y){p.clipPath=y[0],c&&c(p)}):c&&c(p)})}else i.Object._fromObject("Path",o,c,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(o,c,s){var h=i.parseAttributes(o,i.Path.ATTRIBUTE_NAMES);h.fromSVG=!0,c(new i.Path(h.d,e(h,s)))}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.array.min,u=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,n,t){n=n||{},this._objects=[],t&&this.callSuper("initialize",n),this._objects=e||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;if(t)this._updateObjectsACoords();else{var c=n&&n.centerPoint;n.originX!==void 0&&(this.originX=n.originX),n.originY!==void 0&&(this.originY=n.originY),c||this._calcBounds(),this._updateObjectsCoords(c),delete n.centerPoint,this.callSuper("initialize",n)}this.setCoords()},_updateObjectsACoords:function(){for(var e=!0,n=this._objects.length;n--;)this._objects[n].setCoords(e)},_updateObjectsCoords:function(n){for(var n=n||this.getCenterPoint(),t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],n)},_updateObjectCoords:function(e,n){var t=e.left,o=e.top,c=!0;e.set({left:t-n.x,top:o-n.y}),e.group=this,e.setCoords(c)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),e&&(n&&i.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var t=this._objects.length;if(this.useSetOnGroup)for(;t--;)this._objects[t].setOnGroup(e,n);if(e==="canvas")for(;t--;)this._objects[t]._set(e,n);i.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,t=this._objects.filter(function(c){return!c.excludeFromExport}).map(function(c){var s=c.includeDefaultValues;c.includeDefaultValues=n;var h=c.toObject(e);return c.includeDefaultValues=s,h}),o=i.Object.prototype.toObject.call(this,e);return o.objects=t,o},toDatalessObject:function(e){var n,t=this.sourcePath;if(t)n=t;else{var o=this.includeDefaultValues;n=this._objects.map(function(s){var h=s.includeDefaultValues;s.includeDefaultValues=o;var p=s.toDatalessObject(e);return s.includeDefaultValues=h,p})}var c=i.Object.prototype.toDatalessObject.call(this,e);return c.objects=n,c},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=i.Object.prototype.shouldCache.call(this);if(e){for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return e},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var n=0,t=this._objects.length;n<t;n++)this._objects[n].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].isCacheDirty(!0)){if(this._cacheCanvas){var o=this.cacheWidth/this.zoomX,c=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-c/2,o,c)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(n){i.util.addTransformToObject(n,e),delete n.group,n.setCoords()}),this},destroy:function(){return this._objects.forEach(function(e){e.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var t=this.toObject();delete t.objects;var o=new i.ActiveSelection([]);return o.set(t),o.type="activeSelection",n.remove(this),e.forEach(function(c){c.group=o,c.dirty=!0,n.add(c)}),o.canvas=n,o._objects=e,n._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var e=!0;return this.forEachObject(function(n){n.setCoords(e)}),this},_calcBounds:function(e){for(var n=[],t=[],o,c,s,h=["tr","br","bl","tl"],p=0,y=this._objects.length,_,T=h.length;p<y;++p){for(o=this._objects[p],s=o.calcACoords(),_=0;_<T;_++)c=h[_],n.push(s[c].x),t.push(s[c].y);o.aCoords=s}this._getBounds(n,t,e)},_getBounds:function(e,n,t){var o=new i.Point(l(e),l(n)),c=new i.Point(u(e),u(n)),s=o.y||0,h=o.x||0,p=c.x-o.x||0,y=c.y-o.y||0;this.width=p,this.height=y,t||this.setPositionByOrigin({x:h,y:s},"left","top")},_toSVG:function(e){for(var n=["<g ","COMMON_PARTS",` >
`],t=0,o=this._objects.length;t<o;t++)n.push("		",this._objects[t].toSVG(e));return n.push(`</g>
`),n},getSvgStyles:function(){var e=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",n=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),n].join("")},toClipPathSVG:function(e){for(var n=[],t=0,o=this._objects.length;t<o;t++)n.push("	",this._objects[t].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(n,{reviver:e})}}),i.Group.fromObject=function(e,n){var t=e.objects,o=i.util.object.clone(e,!0);if(delete o.objects,typeof t=="string"){i.loadSVGFromURL(t,function(c){var s=i.util.groupSVGElements(c,e,t),h=o.clipPath;delete o.clipPath,s.set(o),h?i.util.enlivenObjects([h],function(p){s.clipPath=p[0],n&&n(s)}):n&&n(s)});return}i.util.enlivenObjects(t,function(c){i.util.enlivenObjectEnlivables(e,o,function(){n&&n(new i.Group(c,o,!0))})})})}(f),function(d){var i=d.fabric||(d.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(l,u){u=u||{},this._objects=l||[];for(var e=this._objects.length;e--;)this._objects[e].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var u=i.Object.prototype.toObject.call(this),e=new i.Group([]);if(delete u.type,e.set(u),l.forEach(function(t){t.canvas.remove(t),t.group=e}),e._objects=l,!this.canvas)return e;var n=this.canvas;return n.add(e),n._activeObject=e,e.setCoords(),e},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,u,e){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,u),e=e||{},typeof e.hasControls>"u"&&(e.hasControls=!1),e.forActiveSelection=!0;for(var n=0,t=this._objects.length;n<t;n++)this._objects[n]._renderControls(l,e);l.restore()}}),i.ActiveSelection.fromObject=function(l,u){i.util.enlivenObjects(l.objects,function(e){delete l.objects,u&&u(new i.ActiveSelection(e,l,!0))})})}(f),function(d){var i=r.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){r.warn("fabric.Image is already defined.");return}r.Image=r.util.createClass(r.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:r.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,u){u||(u={}),this.filters=[],this.cacheKey="texture"+r.Object.__uid++,this.callSuper("initialize",u),this._initElement(l,u)},getElement:function(){return this._element||{}},setElement:function(l,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var u=r.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){r.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-u,-e),l.lineTo(u,-e),l.lineTo(u,e),l.lineTo(-u,e),l.lineTo(-u,-e),l.closePath()}},toObject:function(l){var u=[];this.filters.forEach(function(n){n&&u.push(n.toObject())});var e=i(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(e.resizeFilter=this.resizeFilter.toObject()),e},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],u=[],e,n=this._element,t=-this.width/2,o=-this.height/2,c="",s="";if(!n)return[];if(this.hasCrop()){var h=r.Object.__uid++;l.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+t+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',t-this.cropX,'" y="',o-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,s,'"',c,`></image>
`),this.stroke||this.strokeDashArray){var p=this.fill;this.fill=null,e=["	<rect ",'x="',t,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=p}return this.paintFirst!=="fill"?l=l.concat(e,u):l=l.concat(u,e),l},getSrc:function(l){var u=l?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(l,u,e){return r.util.loadImage(l,function(n,t){this.setElement(n,e),this._setWidthHeight(),u&&u(this,t)},this,e&&e.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,u=this.minimumScaleTrigger,e=this.getTotalObjectScaling(),n=e.scaleX,t=e.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||n>u&&t>u){this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,this._lastScaleY=t;return}r.filterBackend||(r.filterBackend=r.initFilterBackend());var c=r.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,h=o.width,p=o.height;c.width=h,c.height=p,this._element=c,this._lastScaleX=l.scaleX=n,this._lastScaleY=l.scaleY=t,r.filterBackend.applyFilters([l],o,h,p,this._element,s),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(o){return o&&!o.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,e=u.naturalWidth||u.width,n=u.naturalHeight||u.height;if(this._element===this._originalElement){var t=r.util.createCanvasElement();t.width=e,t.height=n,this._element=t,this._filteredEl=t}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,e,n),this._lastScaleX=1,this._lastScaleY=1;return r.filterBackend||(r.filterBackend=r.initFilterBackend()),r.filterBackend.applyFilters(l,this._originalElement,e,n,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){r.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){r.util.setImageSmoothing(l,this.imageSmoothing),r.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var u=this._element;if(u){var e=this._filterScalingX,n=this._filterScalingY,t=this.width,o=this.height,c=Math.min,s=Math.max,h=s(this.cropX,0),p=s(this.cropY,0),y=u.naturalWidth||u.width,_=u.naturalHeight||u.height,T=h*e,A=p*n,v=c(t*e,y-T),V=c(o*n,_-A),tt=-t/2,pt=-o/2,_t=c(t,y/e-h),Tt=c(o,_/n-p);u&&l.drawImage(u,T,A,v,V,tt,pt,_t,Tt)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,u){this.setElement(r.util.getById(l),u),r.util.addClass(this.getElement(),r.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,u){l&&l.length?r.util.enlivenObjects(l,function(e){u&&u(e)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(l){l||(l={});var u=this.getElement();this.width=l.width||u.naturalWidth||u.width||0,this.height=l.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var l=r.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,e=this._element.height,n=1,t=1,o=0,c=0,s=0,h=0,p,y=this.width,_=this.height,T={width:y,height:_};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(n=t=r.util.findScaleToFit(this._element,T),p=(y-u*n)/2,l.alignX==="Min"&&(o=-p),l.alignX==="Max"&&(o=p),p=(_-e*t)/2,l.alignY==="Min"&&(c=-p),l.alignY==="Max"&&(c=p)),l.meetOrSlice==="slice"&&(n=t=r.util.findScaleToCover(this._element,T),p=u-y/n,l.alignX==="Mid"&&(s=p/2),l.alignX==="Max"&&(s=p),p=e-_/t,l.alignY==="Mid"&&(h=p/2),l.alignY==="Max"&&(h=p),u=y/n,e=_/t)):(n=y/u,t=_/e),{width:u,height:e,scaleX:n,scaleY:t,offsetLeft:o,offsetTop:c,cropX:s,cropY:h}}}),r.Image.CSS_CANVAS="canvas-img",r.Image.prototype.getSvgSrc=r.Image.prototype.getSrc,r.Image.fromObject=function(l,u){var e=r.util.object.clone(l);r.util.loadImage(e.src,function(n,t){if(t){u&&u(null,!0);return}r.Image.prototype._initFilters.call(e,e.filters,function(o){e.filters=o||[],r.Image.prototype._initFilters.call(e,[e.resizeFilter],function(c){e.resizeFilter=c[0],r.util.enlivenObjectEnlivables(e,e,function(){var s=new r.Image(n,e);u(s,!1)})})})},null,e.crossOrigin)},r.Image.fromURL=function(l,u,e){r.util.loadImage(l,function(n,t){u&&u(new r.Image(n,e),t)},null,e&&e.crossOrigin)},r.Image.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),r.Image.fromElement=function(l,u,e){var n=r.parseAttributes(l,r.Image.ATTRIBUTE_NAMES);r.Image.fromURL(n["xlink:href"],u,i(e?r.util.object.clone(e):{},n))}}(f),r.util.object.extend(r.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(d){d=d||{};var i=function(){},l=d.onComplete||i,u=d.onChange||i,e=this;return r.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(n){e.rotate(n),u()},onComplete:function(){e.setCoords(),l()}})}}),r.util.object.extend(r.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function d(l,u){var e="precision "+u+` float;
void main(){}`,n=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(n,e),l.compileShader(n),!!l.getShaderParameter(n,l.COMPILE_STATUS)}r.isWebglSupported=function(l){if(r.isLikelyNode)return!1;l=l||r.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),e=u.getContext("webgl")||u.getContext("experimental-webgl"),n=!1;if(e){r.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),n=r.maxTextureSize>=l;for(var t=["highp","mediump","lowp"],o=0;o<3;o++)if(d(e,t[o])){r.webGlPrecision=t[o];break}}return this.isSupported=n,n},r.WebglFilterBackend=i;function i(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(l,u){this.dispose(),this.createWebGLCanvas(l,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,u)},chooseFastestCopyGLTo2DMethod:function(l,u){var e=typeof window.performance<"u",n;try{new ImageData(1,1),n=!0}catch{n=!1}var t=typeof ArrayBuffer<"u",o=typeof Uint8ClampedArray<"u";if(e&&n&&t&&o){var c=r.util.createCanvasElement(),s=new ArrayBuffer(l*u*4);if(r.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=z;return}var h={imageBuffer:s,destinationWidth:l,destinationHeight:u,targetCanvas:c},p,y,_;c.width=l,c.height=u,p=window.performance.now(),P.call(h,this.gl,h),y=window.performance.now()-p,p=window.performance.now(),z.call(h,this.gl,h),_=window.performance.now()-p,y>_?(this.imageBuffer=s,this.copyGLTo2D=z):this.copyGLTo2D=P}},createWebGLCanvas:function(l,u){var e=r.util.createCanvasElement();e.width=l,e.height=u;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},t=e.getContext("webgl",n);t||(t=e.getContext("experimental-webgl",n)),t&&(t.clearColor(0,0,0,0),this.canvas=e,this.gl=t)},applyFilters:function(l,u,e,n,t,o){var c=this.gl,s;o&&(s=this.getCachedTexture(o,u));var h={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:e,sourceHeight:n,destinationWidth:e,destinationHeight:n,context:c,sourceTexture:this.createTexture(c,e,n,!s&&u),targetTexture:this.createTexture(c,e,n),originalTexture:s||this.createTexture(c,e,n,!s&&u),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:t},p=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,p),l.forEach(function(y){y&&y.applyTo(h)}),O(h),this.copyGLTo2D(c,h),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(h.sourceTexture),c.deleteTexture(h.targetTexture),c.deleteFramebuffer(p),t.getContext("2d").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,u,e,n,t){var o=l.createTexture();return l.bindTexture(l.TEXTURE_2D,o),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),n?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,n):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,u,e,0,l.RGBA,l.UNSIGNED_BYTE,null),o},getCachedTexture:function(l,u){if(this.textureCache[l])return this.textureCache[l];var e=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[l]=e,e},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:P,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,u={renderer:"",vendor:""};if(!l)return u;var e=l.getExtension("WEBGL_debug_renderer_info");if(e){var n=l.getParameter(e.UNMASKED_RENDERER_WEBGL),t=l.getParameter(e.UNMASKED_VENDOR_WEBGL);n&&(u.renderer=n.toLowerCase()),t&&(u.vendor=t.toLowerCase())}return this.gpuInfo=u,u}}}();function O(d){var i=d.targetCanvas,l=i.width,u=i.height,e=d.destinationWidth,n=d.destinationHeight;(l!==e||u!==n)&&(i.width=e,i.height=n)}function P(d,i){var l=d.canvas,u=i.targetCanvas,e=u.getContext("2d");e.translate(0,u.height),e.scale(1,-1);var n=l.height-u.height;e.drawImage(l,0,n,u.width,u.height,0,0,u.width,u.height)}function z(d,i){var l=i.targetCanvas,u=l.getContext("2d"),e=i.destinationWidth,n=i.destinationHeight,t=e*n*4,o=new Uint8Array(this.imageBuffer,0,t),c=new Uint8ClampedArray(this.imageBuffer,0,t);d.readPixels(0,0,e,n,d.RGBA,d.UNSIGNED_BYTE,o);var s=new ImageData(c,e,n);u.putImageData(s,0,0)}(function(){var d=function(){};r.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(l,u,e,n,t){var o=t.getContext("2d");o.drawImage(u,0,0,e,n);var c=o.getImageData(0,0,e,n),s=o.getImageData(0,0,e,n),h={sourceWidth:e,sourceHeight:n,imageData:c,originalEl:u,originalImageData:s,canvasEl:t,ctx:o,filterBackend:this};return l.forEach(function(p){p.applyTo(h)}),(h.imageData.width!==e||h.imageData.height!==n)&&(t.width=h.imageData.width,t.height=h.imageData.height),o.putImageData(h.imageData,0,0),h}}})(),r.Image=r.Image||{},r.Image.filters=r.Image.filters||{},r.Image.filters.BaseFilter=r.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var i in d)this[i]=d[i]},createProgram:function(d,i,l){i=i||this.fragmentSource,l=l||this.vertexSource,r.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+r.webGlPrecision+" float"));var u=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(u,l),d.compileShader(u),!d.getShaderParameter(u,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(u));var e=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(e,i),d.compileShader(e),!d.getShaderParameter(e,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(e));var n=d.createProgram();if(d.attachShader(n,u),d.attachShader(n,e),d.linkProgram(n),!d.getProgramParameter(n,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(n));var t=this.getAttributeLocations(d,n),o=this.getUniformLocations(d,n)||{};return o.uStepW=d.getUniformLocation(n,"uStepW"),o.uStepH=d.getUniformLocation(n,"uStepH"),{program:n,attributeLocations:t,uniformLocations:o}},getAttributeLocations:function(d,i){return{aPosition:d.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,i,l){var u=i.aPosition,e=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,e),d.enableVertexAttribArray(u),d.vertexAttribPointer(u,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,l,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var i=d.context,l,u;d.passes>1?(l=d.destinationWidth,u=d.destinationHeight,(d.sourceWidth!==l||d.sourceHeight!==u)&&(i.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(i,l,u)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,d.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(d){d.passes--,d.pass++;var i=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=i},isNeutralState:function(){var d=this.mainParameter,i=r.Image.filters[this.type].prototype;if(d)if(Array.isArray(i[d])){for(var l=i[d].length;l--;)if(this[d][l]!==i[d][l])return!1;return!0}else return i[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var i=d.context,l=this.retrieveShader(d);d.pass===0&&d.originalTexture?i.bindTexture(i.TEXTURE_2D,d.originalTexture):i.bindTexture(i.TEXTURE_2D,d.sourceTexture),i.useProgram(l.program),this.sendAttributeData(i,l.attributeLocations,d.aPosition),i.uniform1f(l.uniformLocations.uStepW,1/d.sourceWidth),i.uniform1f(l.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(i,l.uniformLocations),i.viewport(0,0,d.destinationWidth,d.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,i,l){d.activeTexture(l),d.bindTexture(d.TEXTURE_2D,i),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,i){d.activeTexture(i),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var i=document.createElement("canvas");i.width=d.sourceWidth,i.height=d.sourceHeight,d.helpLayer=i}},toObject:function(){var d={type:this.type},i=this.mainParameter;return i&&(d[i]=this[i]),d},toJSON:function(){return this.toObject()}}),r.Image.filters.BaseFilter.fromObject=function(d,i){var l=new r.Image.filters[d.type](d);return i&&i(l),l},function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.ColorMatrix=u(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var n=e.imageData,t=n.data,o=t.length,c=this.matrix,s,h,p,y,_,T=this.colorsOnly;for(_=0;_<o;_+=4)s=t[_],h=t[_+1],p=t[_+2],T?(t[_]=s*c[0]+h*c[1]+p*c[2]+c[4]*255,t[_+1]=s*c[5]+h*c[6]+p*c[7]+c[9]*255,t[_+2]=s*c[10]+h*c[11]+p*c[12]+c[14]*255):(y=t[_+3],t[_]=s*c[0]+h*c[1]+p*c[2]+y*c[3]+c[4]*255,t[_+1]=s*c[5]+h*c[6]+p*c[7]+y*c[8]+c[9]*255,t[_+2]=s*c[10]+h*c[11]+p*c[12]+y*c[13]+c[14]*255,t[_+3]=s*c[15]+h*c[16]+p*c[17]+y*c[18]+c[19]*255)},getUniformLocations:function(e,n){return{uColorMatrix:e.getUniformLocation(n,"uColorMatrix"),uConstants:e.getUniformLocation(n,"uConstants")}},sendUniformData:function(e,n){var t=this.matrix,o=[t[0],t[1],t[2],t[3],t[5],t[6],t[7],t[8],t[10],t[11],t[12],t[13],t[15],t[16],t[17],t[18]],c=[t[4],t[9],t[14],t[19]];e.uniformMatrix4fv(n.uColorMatrix,!1,o),e.uniform4fv(n.uConstants,c)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Brightness=u(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(this.brightness!==0){var n=e.imageData,t=n.data,o,c=t.length,s=Math.round(this.brightness*255);for(o=0;o<c;o+=4)t[o]=t[o]+s,t[o+1]=t[o+1]+s,t[o+2]=t[o+2]+s}},getUniformLocations:function(e,n){return{uBrightness:e.getUniformLocation(n,"uBrightness")}},sendUniformData:function(e,n){e.uniform1f(n.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.Image.filters,e=i.util.createClass;u.Convolute=e(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(n){var t=Math.sqrt(this.matrix.length),o=this.type+"_"+t+"_"+(this.opaque?1:0),c=this.fragmentSource[o];return n.programCache.hasOwnProperty(o)||(n.programCache[o]=this.createProgram(n.context,c)),n.programCache[o]},applyTo2d:function(n){var t=n.imageData,o=t.data,c=this.matrix,s=Math.round(Math.sqrt(c.length)),h=Math.floor(s/2),p=t.width,y=t.height,_=n.ctx.createImageData(p,y),T=_.data,A=this.opaque?1:0,v,V,tt,pt,_t,Tt,vt,bt,wt,Et,St,xt,D;for(St=0;St<y;St++)for(Et=0;Et<p;Et++){for(_t=(St*p+Et)*4,v=0,V=0,tt=0,pt=0,D=0;D<s;D++)for(xt=0;xt<s;xt++)vt=St+D-h,Tt=Et+xt-h,!(vt<0||vt>=y||Tt<0||Tt>=p)&&(bt=(vt*p+Tt)*4,wt=c[D*s+xt],v+=o[bt]*wt,V+=o[bt+1]*wt,tt+=o[bt+2]*wt,A||(pt+=o[bt+3]*wt));T[_t]=v,T[_t+1]=V,T[_t+2]=tt,A?T[_t+3]=o[_t+3]:T[_t+3]=pt}n.imageData=_},getUniformLocations:function(n,t){return{uMatrix:n.getUniformLocation(t,"uMatrix"),uOpaque:n.getUniformLocation(t,"uOpaque"),uHalfSize:n.getUniformLocation(t,"uHalfSize"),uSize:n.getUniformLocation(t,"uSize")}},sendUniformData:function(n,t){n.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Grayscale=u(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(e){var n=e.imageData,t=n.data,o,c=t.length,s,h=this.mode;for(o=0;o<c;o+=4)h==="average"?s=(t[o]+t[o+1]+t[o+2])/3:h==="lightness"?s=(Math.min(t[o],t[o+1],t[o+2])+Math.max(t[o],t[o+1],t[o+2]))/2:h==="luminosity"&&(s=.21*t[o]+.72*t[o+1]+.07*t[o+2]),t[o]=s,t[o+1]=s,t[o+2]=s},retrieveShader:function(e){var n=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(n)){var t=this.fragmentSource[this.mode];e.programCache[n]=this.createProgram(e.context,t)}return e.programCache[n]},getUniformLocations:function(e,n){return{uMode:e.getUniformLocation(n,"uMode")}},sendUniformData:function(e,n){var t=1;e.uniform1i(n.uMode,t)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Invert=u(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(e){var n=e.imageData,t=n.data,o,c=t.length;for(o=0;o<c;o+=4)t[o]=255-t[o],t[o+1]=255-t[o+1],t[o+2]=255-t[o+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,n){return{uInvert:e.getUniformLocation(n,"uInvert")}},sendUniformData:function(e,n){e.uniform1i(n.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.Image.filters,e=i.util.createClass;u.Noise=e(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(n){if(this.noise!==0){var t=n.imageData,o=t.data,c,s=o.length,h=this.noise,p;for(c=0,s=o.length;c<s;c+=4)p=(.5-Math.random())*h,o[c]+=p,o[c+1]+=p,o[c+2]+=p}},getUniformLocations:function(n,t){return{uNoise:n.getUniformLocation(t,"uNoise"),uSeed:n.getUniformLocation(t,"uSeed")}},sendUniformData:function(n,t){n.uniform1f(t.uNoise,this.noise/255),n.uniform1f(t.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Pixelate=u(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(e){var n=e.imageData,t=n.data,o=n.height,c=n.width,s,h,p,y,_,T,A,v,V,tt,pt;for(h=0;h<o;h+=this.blocksize)for(p=0;p<c;p+=this.blocksize)for(s=h*4*c+p*4,y=t[s],_=t[s+1],T=t[s+2],A=t[s+3],tt=Math.min(h+this.blocksize,o),pt=Math.min(p+this.blocksize,c),v=h;v<tt;v++)for(V=p;V<pt;V++)s=v*4*c+V*4,t[s]=y,t[s+1]=_,t[s+2]=T,t[s+3]=A},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(e,n){return{uBlocksize:e.getUniformLocation(n,"uBlocksize"),uStepW:e.getUniformLocation(n,"uStepW"),uStepH:e.getUniformLocation(n,"uStepH")}},sendUniformData:function(e,n){e.uniform1f(n.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,u=i.Image.filters,e=i.util.createClass;u.RemoveColor=e(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(n){var t=n.imageData,o=t.data,c,s=this.distance*255,h,p,y,_=new i.Color(this.color).getSource(),T=[_[0]-s,_[1]-s,_[2]-s],A=[_[0]+s,_[1]+s,_[2]+s];for(c=0;c<o.length;c+=4)h=o[c],p=o[c+1],y=o[c+2],h>T[0]&&p>T[1]&&y>T[2]&&h<A[0]&&p<A[1]&&y<A[2]&&(o[c+3]=0)},getUniformLocations:function(n,t){return{uLow:n.getUniformLocation(t,"uLow"),uHigh:n.getUniformLocation(t,"uHigh")}},sendUniformData:function(n,t){var o=new i.Color(this.color).getSource(),c=parseFloat(this.distance),s=[0+o[0]/255-c,0+o[1]/255-c,0+o[2]/255-c,1],h=[o[0]/255+c,o[1]/255+c,o[2]/255+c,1];n.uniform4fv(t.uLow,s),n.uniform4fv(t.uHigh,h)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass,e={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var n in e)l[n]=u(l.ColorMatrix,{type:n,matrix:e[n],mainParameter:!1,colorsOnly:!0}),i.Image.filters[n].fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric,l=i.Image.filters,u=i.util.createClass;l.BlendColor=u(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(e){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[e]+`}
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n=e.imageData,t=n.data,o=t.length,c,s,h,p,y,_,T,A=1-this.alpha;T=new i.Color(this.color).getSource(),c=T[0]*this.alpha,s=T[1]*this.alpha,h=T[2]*this.alpha;for(var v=0;v<o;v+=4)switch(p=t[v],y=t[v+1],_=t[v+2],this.mode){case"multiply":t[v]=p*c/255,t[v+1]=y*s/255,t[v+2]=_*h/255;break;case"screen":t[v]=255-(255-p)*(255-c)/255,t[v+1]=255-(255-y)*(255-s)/255,t[v+2]=255-(255-_)*(255-h)/255;break;case"add":t[v]=p+c,t[v+1]=y+s,t[v+2]=_+h;break;case"diff":case"difference":t[v]=Math.abs(p-c),t[v+1]=Math.abs(y-s),t[v+2]=Math.abs(_-h);break;case"subtract":t[v]=p-c,t[v+1]=y-s,t[v+2]=_-h;break;case"darken":t[v]=Math.min(p,c),t[v+1]=Math.min(y,s),t[v+2]=Math.min(_,h);break;case"lighten":t[v]=Math.max(p,c),t[v+1]=Math.max(y,s),t[v+2]=Math.max(_,h);break;case"overlay":t[v]=c<128?2*p*c/255:255-2*(255-p)*(255-c)/255,t[v+1]=s<128?2*y*s/255:255-2*(255-y)*(255-s)/255,t[v+2]=h<128?2*_*h/255:255-2*(255-_)*(255-h)/255;break;case"exclusion":t[v]=c+p-2*c*p/255,t[v+1]=s+y-2*s*y/255,t[v+2]=h+_-2*h*_/255;break;case"tint":t[v]=c+p*A,t[v+1]=s+y*A,t[v+2]=h+_*A}},getUniformLocations:function(e,n){return{uColor:e.getUniformLocation(n,"uColor")}},sendUniformData:function(e,n){var t=new i.Color(this.color).getSource();t[0]=this.alpha*t[0]/255,t[1]=this.alpha*t[1]/255,t[2]=this.alpha*t[2]/255,t[3]=this.alpha,e.uniform4fv(n.uColor,t)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric,l=i.Image.filters,u=i.util.createClass;l.BlendImage=u(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyToWebGL:function(e){var n=e.context,t=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(n,t,n.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(n,n.TEXTURE1)},createTexture:function(e,n){return e.getCachedTexture(n.cacheKey,n._element)},calculateMatrix:function(){var e=this.image,n=e._element.width,t=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/n,-e.top/t,1]},applyTo2d:function(e){var n=e.imageData,t=e.filterBackend.resources,o=n.data,c=o.length,s=n.width,h=n.height,p,y,_,T,A,v,V,tt,pt,_t,Tt=this.image,vt;t.blendImage||(t.blendImage=i.util.createCanvasElement()),pt=t.blendImage,_t=pt.getContext("2d"),pt.width!==s||pt.height!==h?(pt.width=s,pt.height=h):_t.clearRect(0,0,s,h),_t.setTransform(Tt.scaleX,0,0,Tt.scaleY,Tt.left,Tt.top),_t.drawImage(Tt._element,0,0,s,h),vt=_t.getImageData(0,0,s,h).data;for(var bt=0;bt<c;bt+=4)switch(A=o[bt],v=o[bt+1],V=o[bt+2],tt=o[bt+3],p=vt[bt],y=vt[bt+1],_=vt[bt+2],T=vt[bt+3],this.mode){case"multiply":o[bt]=A*p/255,o[bt+1]=v*y/255,o[bt+2]=V*_/255,o[bt+3]=tt*T/255;break;case"mask":o[bt+3]=T;break}},getUniformLocations:function(e,n){return{uTransformMatrix:e.getUniformLocation(n,"uTransformMatrix"),uImage:e.getUniformLocation(n,"uImage")}},sendUniformData:function(e,n){var t=this.calculateMatrix();e.uniform1i(n.uImage,1),e.uniformMatrix3fv(n.uTransformMatrix,!1,t)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(e,n){i.Image.fromObject(e.image,function(t){var o=i.util.object.clone(e);o.image=t,n(new i.Image.filters.BlendImage(o))})}}(f),function(d){var i=d.fabric||(d.fabric={}),l=Math.pow,u=Math.floor,e=Math.sqrt,n=Math.abs,t=Math.round,o=Math.sin,c=Math.ceil,s=i.Image.filters,h=i.util.createClass;s.Resize=h(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(p,y){return{uDelta:p.getUniformLocation(y,"uDelta"),uTaps:p.getUniformLocation(y,"uTaps")}},sendUniformData:function(p,y){p.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),p.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(p){var y=this.getFilterWindow(),_=this.type+"_"+y;if(!p.programCache.hasOwnProperty(_)){var T=this.generateShader(y);p.programCache[_]=this.createProgram(p.context,T)}return p.programCache[_]},getFilterWindow:function(){var p=this.tempScale;return Math.ceil(this.lanczosLobes/p)},getTaps:function(){for(var p=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,_=this.getFilterWindow(),T=new Array(_),A=1;A<=_;A++)T[A-1]=p(A*y);return T},generateShader:function(T){for(var y=new Array(T),_=this.fragmentSourceTOP,T,A=1;A<=T;A++)y[A-1]=A+".0 * uDelta";return _+="uniform float uTaps["+T+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,y.forEach(function(v,V){_+="  color += texture2D(uTexture, vTexCoord + "+v+") * uTaps["+V+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+v+") * uTaps["+V+`];
`,_+="  sum += 2.0 * uTaps["+V+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(p){p.webgl?(p.passes++,this.width=p.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=p.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),p.destinationWidth=this.dW,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceWidth=p.destinationWidth,this.height=p.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),p.destinationHeight=this.dH,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceHeight=p.destinationHeight):this.applyTo2d(p)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(p){return function(y){if(y>=p||y<=-p)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var _=y/p;return o(y)/y*o(_)/_}},applyTo2d:function(p){var y=p.imageData,_=this.scaleX,T=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/T;var A=y.width,v=y.height,V=t(A*_),tt=t(v*T),pt;this.resizeType==="sliceHack"?pt=this.sliceByTwo(p,A,v,V,tt):this.resizeType==="hermite"?pt=this.hermiteFastResize(p,A,v,V,tt):this.resizeType==="bilinear"?pt=this.bilinearFiltering(p,A,v,V,tt):this.resizeType==="lanczos"&&(pt=this.lanczosResize(p,A,v,V,tt)),p.imageData=pt},sliceByTwo:function(p,y,_,T,A){var v=p.imageData,V=.5,tt=!1,pt=!1,_t=y*V,Tt=_*V,vt=i.filterBackend.resources,bt,wt,Et=0,St=0,xt=y,D=0;for(vt.sliceByTwo||(vt.sliceByTwo=document.createElement("canvas")),bt=vt.sliceByTwo,(bt.width<y*1.5||bt.height<_)&&(bt.width=y*1.5,bt.height=_),wt=bt.getContext("2d"),wt.clearRect(0,0,y*1.5,_),wt.putImageData(v,0,0),T=u(T),A=u(A);!tt||!pt;)y=_t,_=Tt,T<u(_t*V)?_t=u(_t*V):(_t=T,tt=!0),A<u(Tt*V)?Tt=u(Tt*V):(Tt=A,pt=!0),wt.drawImage(bt,Et,St,y,_,xt,D,_t,Tt),Et=xt,St=D,D+=Tt;return wt.getImageData(Et,St,T,A)},lanczosResize:function(p,y,_,T,A){function v(N){var B,st,I,M,q,Q,ut,rt,ct,mt,F;for(D.x=(N+.5)*Tt,H.x=u(D.x),B=0;B<A;B++){for(D.y=(B+.5)*vt,H.y=u(D.y),q=0,Q=0,ut=0,rt=0,ct=0,st=H.x-Et;st<=H.x+Et;st++)if(!(st<0||st>=y)){mt=u(1e3*n(st-D.x)),xt[mt]||(xt[mt]={});for(var k=H.y-St;k<=H.y+St;k++)k<0||k>=_||(F=u(1e3*n(k-D.y)),xt[mt][F]||(xt[mt][F]=_t(e(l(mt*bt,2)+l(F*wt,2))/1e3)),I=xt[mt][F],I>0&&(M=(k*y+st)*4,q+=I,Q+=I*V[M],ut+=I*V[M+1],rt+=I*V[M+2],ct+=I*V[M+3]))}M=(B*T+N)*4,pt[M]=Q/q,pt[M+1]=ut/q,pt[M+2]=rt/q,pt[M+3]=ct/q}return++N<T?v(N):tt}var V=p.imageData.data,tt=p.ctx.createImageData(T,A),pt=tt.data,_t=this.lanczosCreate(this.lanczosLobes),Tt=this.rcpScaleX,vt=this.rcpScaleY,bt=2/this.rcpScaleX,wt=2/this.rcpScaleY,Et=c(Tt*this.lanczosLobes/2),St=c(vt*this.lanczosLobes/2),xt={},D={},H={};return v(0)},bilinearFiltering:function(p,y,_,T,A){var v,V,tt,pt,_t,Tt,vt,bt,wt,Et,St,xt,D=0,H,N=this.rcpScaleX,B=this.rcpScaleY,st=4*(y-1),I=p.imageData,M=I.data,q=p.ctx.createImageData(T,A),Q=q.data;for(vt=0;vt<A;vt++)for(bt=0;bt<T;bt++)for(_t=u(N*bt),Tt=u(B*vt),wt=N*bt-_t,Et=B*vt-Tt,H=4*(Tt*y+_t),St=0;St<4;St++)v=M[H+St],V=M[H+4+St],tt=M[H+st+St],pt=M[H+st+4+St],xt=v*(1-wt)*(1-Et)+V*wt*(1-Et)+tt*Et*(1-wt)+pt*wt*Et,Q[D++]=xt;return q},hermiteFastResize:function(p,y,_,T,A){for(var v=this.rcpScaleX,V=this.rcpScaleY,tt=c(v/2),pt=c(V/2),_t=p.imageData,Tt=_t.data,vt=p.ctx.createImageData(T,A),bt=vt.data,wt=0;wt<A;wt++)for(var Et=0;Et<T;Et++){for(var St=(Et+wt*T)*4,xt=0,D=0,H=0,N=0,B=0,st=0,I=0,M=(wt+.5)*V,q=u(wt*V);q<(wt+1)*V;q++)for(var Q=n(M-(q+.5))/pt,ut=(Et+.5)*v,rt=Q*Q,ct=u(Et*v);ct<(Et+1)*v;ct++){var mt=n(ut-(ct+.5))/tt,F=e(rt+mt*mt);F>1&&F<-1||(xt=2*F*F*F-3*F*F+1,xt>0&&(mt=4*(ct+q*y),I+=xt*Tt[mt+3],H+=xt,Tt[mt+3]<255&&(xt=xt*Tt[mt+3]/250),N+=xt*Tt[mt],B+=xt*Tt[mt+1],st+=xt*Tt[mt+2],D+=xt))}bt[St]=N/D,bt[St+1]=B/D,bt[St+2]=st/D,bt[St+3]=I/H}return vt},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Contrast=u(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(this.contrast!==0){var n=e.imageData,t,c,o=n.data,c=o.length,s=Math.floor(this.contrast*255),h=259*(s+255)/(255*(259-s));for(t=0;t<c;t+=4)o[t]=h*(o[t]-128)+128,o[t+1]=h*(o[t+1]-128)+128,o[t+2]=h*(o[t+2]-128)+128}},getUniformLocations:function(e,n){return{uContrast:e.getUniformLocation(n,"uContrast")}},sendUniformData:function(e,n){e.uniform1f(n.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Saturation=u(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(this.saturation!==0){var n=e.imageData,t=n.data,o=t.length,c=-this.saturation,s,h;for(s=0;s<o;s+=4)h=Math.max(t[s],t[s+1],t[s+2]),t[s]+=h!==t[s]?(h-t[s])*c:0,t[s+1]+=h!==t[s+1]?(h-t[s+1])*c:0,t[s+2]+=h!==t[s+2]?(h-t[s+2])*c:0}},getUniformLocations:function(e,n){return{uSaturation:e.getUniformLocation(n,"uSaturation")}},sendUniformData:function(e,n){e.uniform1f(n.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Vibrance=u(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(this.vibrance!==0){var n=e.imageData,t=n.data,o=t.length,c=-this.vibrance,s,h,p,y;for(s=0;s<o;s+=4)h=Math.max(t[s],t[s+1],t[s+2]),p=(t[s]+t[s+1]+t[s+2])/3,y=Math.abs(h-p)*2/255*c,t[s]+=h!==t[s]?(h-t[s])*y:0,t[s+1]+=h!==t[s+1]?(h-t[s+1])*y:0,t[s+2]+=h!==t[s+2]?(h-t[s+2])*y:0}},getUniformLocations:function(e,n){return{uVibrance:e.getUniformLocation(n,"uVibrance")}},sendUniformData:function(e,n){e.uniform1f(n.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Blur=u(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n=e.filterBackend.resources,t,o,c=e.imageData.width,s=e.imageData.height;n.blurLayer1||(n.blurLayer1=i.util.createCanvasElement(),n.blurLayer2=i.util.createCanvasElement()),t=n.blurLayer1,o=n.blurLayer2,(t.width!==c||t.height!==s)&&(o.width=t.width=c,o.height=t.height=s);var h=t.getContext("2d"),p=o.getContext("2d"),y=15,_,T,A,v,V=this.blur*.06*.5;for(h.putImageData(e.imageData,0,0),p.clearRect(0,0,c,s),v=-y;v<=y;v++)_=(Math.random()-.5)/4,T=v/y,A=V*T*c+_,p.globalAlpha=1-Math.abs(T),p.drawImage(t,A,_),h.drawImage(o,0,0),p.globalAlpha=1,p.clearRect(0,0,o.width,o.height);for(v=-y;v<=y;v++)_=(Math.random()-.5)/4,T=v/y,A=V*T*s+_,p.globalAlpha=1-Math.abs(T),p.drawImage(t,_,A),h.drawImage(o,0,0),p.globalAlpha=1,p.clearRect(0,0,o.width,o.height);e.ctx.drawImage(t,0,0);var tt=e.ctx.getImageData(0,0,t.width,t.height);return h.globalAlpha=1,h.clearRect(0,0,t.width,t.height),tt},getUniformLocations:function(e,n){return{delta:e.getUniformLocation(n,"uDelta")}},sendUniformData:function(e,n){var t=this.chooseRightDelta();e.uniform2fv(n.delta,t)},chooseRightDelta:function(){var e=1,n=[0,0],t;return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),l.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Gamma=u(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var n=e.imageData,t=n.data,o=this.gamma,c=t.length,s=1/o[0],h=1/o[1],p=1/o[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,c=256;y<c;y++)this.rVals[y]=Math.pow(y/255,s)*255,this.gVals[y]=Math.pow(y/255,h)*255,this.bVals[y]=Math.pow(y/255,p)*255;for(y=0,c=t.length;y<c;y+=4)t[y]=this.rVals[t[y]],t[y+1]=this.gVals[t[y+1]],t[y+2]=this.bVals[t[y+2]]},getUniformLocations:function(e,n){return{uGamma:e.getUniformLocation(n,"uGamma")}},sendUniformData:function(e,n){e.uniform3fv(n.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.Composed=u(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(n){n.applyTo(e)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(e,n){var t=e.subFilters||[],o=t.map(function(s){return new i.Image.filters[s.type](s)}),c=new i.Image.filters.Composed({subFilters:o});return n&&n(c),c}}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,u=i.util.createClass;l.HueRotation=u(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=i.util.cos(e),t=i.util.sin(e),o=1/3,c=Math.sqrt(o)*t,s=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+s/3,this.matrix[1]=o*s-c,this.matrix[2]=o*s+c,this.matrix[5]=o*s+c,this.matrix[6]=n+o*s,this.matrix[7]=o*s-c,this.matrix[10]=o*s-c,this.matrix[11]=o*s+c,this.matrix[12]=n+o*s},isNeutralState:function(e){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,e)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(u),cacheProperties:i.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,n){this.styles=n?n.styles||{}:{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",n),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=i.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,n,t,o,c,s,h,p=0,y=this._textLines.length;p<y;p++)if(!(this.textAlign!=="justify"&&(p===y-1||this.isEndOfWrapping(p)))&&(o=0,c=this._textLines[p],n=this.getLineWidth(p),n<this.width&&(h=this.textLines[p].match(this._reSpacesAndTabs)))){t=h.length,e=(this.width-n)/t;for(var _=0,T=c.length;_<=T;_++)s=this.__charBounds[p][_],this._reSpaceAndTab.test(c[_])?(s.width+=e,s.kernedWidth+=e,s.left+=o,o+=e):s.left+=o}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return e.width+=n*e.zoomX,e.height+=n*e.zoomY,e},_render:function(e){var n=this.path;n&&!n.isNotVisible()&&n._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){this.paintFirst==="stroke"?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,n,t){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom";break}e.font=this._getFontDeclaration(n,t)},calcTextWidth:function(){for(var e=this.getLineWidth(0),n=1,t=this._textLines.length;n<t;n++){var o=this.getLineWidth(n);o>e&&(e=o)}return e},_renderTextLine:function(e,n,t,o,c,s){this._renderChars(e,n,t,o,c,s)},_renderTextLinesBackground:function(e){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n,t,o=e.fillStyle,c,s,h=this._getLeftOffset(),p=this._getTopOffset(),y=0,_=0,T,A,v=this.path,V,tt=0,pt=this._textLines.length;tt<pt;tt++){if(n=this.getHeightOfLine(tt),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",tt)){p+=n;continue}c=this._textLines[tt],t=this._getLineLeftOffset(tt),_=0,y=0,s=this.getValueOfPropertyAt(tt,0,"textBackgroundColor");for(var _t=0,Tt=c.length;_t<Tt;_t++)T=this.__charBounds[tt][_t],A=this.getValueOfPropertyAt(tt,_t,"textBackgroundColor"),v?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=A,A&&e.fillRect(-T.width/2,-n/this.lineHeight*(1-this._fontSizeFraction),T.width,n/this.lineHeight),e.restore()):A!==s?(V=h+t+y,this.direction==="rtl"&&(V=this.width-V-_),e.fillStyle=s,s&&e.fillRect(V,p,_,n/this.lineHeight),y=T.left,_=T.width,s=A):_+=T.kernedWidth;A&&!v&&(V=h+t+y,this.direction==="rtl"&&(V=this.width-V-_),e.fillStyle=A,e.fillRect(V,p,_,n/this.lineHeight)),p+=n}e.fillStyle=o,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();i.charWidthsCache[n]||(i.charWidthsCache[n]={});var t=i.charWidthsCache[n],o=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return t[o]||(t[o]={}),t[o]},_measureChar:function(e,n,t,o){var c=this.getFontCache(n),s=this._getFontDeclaration(n),h=this._getFontDeclaration(o),p=t+e,y=s===h,_,T,A,v=n.fontSize/this.CACHE_FONT_SIZE,V;if(t&&c[t]!==void 0&&(A=c[t]),c[e]!==void 0&&(V=_=c[e]),y&&c[p]!==void 0&&(T=c[p],V=T-A),_===void 0||A===void 0||T===void 0){var tt=this.getMeasuringContext();this._setTextStyles(tt,n,!0)}return _===void 0&&(V=_=tt.measureText(e).width,c[e]=_),A===void 0&&y&&t&&(A=tt.measureText(t).width,c[t]=A),y&&T===void 0&&(T=tt.measureText(p).width,c[p]=T,V=T-A),{width:_*v,kernedWidth:V*v}},getHeightOfChar:function(e,n){return this.getValueOfPropertyAt(e,n,"fontSize")},measureLine:function(e){var n=this._measureLine(e);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(e){var n=0,t,o,c=this._textLines[e],s,h,p=0,y=new Array(c.length),_=0,T,A,v=this.path,V=this.pathSide==="right";for(this.__charBounds[e]=y,t=0;t<c.length;t++)o=c[t],h=this._getGraphemeBox(o,e,t,s),y[t]=h,n+=h.kernedWidth,s=o;if(y[t]={left:h?h.left+h.width:0,width:0,kernedWidth:0,height:this.fontSize},v){switch(A=v.segmentsInfo[v.segmentsInfo.length-1].length,T=i.util.getPointOnPath(v.path,0,v.segmentsInfo),T.x+=v.pathOffset.x,T.y+=v.pathOffset.y,this.textAlign){case"left":_=V?A-n:0;break;case"center":_=(A-n)/2;break;case"right":_=V?0:A-n;break}for(_+=this.pathStartOffset*(V?-1:1),t=V?c.length-1:0;V?t>=0:t<c.length;V?t--:t++)h=y[t],_>A?_%=A:_<0&&(_+=A),this._setGraphemeOnPath(_,h,T),_+=h.kernedWidth}return{width:n,numOfSpaces:p}},_setGraphemeOnPath:function(e,n,t){var o=e+n.kernedWidth/2,c=this.path,s=i.util.getPointOnPath(c.path,o,c.segmentsInfo);n.renderLeft=s.x-t.x,n.renderTop=s.y-t.y,n.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(e,n,t,o,c){var s=this.getCompleteStyleDeclaration(n,t),h=o?this.getCompleteStyleDeclaration(n,t-1):{},p=this._measureChar(e,s,o,h),y=p.kernedWidth,_=p.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),_+=T,y+=T);var A={width:_,left:0,height:s.fontSize,kernedWidth:y,deltaY:s.deltaY};if(t>0&&!c){var v=this.__charBounds[n][t-1];A.left=v.left+v.width+p.kernedWidth-p.width}return A},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],t=this.getHeightOfChar(e,0),o=1,c=n.length;o<c;o++)t=Math.max(this.getHeightOfChar(e,o),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,n=0,t=0,o=this._textLines.length;t<o;t++)e=this.getHeightOfLine(t),n+=t===o-1?e/this.lineHeight:e;return n},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,n){e.save();for(var t=0,o=this._getLeftOffset(),c=this._getTopOffset(),s=0,h=this._textLines.length;s<h;s++){var p=this.getHeightOfLine(s),y=p/this.lineHeight,_=this._getLineLeftOffset(s);this._renderTextLine(n,e,this._textLines[s],o+_,c+t+y,s),t+=p}e.restore()},_renderTextFill:function(e){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,n,t,o,c,s){var h=this.getHeightOfLine(s),p=this.textAlign.indexOf("justify")!==-1,y,_,T="",A,v=0,V,tt=this.path,pt=!p&&this.charSpacing===0&&this.isEmptyStyles(s)&&!tt,_t=this.direction==="ltr",Tt=this.direction==="ltr"?1:-1,vt,bt=n.canvas.getAttribute("dir");if(n.save(),bt!==this.direction&&(n.canvas.setAttribute("dir",_t?"ltr":"rtl"),n.direction=_t?"ltr":"rtl",n.textAlign=_t?"left":"right"),c-=h*this._fontSizeFraction/this.lineHeight,pt){this._renderChar(e,n,s,0,t.join(""),o,c,h),n.restore();return}for(var wt=0,Et=t.length-1;wt<=Et;wt++)V=wt===Et||this.charSpacing||tt,T+=t[wt],A=this.__charBounds[s][wt],v===0?(o+=Tt*(A.kernedWidth-A.width),v+=A.width):v+=A.kernedWidth,p&&!V&&this._reSpaceAndTab.test(t[wt])&&(V=!0),V||(y=y||this.getCompleteStyleDeclaration(s,wt),_=this.getCompleteStyleDeclaration(s,wt+1),V=i.util.hasStyleChanged(y,_,!1)),V&&(tt?(n.save(),n.translate(A.renderLeft,A.renderTop),n.rotate(A.angle),this._renderChar(e,n,s,wt,T,-v/2,0,h),n.restore()):(vt=o,this._renderChar(e,n,s,wt,T,vt,c,h)),T="",y=_,o+=Tt*v,v=0);n.restore()},_applyPatternGradientTransformText:function(e){var n=i.util.createCanvasElement(),t,o=this.width+this.strokeWidth,c=this.height+this.strokeWidth;return n.width=o,n.height=c,t=n.getContext("2d"),t.beginPath(),t.moveTo(0,0),t.lineTo(o,0),t.lineTo(o,c),t.lineTo(0,c),t.closePath(),t.translate(o/2,c/2),t.fillStyle=e.toLive(t),this._applyPatternGradientTransform(t,e),t.fill(),t.createPattern(n,"no-repeat")},handleFiller:function(e,n,t){var o,c;return t.toLive?t.gradientUnits==="percentage"||t.gradientTransform||t.patternTransform?(o=-this.width/2,c=-this.height/2,e.translate(o,c),e[n]=this._applyPatternGradientTransformText(t),{offsetX:o,offsetY:c}):(e[n]=t.toLive(e,this),this._applyPatternGradientTransform(e,t)):(e[n]=t,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,n){return e.lineWidth=n.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n.stroke)},_setFillStyles:function(e,n){return this.handleFiller(e,"fillStyle",n.fill)},_renderChar:function(e,n,t,o,c,s,h){var p=this._getStyleDeclaration(t,o),y=this.getCompleteStyleDeclaration(t,o),_=e==="fillText"&&y.fill,T=e==="strokeText"&&y.stroke&&y.strokeWidth,A,v;!T&&!_||(n.save(),_&&(A=this._setFillStyles(n,y)),T&&(v=this._setStrokeStyles(n,y)),n.font=this._getFontDeclaration(y),p&&p.textBackgroundColor&&this._removeShadow(n),p&&p.deltaY&&(h+=p.deltaY),_&&n.fillText(c,s-A.offsetX,h-A.offsetY),T&&n.strokeText(c,s-v.offsetX,h-v.offsetY),n.restore())},setSuperscript:function(e,n){return this._setScript(e,n,this.superscript)},setSubscript:function(e,n){return this._setScript(e,n,this.subscript)},_setScript:function(e,n,t){var o=this.get2DCursorLocation(e,!0),c=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),h={fontSize:c*t.size,deltaY:s+c*t.baseline};return this.setSelectionStyles(h,e,n),this},_getLineLeftOffset:function(e){var n=this.getLineWidth(e),t=this.width-n,o=this.textAlign,c=this.direction,h,s=0,h=this.isEndOfWrapping(e);return o==="justify"||o==="justify-center"&&!h||o==="justify-right"&&!h||o==="justify-left"&&!h?0:(o==="center"&&(s=t/2),o==="right"&&(s=t),o==="justify-center"&&(s=t/2),o==="justify-right"&&(s=t),c==="rtl"&&(s-=t),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];var n=this.measureLine(e),t=n.width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,n,t){var o=this._getStyleDeclaration(e,n);return o&&typeof o[t]<"u"?o[t]:this[t]},_renderTextDecoration:function(e,n){if(!(!this[n]&&!this.styleHas(n))){for(var t,o,c,s,h,p,y,_,T=this._getLeftOffset(),A=this._getTopOffset(),v,V,tt,pt,_t,Tt,vt,bt,wt=this.path,Et=this._getWidthOfCharSpacing(),St=this.offsets[n],xt=0,D=this._textLines.length;xt<D;xt++){if(t=this.getHeightOfLine(xt),!this[n]&&!this.styleHas(n,xt)){A+=t;continue}y=this._textLines[xt],Tt=t/this.lineHeight,s=this._getLineLeftOffset(xt),V=0,tt=0,_=this.getValueOfPropertyAt(xt,0,n),bt=this.getValueOfPropertyAt(xt,0,"fill"),v=A+Tt*(1-this._fontSizeFraction),o=this.getHeightOfChar(xt,0),h=this.getValueOfPropertyAt(xt,0,"deltaY");for(var H=0,N=y.length;H<N;H++)if(pt=this.__charBounds[xt][H],_t=this.getValueOfPropertyAt(xt,H,n),vt=this.getValueOfPropertyAt(xt,H,"fill"),c=this.getHeightOfChar(xt,H),p=this.getValueOfPropertyAt(xt,H,"deltaY"),wt&&_t&&vt)e.save(),e.fillStyle=bt,e.translate(pt.renderLeft,pt.renderTop),e.rotate(pt.angle),e.fillRect(-pt.kernedWidth/2,St*c+p,pt.kernedWidth,this.fontSize/15),e.restore();else if((_t!==_||vt!==bt||c!==o||p!==h)&&tt>0){var B=T+s+V;this.direction==="rtl"&&(B=this.width-B-tt),_&&bt&&(e.fillStyle=bt,e.fillRect(B,v+St*o+h,tt,this.fontSize/15)),V=pt.left,tt=pt.width,_=_t,bt=vt,o=c,h=p}else tt+=pt.kernedWidth;var B=T+s+V;this.direction==="rtl"&&(B=this.width-B-tt),e.fillStyle=vt,_t&&vt&&e.fillRect(B,v+St*o+h,tt-Et,this.fontSize/15),A+=t}this._removeShadow(e)}},_getFontDeclaration:function(e,n){var t=e||this,o=this.fontFamily,c=i.Text.genericFonts.indexOf(o.toLowerCase())>-1,s=o===void 0||o.indexOf("'")>-1||o.indexOf(",")>-1||o.indexOf('"')>-1||c?t.fontFamily:'"'+t.fontFamily+'"';return[i.isLikelyNode?t.fontWeight:t.fontStyle,i.isLikelyNode?t.fontStyle:t.fontWeight,n?this.CACHE_FONT_SIZE+"px":t.fontSize+"px",s].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),t=new Array(n.length),o=[`
`],c=[],s=0;s<n.length;s++)t[s]=i.util.string.graphemeSplit(n[s]),c=c.concat(t[s],o);return c.pop(),{_unwrappedLines:t,lines:n,graphemeText:c,graphemeLines:t}},toObject:function(e){var n=u.concat(e),t=this.callSuper("toObject",n);return t.styles=i.util.stylesToArray(this.styles,this.text),t.path&&(t.path=this.path.toObject()),t},set:function(e,n){this.callSuper("set",e,n);var t=!1,o=!1;if(typeof e=="object")for(var c in e)c==="path"&&this.setPathInfo(),t=t||this._dimensionAffectingProps.indexOf(c)!==-1,o=o||c==="path";else t=this._dimensionAffectingProps.indexOf(e)!==-1,o=e==="path";return o&&this.setPathInfo(),t&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(e,n,t){if(!e)return n(null);var o=i.parseAttributes(e,i.Text.ATTRIBUTE_NAMES),c=o.textAnchor||"left";if(t=i.util.object.extend(t?l(t):{},o),t.top=t.top||0,t.left=t.left||0,o.textDecoration){var s=o.textDecoration;s.indexOf("underline")!==-1&&(t.underline=!0),s.indexOf("overline")!==-1&&(t.overline=!0),s.indexOf("line-through")!==-1&&(t.linethrough=!0),delete t.textDecoration}"dx"in o&&(t.left+=o.dx),"dy"in o&&(t.top+=o.dy),"fontSize"in t||(t.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var h="";"textContent"in e?h=e.textContent:"firstChild"in e&&e.firstChild!==null&&"data"in e.firstChild&&e.firstChild.data!==null&&(h=e.firstChild.data),h=h.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var p=t.strokeWidth;t.strokeWidth=0;var y=new i.Text(h,t),_=y.getScaledHeight()/y.height,T=(y.height+y.strokeWidth)*y.lineHeight-y.height,A=T*_,v=y.getScaledHeight()+A,V=0;c==="center"&&(V=y.getScaledWidth()/2),c==="right"&&(V=y.getScaledWidth()),y.set({left:y.left-V,top:y.top-(v-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof p<"u"?p:1}),n(y)},i.Text.fromObject=function(e,n){var t=l(e),o=e.path;return delete t.path,i.Object._fromObject("Text",t,function(c){c.styles=i.util.stylesFromArray(e.styles,e.text),o?i.Object._fromObject("Path",o,function(s){c.set("path",s),n(c)},"path"):n(c)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(f),function(){r.util.object.extend(r.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var i=typeof d>"u"?this.styles:{line:this.styles[d]};for(var l in i)for(var u in i[l])for(var e in i[l][u])return!1;return!0},styleHas:function(d,i){if(!this.styles||!d||d===""||typeof i<"u"&&!this.styles[i])return!1;var l=typeof i>"u"?this.styles:{0:this.styles[i]};for(var u in l)for(var e in l[u])if(typeof l[u][e][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var i=this.styles,l=0,u,e,n=!0,t=0,o;for(var c in i){u=0;for(var s in i[c]){var o=i[c][s],h=o.hasOwnProperty(d);l++,h?(e?o[d]!==e&&(n=!1):e=o[d],o[d]===this[d]&&delete o[d]):n=!1,Object.keys(o).length!==0?u++:delete i[c][s]}u===0&&delete i[c]}for(var p=0;p<this._textLines.length;p++)t+=this._textLines[p].length;n&&l===t&&(this[d]=e,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var i=this.styles,l,u,e;for(u in i){l=i[u];for(e in l)delete l[e][d],Object.keys(l[e]).length===0&&delete l[e];Object.keys(l).length===0&&delete i[u]}}},_extendStyles:function(d,i){var l=this.get2DCursorLocation(d);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),r.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),i)},get2DCursorLocation:function(d,i){typeof d>"u"&&(d=this.selectionStart);for(var l=i?this._unwrappedTextLines:this._textLines,u=l.length,e=0;e<u;e++){if(d<=l[e].length)return{lineIndex:e,charIndex:d};d-=l[e].length+this.missingNewlineOffset(e)}return{lineIndex:e-1,charIndex:l[e-1].length<d?l[e-1].length:d}},getSelectionStyles:function(d,i,l){typeof d>"u"&&(d=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||d);for(var u=[],e=d;e<i;e++)u.push(this.getStyleAtPosition(e,l));return u},getStyleAtPosition:function(d,i){var l=this.get2DCursorLocation(d),u=i?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return u||{}},setSelectionStyles:function(d,i,l){typeof i>"u"&&(i=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||i);for(var u=i;u<l;u++)this._extendStyles(u,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,i){var l=this.styles&&this.styles[d];return l?l[i]:null},getCompleteStyleDeclaration:function(d,i){for(var l=this._getStyleDeclaration(d,i)||{},u={},e,n=0;n<this._styleProperties.length;n++)e=this._styleProperties[n],u[e]=typeof l[e]>"u"?this[e]:l[e];return u},_setStyleDeclaration:function(d,i,l){this.styles[d][i]=l},_deleteStyleDeclaration:function(d,i){delete this.styles[d][i]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}r.IText=r.util.createClass(r.Text,r.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,l){this.callSuper("initialize",i,l),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,l){this[i]!==l&&(this._fireSelectionChanged(),this[i]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,u=this.canvas.viewportTransform;l.save(),l.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(l),this._clearTextArea(l),i||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,l):this.renderSelection(i,l),l.restore()}},_clearTextArea:function(i){var l=this.width+4,u=this.height+4;i.clearRect(-l/2,-u/2,l,u)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var l=this._getLeftOffset(),u=this._getTopOffset(),e=this._getCursorBoundariesOffsets(i);return{left:l,top:u,leftOffset:e.left,topOffset:e.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,u,e,n=0,t=0,o,c=this.get2DCursorLocation(i);e=c.charIndex,u=c.lineIndex;for(var s=0;s<u;s++)n+=this.getHeightOfLine(s);l=this._getLineLeftOffset(u);var h=this.__charBounds[u][e];return h&&(t=h.left),this.charSpacing!==0&&e===this._textLines[u].length&&(t-=this._getWidthOfCharSpacing()),o={top:n,left:l+(t>0?t:0)},this.direction==="rtl"&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(i,l){var u=this.get2DCursorLocation(),e=u.lineIndex,n=u.charIndex>0?u.charIndex-1:0,t=this.getValueOfPropertyAt(e,n,"fontSize"),o=this.scaleX*this.canvas.getZoom(),c=this.cursorWidth/o,s=i.topOffset,h=this.getValueOfPropertyAt(e,n,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(e)/this.lineHeight-t*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(e,n,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(i.left+i.leftOffset-c/2,s+i.top+h,c,t)},renderSelection:function(i,l){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,e=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=this.textAlign.indexOf("justify")!==-1,t=this.get2DCursorLocation(u),o=this.get2DCursorLocation(e),c=t.lineIndex,s=o.lineIndex,h=t.charIndex<0?0:t.charIndex,p=o.charIndex<0?0:o.charIndex,y=c;y<=s;y++){var _=this._getLineLeftOffset(y)||0,T=this.getHeightOfLine(y),A=0,v=0,V=0;if(y===c&&(v=this.__charBounds[c][h].left),y>=c&&y<s)V=n&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===s)if(p===0)V=this.__charBounds[s][p].left;else{var tt=this._getWidthOfCharSpacing();V=this.__charBounds[s][p-1].left+this.__charBounds[s][p-1].width-tt}A=T,(this.lineHeight<1||y===s&&this.lineHeight>1)&&(T/=this.lineHeight);var pt=i.left+_+v,_t=V-v,Tt=T,vt=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",Tt=1,vt=T):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(pt=this.width-pt-_t),l.fillRect(pt,i.top+i.topOffset+vt,_t,Tt),i.topOffset+=A}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),l=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:l}}}),r.IText.fromObject=function(i,l){var u=r.util.stylesFromArray(i.styles,i.text),e=Object.assign({},i,{styles:u});if(d(e),e.styles)for(var n in e.styles)for(var t in e.styles[n])d(e.styles[n][t]);r.Object._fromObject("IText",e,l,"text")}}(),function(){var d=r.util.object.clone;r.util.object.extend(r.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var l=i.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,i._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var l=i.canvas;l&&(l._iTextInstances=l._iTextInstances||[],r.util.removeFromArray(l._iTextInstances,i),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,i._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,l,u,e){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",l,{duration:u,onComplete:function(){n.isAborted||i[e]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var l=this,u=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},u)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var l=0,u=i-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)l++,u--;for(;/\S/.test(this._text[u])&&u>-1;)l++,u--;return i-l},findWordBoundaryRight:function(i){var l=0,u=i;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)l++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)l++,u++;return i+l},findLineBoundaryLeft:function(i){for(var l=0,u=i-1;!/\n/.test(this._text[u])&&u>-1;)l++,u--;return i-l},findLineBoundaryRight:function(i){for(var l=0,u=i;!/\n/.test(this._text[u])&&u<this._text.length;)l++,u++;return i+l},searchWordBoundary:function(i,l){for(var u=this._text,e=this._reSpace.test(u[i])?i-1:i,n=u[e],t=r.reNonWord;!t.test(n)&&e>0&&e<u.length;)e+=l,n=u[e];return t.test(n)&&(e+=l===1?0:1),e},selectWord:function(i){i=i||this.selectionStart;var l=this.searchWordBoundary(i,-1),u=this.searchWordBoundary(i,1);this.selectionStart=l,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var l=this.findLineBoundaryLeft(i),u=this.findLineBoundaryRight(i);return this.selectionStart=l,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var l=this.getSelectionStartFromPointer(i.e),u=this.selectionStart,e=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||u===e)&&(u===l||e===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==e)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,l,u){var e=u.slice(0,i),n=r.util.string.graphemeSplit(e).length;if(i===l)return{selectionStart:n,selectionEnd:n};var t=u.slice(i,l),o=r.util.string.graphemeSplit(t).length;return{selectionStart:n,selectionEnd:n+o}},fromGraphemeToStringSelection:function(i,l,u){var e=u.slice(0,i),n=e.join("").length;if(i===l)return{selectionStart:n,selectionEnd:n};var t=u.slice(i,l),o=t.join("").length;return{selectionStart:n,selectionEnd:n+o}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(i),u=this.get2DCursorLocation(i),e=u.lineIndex,n=u.charIndex,t=this.getValueOfPropertyAt(e,n,"fontSize")*this.lineHeight,o=l.leftOffset,c=this.calcTransformMatrix(),s={x:l.left+o,y:l.top+l.topOffset+t},h=this.canvas.getRetinaScaling(),p=this.canvas.upperCanvasEl,y=p.width/h,_=p.height/h,T=y-t,A=_-t,v=p.clientWidth/y,V=p.clientHeight/_;return s=r.util.transformPoint(s,c),s=r.util.transformPoint(s,this.canvas.viewportTransform),s.x*=v,s.y*=V,s.x<0&&(s.x=0),s.x>T&&(s.x=T),s.y<0&&(s.y=0),s.y>A&&(s.y=A),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:t+"px",charHeight:t}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,l){var u=this.get2DCursorLocation(i,!0),e=this.get2DCursorLocation(l,!0),n=u.lineIndex,t=u.charIndex,o=e.lineIndex,c=e.charIndex,s,h;if(n!==o){if(this.styles[n])for(s=t;s<this._unwrappedTextLines[n].length;s++)delete this.styles[n][s];if(this.styles[o])for(s=c;s<this._unwrappedTextLines[o].length;s++)h=this.styles[o][s],h&&(this.styles[n]||(this.styles[n]={}),this.styles[n][t+s-c]=h);for(s=n+1;s<=o;s++)delete this.styles[s];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){h=this.styles[n];var p=c-t,y,_;for(s=t;s<c;s++)delete h[s];for(_ in this.styles[n])y=parseInt(_,10),y>=c&&(h[y-p]=h[_],delete h[_])}},shiftLineStyles:function(i,l){var u=d(this.styles);for(var e in this.styles){var n=parseInt(e,10);n>i&&(this.styles[n+l]=u[n],u[n-l]||delete this.styles[n])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,l,u,e){var n,t={},o=!1,c=this._unwrappedTextLines[i].length===l;u||(u=1),this.shiftLineStyles(i,u),this.styles[i]&&(n=this.styles[i][l===0?l:l-1]);for(var s in this.styles[i]){var h=parseInt(s,10);h>=l&&(o=!0,t[h-l]=this.styles[i][s],c&&l===0||delete this.styles[i][s])}var p=!1;for(o&&!c&&(this.styles[i+u]=t,p=!0),p&&u--;u>0;)e&&e[u-1]?this.styles[i+u]={0:d(e[u-1])}:n?this.styles[i+u]={0:d(n)}:delete this.styles[i+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(i,l,u,e){this.styles||(this.styles={});var n=this.styles[i],t=n?d(n):{};u||(u=1);for(var o in t){var c=parseInt(o,10);c>=l&&(n[c+u]=t[c],t[c-u]||delete n[c])}if(this._forceClearCache=!0,e){for(;u--;)Object.keys(e[u]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][l+u]=d(e[u]));return}if(n)for(var s=n[l?l-1:1];s&&u--;)this.styles[i][l+u]=d(s)},insertNewStyleBlock:function(i,l,u){for(var e=this.get2DCursorLocation(l,!0),n=[0],t=0,o=0;o<i.length;o++)i[o]===`
`?(t++,n[t]=0):n[t]++;n[0]>0&&(this.insertCharStyleObject(e.lineIndex,e.charIndex,n[0],u),u=u&&u.slice(n[0]+1)),t&&this.insertNewlineStyleObject(e.lineIndex,e.charIndex+n[0],t);for(var o=1;o<t;o++)n[o]>0?this.insertCharStyleObject(e.lineIndex+o,0,n[o],u):u&&this.styles[e.lineIndex+o]&&u[0]&&(this.styles[e.lineIndex+o][0]=u[0]),u=u&&u.slice(n[o]+1);n[o]>0&&this.insertCharStyleObject(e.lineIndex+o,0,n[o],u)},setSelectionStartEndWithShift:function(i,l,u){u<=i?(l===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=u):u>i&&u<l?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(l===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=u)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),r.util.object.extend(r.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var i=d.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var i=this.getSelectionStartFromPointer(d),l=this.selectionStart,u=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(l,u,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var i=this.getLocalPointer(d),l=0,u=0,e=0,n=0,t=0,o,c,s=0,h=this._textLines.length;s<h&&e<=i.y;s++)e+=this.getHeightOfLine(s)*this.scaleY,t=s,s>0&&(n+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));o=this._getLineLeftOffset(t),u=o*this.scaleX,c=this._textLines[t],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+u);for(var p=0,y=c.length;p<y&&(l=u,u+=this.__charBounds[t][p].kernedWidth*this.scaleX,u<=i.x);p++)n++;return this._getNewSelectionStartFromOffset(i,l,u,n,y)},_getNewSelectionStartFromOffset:function(d,i,l,u,e){var n=d.x-i,t=l-d.x,o=t>n||t<0?0:1,c=u+o;return this.flipX&&(c=e-c),c>this._text.length&&(c=this._text.length),c}}),r.util.object.extend(r.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=r.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+d.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):r.document.body.appendChild(this.hiddenTextarea),r.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),r.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),r.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),r.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(r.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in i)this[i[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var i=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,e=l.length,n,t,o=e-u,c=this.selectionStart,s=this.selectionEnd,h=c!==s,p,y,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),A=c>T.selectionStart;h?(n=this._text.slice(c,s),o+=s-c):e<u&&(A?n=this._text.slice(s+o,s):n=this._text.slice(c,c-o)),t=l.slice(T.selectionEnd-o,T.selectionEnd),n&&n.length&&(t.length&&(p=this.getSelectionStyles(c,c+1,!1),p=t.map(function(){return p[0]})),h?(y=c,_=s):A?(y=s-n.length,_=s):(y=s,_=s+n.length),this.removeStyleFromTo(y,_)),t.length&&(i&&t.join("")===r.copiedText&&!r.disableStyleCopyPaste&&(p=r.copiedTextStyle),this.insertNewStyleBlock(t,c,p)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(r.copiedText=this.getSelectedText(),r.disableStyleCopyPaste?r.copiedTextStyle=null:r.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||r.window.clipboardData},_getWidthBeforeCursor:function(d,i){var l=this._getLineLeftOffset(d),u;return i>0&&(u=this.__charBounds[d][i-1],l+=u.left+u.width),l},getDownCursorOffset:function(d,i){var l=this._getSelectionForOffset(d,i),u=this.get2DCursorLocation(l),e=u.lineIndex;if(e===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-l;var n=u.charIndex,t=this._getWidthBeforeCursor(e,n),o=this._getIndexOnLine(e+1,t),c=this._textLines[e].slice(n);return c.length+o+1+this.missingNewlineOffset(e)},_getSelectionForOffset:function(d,i){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,i){var l=this._getSelectionForOffset(d,i),u=this.get2DCursorLocation(l),e=u.lineIndex;if(e===0||d.metaKey||d.keyCode===33)return-l;var n=u.charIndex,t=this._getWidthBeforeCursor(e,n),o=this._getIndexOnLine(e-1,t),c=this._textLines[e].slice(0,n),s=this.missingNewlineOffset(e-1);return-this._textLines[e-1].length+o-c.length+(1-s)},_getIndexOnLine:function(d,i){for(var l=this._textLines[d],u=this._getLineLeftOffset(d),e=u,n=0,t,o,c=0,s=l.length;c<s;c++)if(t=this.__charBounds[d][c].width,e+=t,e>i){o=!0;var h=e-t,p=e,y=Math.abs(h-i),_=Math.abs(p-i);n=_<y?c:c-1;break}return o||(n=l.length-1),n},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,i){var l="get"+d+"CursorOffset",u=this[l](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var i=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,i,l){var u;if(d.altKey)u=this["findWordBoundary"+l](this[i]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)u=this["findLineBoundary"+l](this[i]);else return this[i]+=l==="Left"?-1:1,!0;if(typeof u<"u"&&this[i]!==u)return this[i]=u,!0},_moveLeft:function(d,i){return this._move(d,i,"Left")},_moveRight:function(d,i){return this._move(d,i,"Right")},moveCursorLeftWithoutShift:function(d){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,i){var l="moveCursor"+d+"With";this._currentCursorOpacity=1,i.shiftKey?l+="Shift":l+="outShift",this[l](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(d,i){typeof i>"u"&&(i=d+1),this.removeStyleFromTo(d,i),this._text.splice(d,i-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,i,l,u){typeof u>"u"&&(u=l),u>l&&this.removeStyleFromTo(l,u);var e=r.util.string.graphemeSplit(d);this.insertNewStyleBlock(e,l,i),this._text=[].concat(this._text.slice(0,l),e,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=r.util.toFixed,i=/  +/g;r.util.object.extend(r.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var u=!0,e=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,u){var e=[],n=[],t=l,o;this._setSVGBg(n);for(var c=0,s=this._textLines.length;c<s;c++)o=this._getLineLeftOffset(c),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(n,c,u+o,t),this._setSVGTextLineText(e,c,u+o,t),t+=this.getHeightOfLine(c);return{textSpans:e,textBgRects:n}},_createTextCharSpan:function(l,u,e,n){var t=l!==l.trim()||l.match(i),o=this.getSvgSpanStyles(u,t),c=o?'style="'+o+'"':"",s=u.deltaY,h="",p=r.Object.NUM_FRACTION_DIGITS;return s&&(h=' dy="'+d(s,p)+'" '),['<tspan x="',d(e,p),'" y="',d(n,p),'" ',h,c,">",r.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,u,e,n){var t=this.getHeightOfLine(u),o=this.textAlign.indexOf("justify")!==-1,c,s,h="",p,y,_=0,T=this._textLines[u],A;n+=t*(1-this._fontSizeFraction)/this.lineHeight;for(var v=0,V=T.length-1;v<=V;v++)A=v===V||this.charSpacing,h+=T[v],p=this.__charBounds[u][v],_===0?(e+=p.kernedWidth-p.width,_+=p.width):_+=p.kernedWidth,o&&!A&&this._reSpaceAndTab.test(T[v])&&(A=!0),A||(c=c||this.getCompleteStyleDeclaration(u,v),s=this.getCompleteStyleDeclaration(u,v+1),A=r.util.hasStyleChanged(c,s,!0)),A&&(y=this._getStyleDeclaration(u,v)||{},l.push(this._createTextCharSpan(h,y,e,n)),h="",c=s,e+=_,_=0)},_pushTextBgRect:function(l,u,e,n,t,o){var c=r.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(u),' x="',d(e,c),'" y="',d(n,c),'" width="',d(t,c),'" height="',d(o,c),`"></rect>
`)},_setSVGTextLineBg:function(l,u,e,n){for(var t=this._textLines[u],o=this.getHeightOfLine(u)/this.lineHeight,c=0,s=0,h,p,y=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),_=0,T=t.length;_<T;_++)h=this.__charBounds[u][_],p=this.getValueOfPropertyAt(u,_,"textBackgroundColor"),p!==y?(y&&this._pushTextBgRect(l,y,e+s,n,c,o),s=h.left,c=h.width,y=p):c+=h.kernedWidth;p&&this._pushTextBgRect(l,p,e+s,n,c,o)},_getFillAttributes:function(l){var u=l&&typeof l=="string"?new r.Color(l):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+l+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var u=0,e=0,n=0;n<l;n++)u+=this.getHeightOfLine(n);return e=this.getHeightOfLine(n),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var u=r.Object.prototype.getSvgStyles.call(this,l);return u+" white-space: pre;"}})}(),function(d){var i=d.fabric||(d.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var u=0,e=0,n=0,t={},o=0;o<l.graphemeLines.length;o++)l.graphemeText[n]===`
`&&o>0?(e=0,n++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[n])&&o>0&&(e++,n++),t[o]={line:u,offset:e},n+=l.graphemeLines[o].length,e+=l.graphemeLines[o].length;return t},styleHas:function(l,u){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[u];e&&(u=e.line)}return i.Text.prototype.styleHas.call(this,l,u)},isEmptyStyles:function(l){if(!this.styles)return!0;var u=0,e=l+1,n,t,o=!1,c=this._styleMap[l],s=this._styleMap[l+1];c&&(l=c.line,u=c.offset),s&&(e=s.line,o=e===l,n=s.offset),t=typeof l>"u"?this.styles:{line:this.styles[l]};for(var h in t)for(var p in t[h])if(p>=u&&(!o||p<n))for(var y in t[h][p])return!1;return!0},_getStyleDeclaration:function(l,u){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[l];if(!e)return null;l=e.line,u=e.offset+u}return this.callSuper("_getStyleDeclaration",l,u)},_setStyleDeclaration:function(l,u,e){var n=this._styleMap[l];l=n.line,u=n.offset+u,this.styles[l][u]=e},_deleteStyleDeclaration:function(l,u){var e=this._styleMap[l];l=e.line,u=e.offset+u,delete this.styles[l][u]},_getLineStyle:function(l){var u=this._styleMap[l];return!!this.styles[u.line]},_setLineStyle:function(l){var u=this._styleMap[l];this.styles[u.line]={}},_wrapText:function(l,u){var e=[],n;for(this.isWrapping=!0,n=0;n<l.length;n++)e=e.concat(this._wrapLine(l[n],n,u));return this.isWrapping=!1,e},_measureWord:function(l,u,e){var n=0,t,o=!0;e=e||0;for(var c=0,s=l.length;c<s;c++){var h=this._getGraphemeBox(l[c],u,c+e,t,o);n+=h.kernedWidth,t=l[c]}return n},_wrapLine:function(l,u,e,pt){var t=0,o=this.splitByGrapheme,c=[],s=[],h=o?i.util.string.graphemeSplit(l):l.split(this._wordJoiners),p="",y=0,_=o?"":" ",T=0,A=0,v=0,V=!0,tt=this._getWidthOfCharSpacing(),pt=pt||0;h.length===0&&h.push([]),e-=pt;for(var _t=0;_t<h.length;_t++)p=o?h[_t]:i.util.string.graphemeSplit(h[_t]),T=this._measureWord(p,u,y),y+=p.length,t+=A+T-tt,t>e&&!V?(c.push(s),s=[],t=T,V=!0):t+=tt,!V&&!o&&s.push(_),s=s.concat(p),A=o?0:this._measureWord([_],u,y),y++,V=!1,T>v&&(v=T);return _t&&c.push(s),v+pt>this.dynamicMinWidth&&(this.dynamicMinWidth=v-tt+pt),c},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var u=i.Text.prototype._splitTextIntoLines.call(this,l),e=this._wrapText(u.lines,this.width),n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t].join("");return u.lines=n,u.graphemeLines=e,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var u in this._styleMap)this._textLines[u]&&(l[this._styleMap[u].line]=1);for(var u in this.styles)l[u]||delete this.styles[u]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),i.Textbox.fromObject=function(l,u){var e=i.util.stylesFromArray(l.styles,l.text),n=Object.assign({},l,{styles:e});return i.Object._fromObject("Textbox",n,u,"text")}}(f),function(){var d=r.controlsUtils,i=d.scaleSkewCursorStyleHandler,l=d.scaleCursorStyleHandler,u=d.scalingEqually,e=d.scalingYOrSkewingX,n=d.scalingXOrSkewingY,t=d.scaleOrSkewActionName,o=r.Object.prototype.controls;if(o.ml=new r.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:t}),o.mr=new r.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:t}),o.mb=new r.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:e,getActionName:t}),o.mt=new r.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:e,getActionName:t}),o.tl=new r.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:u}),o.tr=new r.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:u}),o.bl=new r.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:u}),o.br=new r.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:u}),o.mtr=new r.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),r.Textbox){var c=r.Textbox.prototype.controls={};c.mtr=o.mtr,c.tr=o.tr,c.br=o.br,c.tl=o.tl,c.bl=o.bl,c.mt=o.mt,c.mb=o.mb,c.mr=new r.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),c.ml=new r.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(fi);let wc=class{constructor(r){Je(this,"canvas",document.createElement("canvas"));Je(this,"cvs",new fi.fabric.Canvas(this.canvas,{backgroundColor:"#000",width:window.innerWidth,height:window.innerHeight}));Je(this,"all_ctx",[{grass:3},{blur_grass_center:1.25},{blur_grass:.5},{mountain:.25},{mountains:0}]);if(this.canvas.getContext==null)throw new Error("container is not a canvas element");this.init(),r.appendChild(this.canvas),this.cvs.renderAll()}init(){fi.fabric.Image.fromURL("/image/3.png",r=>{r.left=-200*4,r.top=window.innerHeight-200*5+300,r.name="mountains",r.scale(3),this.cvs.add(r),this.cvs.renderAll()}),fi.fabric.Image.fromURL("/image/2.png",r=>{r.left=-100,r.top=window.innerHeight-200*5+100+300,r.name="mountain",r.scale(2),r.scaleX=3,this.cvs.add(r),this.cvs.renderAll()}),fi.fabric.Image.fromURL("/image/blur_grass.png",r=>{r.left=-100*2.5,r.top=window.innerHeight-200*1.25,r.name="blur_grass",r.scaleY=5,r.scaleX=5,this.cvs.add(r),this.cvs.renderAll()},{crossOrigin:"anonymous"}),fi.fabric.Image.fromURL("/image/blur_grass_center.png",r=>{r.left=-100*2.5,r.top=window.innerHeight-140*1.25,r.name="blur_grass_center",r.scaleY=5,r.scaleX=7,this.cvs.add(r),this.cvs.renderAll()},{crossOrigin:"anonymous"}),fi.fabric.Image.fromURL("/image/grass.png",r=>{r.left=-100*2.5,r.top=window.innerHeight-80*1.25,r.name="grass",r.scaleY=5,r.scaleX=9,this.cvs.add(r),this.cvs.renderAll()},{crossOrigin:"anonymous"})}moveCamera(r,b){this.cvs.getObjects().forEach(x=>{this.all_ctx.forEach(O=>{typeof x.left!="number"||typeof x.top!="number"||typeof x.name!="string"||x.name in O&&x.set({left:x.left+r+r*O[x.name],top:x.top+b+b*O[x.name]})}),this.cvs.renderAll()})}};var Yo={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(f){(function(r,b){f.exports=r.document?b(r,!0):function(x){if(!x.document)throw new Error("jQuery requires a window with a document");return b(x)}})(typeof window<"u"?window:_c,function(r,b){var x=[],O=Object.getPrototypeOf,P=x.slice,z=x.flat?function(a){return x.flat.call(a)}:function(a){return x.concat.apply([],a)},d=x.push,i=x.indexOf,l={},u=l.toString,e=l.hasOwnProperty,n=e.toString,t=n.call(Object),o={},c=function(g){return typeof g=="function"&&typeof g.nodeType!="number"&&typeof g.item!="function"},s=function(g){return g!=null&&g===g.window},h=r.document,p={type:!0,src:!0,nonce:!0,noModule:!0};function y(a,g,m){m=m||h;var C,S,w=m.createElement("script");if(w.text=a,g)for(C in p)S=g[C]||g.getAttribute&&g.getAttribute(C),S&&w.setAttribute(C,S);m.head.appendChild(w).parentNode.removeChild(w)}function _(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?l[u.call(a)]||"object":typeof a}var T="3.7.1",A=/HTML$/i,v=function(a,g){return new v.fn.init(a,g)};v.fn=v.prototype={jquery:T,constructor:v,length:0,toArray:function(){return P.call(this)},get:function(a){return a==null?P.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var g=v.merge(this.constructor(),a);return g.prevObject=this,g},each:function(a){return v.each(this,a)},map:function(a){return this.pushStack(v.map(this,function(g,m){return a.call(g,m,g)}))},slice:function(){return this.pushStack(P.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(a,g){return(g+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(a,g){return g%2}))},eq:function(a){var g=this.length,m=+a+(a<0?g:0);return this.pushStack(m>=0&&m<g?[this[m]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:x.sort,splice:x.splice},v.extend=v.fn.extend=function(){var a,g,m,C,S,w,E=arguments[0]||{},W=1,R=arguments.length,$=!1;for(typeof E=="boolean"&&($=E,E=arguments[W]||{},W++),typeof E!="object"&&!c(E)&&(E={}),W===R&&(E=this,W--);W<R;W++)if((a=arguments[W])!=null)for(g in a)C=a[g],!(g==="__proto__"||E===C)&&($&&C&&(v.isPlainObject(C)||(S=Array.isArray(C)))?(m=E[g],S&&!Array.isArray(m)?w=[]:!S&&!v.isPlainObject(m)?w={}:w=m,S=!1,E[g]=v.extend($,w,C)):C!==void 0&&(E[g]=C));return E},v.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var g,m;return!a||u.call(a)!=="[object Object]"?!1:(g=O(a),g?(m=e.call(g,"constructor")&&g.constructor,typeof m=="function"&&n.call(m)===t):!0)},isEmptyObject:function(a){var g;for(g in a)return!1;return!0},globalEval:function(a,g,m){y(a,{nonce:g&&g.nonce},m)},each:function(a,g){var m,C=0;if(V(a))for(m=a.length;C<m&&g.call(a[C],C,a[C])!==!1;C++);else for(C in a)if(g.call(a[C],C,a[C])===!1)break;return a},text:function(a){var g,m="",C=0,S=a.nodeType;if(!S)for(;g=a[C++];)m+=v.text(g);return S===1||S===11?a.textContent:S===9?a.documentElement.textContent:S===3||S===4?a.nodeValue:m},makeArray:function(a,g){var m=g||[];return a!=null&&(V(Object(a))?v.merge(m,typeof a=="string"?[a]:a):d.call(m,a)),m},inArray:function(a,g,m){return g==null?-1:i.call(g,a,m)},isXMLDoc:function(a){var g=a&&a.namespaceURI,m=a&&(a.ownerDocument||a).documentElement;return!A.test(g||m&&m.nodeName||"HTML")},merge:function(a,g){for(var m=+g.length,C=0,S=a.length;C<m;C++)a[S++]=g[C];return a.length=S,a},grep:function(a,g,m){for(var C,S=[],w=0,E=a.length,W=!m;w<E;w++)C=!g(a[w],w),C!==W&&S.push(a[w]);return S},map:function(a,g,m){var C,S,w=0,E=[];if(V(a))for(C=a.length;w<C;w++)S=g(a[w],w,m),S!=null&&E.push(S);else for(w in a)S=g(a[w],w,m),S!=null&&E.push(S);return z(E)},guid:1,support:o}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=x[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,g){l["[object "+g+"]"]=g.toLowerCase()});function V(a){var g=!!a&&"length"in a&&a.length,m=_(a);return c(a)||s(a)?!1:m==="array"||g===0||typeof g=="number"&&g>0&&g-1 in a}function tt(a,g){return a.nodeName&&a.nodeName.toLowerCase()===g.toLowerCase()}var pt=x.pop,_t=x.sort,Tt=x.splice,vt="[\\x20\\t\\r\\n\\f]",bt=new RegExp("^"+vt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+vt+"+$","g");v.contains=function(a,g){var m=g&&g.parentNode;return a===m||!!(m&&m.nodeType===1&&(a.contains?a.contains(m):a.compareDocumentPosition&&a.compareDocumentPosition(m)&16))};var wt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Et(a,g){return g?a==="\0"?"":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}v.escapeSelector=function(a){return(a+"").replace(wt,Et)};var St=h,xt=d;(function(){var a,g,m,C,S,w=xt,E,W,R,$,lt,gt=v.expando,nt=0,Ct=0,It=on(),zt=on(),Ht=on(),oe=on(),ne=function(j,G){return j===G&&(S=!0),0},Me="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Fe="(?:\\\\[\\da-fA-F]{1,6}"+vt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ut="\\["+vt+"*("+Fe+")(?:"+vt+"*([*^$|!~]?=)"+vt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Fe+"))|)"+vt+"*\\]",ai=":("+Fe+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ut+")*)|.*)\\)|)",Vt=new RegExp(vt+"+","g"),te=new RegExp("^"+vt+"*,"+vt+"*"),Ni=new RegExp("^"+vt+"*([>+~]|"+vt+")"+vt+"*"),Kn=new RegExp(vt+"|>"),Le=new RegExp(ai),Hi=new RegExp("^"+Fe+"$"),je={ID:new RegExp("^#("+Fe+")"),CLASS:new RegExp("^\\.("+Fe+")"),TAG:new RegExp("^("+Fe+"|[*])"),ATTR:new RegExp("^"+Ut),PSEUDO:new RegExp("^"+ai),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+vt+"*(even|odd|(([+-]|)(\\d*)n|)"+vt+"*(?:([+-]|)"+vt+"*(\\d+)|))"+vt+"*\\)|)","i"),bool:new RegExp("^(?:"+Me+")$","i"),needsContext:new RegExp("^"+vt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+vt+"*((?:-\\d)?\\d*)"+vt+"*\\)|)(?=[^-]|$)","i")},qe=/^(?:input|select|textarea|button)$/i,Ke=/^h\d$/i,Se=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$n=/[+~]/,Xe=new RegExp("\\\\[\\da-fA-F]{1,6}"+vt+"?|\\\\([^\\r\\n\\f])","g"),Ye=function(j,G){var et="0x"+j.slice(1)-65536;return G||(et<0?String.fromCharCode(et+65536):String.fromCharCode(et>>10|55296,et&1023|56320))},Ta=function(){$e()},Oa=ln(function(j){return j.disabled===!0&&tt(j,"fieldset")},{dir:"parentNode",next:"legend"});function Ea(){try{return E.activeElement}catch{}}try{w.apply(x=P.call(St.childNodes),St.childNodes),x[St.childNodes.length].nodeType}catch{w={apply:function(G,et){xt.apply(G,P.call(et))},call:function(G){xt.apply(G,P.call(arguments,1))}}}function qt(j,G,et,ot){var dt,Ot,At,kt,Dt,Xt,Lt,Rt=G&&G.ownerDocument,Yt=G?G.nodeType:9;if(et=et||[],typeof j!="string"||!j||Yt!==1&&Yt!==9&&Yt!==11)return et;if(!ot&&($e(G),G=G||E,R)){if(Yt!==11&&(Dt=Se.exec(j)))if(dt=Dt[1]){if(Yt===9)if(At=G.getElementById(dt)){if(At.id===dt)return w.call(et,At),et}else return et;else if(Rt&&(At=Rt.getElementById(dt))&&qt.contains(G,At)&&At.id===dt)return w.call(et,At),et}else{if(Dt[2])return w.apply(et,G.getElementsByTagName(j)),et;if((dt=Dt[3])&&G.getElementsByClassName)return w.apply(et,G.getElementsByClassName(dt)),et}if(!oe[j+" "]&&(!$||!$.test(j))){if(Lt=j,Rt=G,Yt===1&&(Kn.test(j)||Ni.test(j))){for(Rt=$n.test(j)&&Jn(G.parentNode)||G,(Rt!=G||!o.scope)&&((kt=G.getAttribute("id"))?kt=v.escapeSelector(kt):G.setAttribute("id",kt=gt)),Xt=Wi(j),Ot=Xt.length;Ot--;)Xt[Ot]=(kt?"#"+kt:":scope")+" "+an(Xt[Ot]);Lt=Xt.join(",")}try{return w.apply(et,Rt.querySelectorAll(Lt)),et}catch{oe(j,!0)}finally{kt===gt&&G.removeAttribute("id")}}}return Os(j.replace(bt,"$1"),G,et,ot)}function on(){var j=[];function G(et,ot){return j.push(et+" ")>g.cacheLength&&delete G[j.shift()],G[et+" "]=ot}return G}function Oe(j){return j[gt]=!0,j}function bi(j){var G=E.createElement("fieldset");try{return!!j(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function Pa(j){return function(G){return tt(G,"input")&&G.type===j}}function Aa(j){return function(G){return(tt(G,"input")||tt(G,"button"))&&G.type===j}}function ws(j){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===j:G.disabled===j:G.isDisabled===j||G.isDisabled!==!j&&Oa(G)===j:G.disabled===j:"label"in G?G.disabled===j:!1}}function li(j){return Oe(function(G){return G=+G,Oe(function(et,ot){for(var dt,Ot=j([],et.length,G),At=Ot.length;At--;)et[dt=Ot[At]]&&(et[dt]=!(ot[dt]=et[dt]))})})}function Jn(j){return j&&typeof j.getElementsByTagName<"u"&&j}function $e(j){var G,et=j?j.ownerDocument||j:St;return et==E||et.nodeType!==9||!et.documentElement||(E=et,W=E.documentElement,R=!v.isXMLDoc(E),lt=W.matches||W.webkitMatchesSelector||W.msMatchesSelector,W.msMatchesSelector&&St!=E&&(G=E.defaultView)&&G.top!==G&&G.addEventListener("unload",Ta),o.getById=bi(function(ot){return W.appendChild(ot).id=v.expando,!E.getElementsByName||!E.getElementsByName(v.expando).length}),o.disconnectedMatch=bi(function(ot){return lt.call(ot,"*")}),o.scope=bi(function(){return E.querySelectorAll(":scope")}),o.cssHas=bi(function(){try{return E.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),o.getById?(g.filter.ID=function(ot){var dt=ot.replace(Xe,Ye);return function(Ot){return Ot.getAttribute("id")===dt}},g.find.ID=function(ot,dt){if(typeof dt.getElementById<"u"&&R){var Ot=dt.getElementById(ot);return Ot?[Ot]:[]}}):(g.filter.ID=function(ot){var dt=ot.replace(Xe,Ye);return function(Ot){var At=typeof Ot.getAttributeNode<"u"&&Ot.getAttributeNode("id");return At&&At.value===dt}},g.find.ID=function(ot,dt){if(typeof dt.getElementById<"u"&&R){var Ot,At,kt,Dt=dt.getElementById(ot);if(Dt){if(Ot=Dt.getAttributeNode("id"),Ot&&Ot.value===ot)return[Dt];for(kt=dt.getElementsByName(ot),At=0;Dt=kt[At++];)if(Ot=Dt.getAttributeNode("id"),Ot&&Ot.value===ot)return[Dt]}return[]}}),g.find.TAG=function(ot,dt){return typeof dt.getElementsByTagName<"u"?dt.getElementsByTagName(ot):dt.querySelectorAll(ot)},g.find.CLASS=function(ot,dt){if(typeof dt.getElementsByClassName<"u"&&R)return dt.getElementsByClassName(ot)},$=[],bi(function(ot){var dt;W.appendChild(ot).innerHTML="<a id='"+gt+"' href='' disabled='disabled'></a><select id='"+gt+"-\r\\' disabled='disabled'><option selected=''></option></select>",ot.querySelectorAll("[selected]").length||$.push("\\["+vt+"*(?:value|"+Me+")"),ot.querySelectorAll("[id~="+gt+"-]").length||$.push("~="),ot.querySelectorAll("a#"+gt+"+*").length||$.push(".#.+[+~]"),ot.querySelectorAll(":checked").length||$.push(":checked"),dt=E.createElement("input"),dt.setAttribute("type","hidden"),ot.appendChild(dt).setAttribute("name","D"),W.appendChild(ot).disabled=!0,ot.querySelectorAll(":disabled").length!==2&&$.push(":enabled",":disabled"),dt=E.createElement("input"),dt.setAttribute("name",""),ot.appendChild(dt),ot.querySelectorAll("[name='']").length||$.push("\\["+vt+"*name"+vt+"*="+vt+`*(?:''|"")`)}),o.cssHas||$.push(":has"),$=$.length&&new RegExp($.join("|")),ne=function(ot,dt){if(ot===dt)return S=!0,0;var Ot=!ot.compareDocumentPosition-!dt.compareDocumentPosition;return Ot||(Ot=(ot.ownerDocument||ot)==(dt.ownerDocument||dt)?ot.compareDocumentPosition(dt):1,Ot&1||!o.sortDetached&&dt.compareDocumentPosition(ot)===Ot?ot===E||ot.ownerDocument==St&&qt.contains(St,ot)?-1:dt===E||dt.ownerDocument==St&&qt.contains(St,dt)?1:C?i.call(C,ot)-i.call(C,dt):0:Ot&4?-1:1)}),E}qt.matches=function(j,G){return qt(j,null,null,G)},qt.matchesSelector=function(j,G){if($e(j),R&&!oe[G+" "]&&(!$||!$.test(G)))try{var et=lt.call(j,G);if(et||o.disconnectedMatch||j.document&&j.document.nodeType!==11)return et}catch{oe(G,!0)}return qt(G,E,null,[j]).length>0},qt.contains=function(j,G){return(j.ownerDocument||j)!=E&&$e(j),v.contains(j,G)},qt.attr=function(j,G){(j.ownerDocument||j)!=E&&$e(j);var et=g.attrHandle[G.toLowerCase()],ot=et&&e.call(g.attrHandle,G.toLowerCase())?et(j,G,!R):void 0;return ot!==void 0?ot:j.getAttribute(G)},qt.error=function(j){throw new Error("Syntax error, unrecognized expression: "+j)},v.uniqueSort=function(j){var G,et=[],ot=0,dt=0;if(S=!o.sortStable,C=!o.sortStable&&P.call(j,0),_t.call(j,ne),S){for(;G=j[dt++];)G===j[dt]&&(ot=et.push(dt));for(;ot--;)Tt.call(j,et[ot],1)}return C=null,j},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(P.apply(this)))},g=v.expr={cacheLength:50,createPseudo:Oe,match:je,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(j){return j[1]=j[1].replace(Xe,Ye),j[3]=(j[3]||j[4]||j[5]||"").replace(Xe,Ye),j[2]==="~="&&(j[3]=" "+j[3]+" "),j.slice(0,4)},CHILD:function(j){return j[1]=j[1].toLowerCase(),j[1].slice(0,3)==="nth"?(j[3]||qt.error(j[0]),j[4]=+(j[4]?j[5]+(j[6]||1):2*(j[3]==="even"||j[3]==="odd")),j[5]=+(j[7]+j[8]||j[3]==="odd")):j[3]&&qt.error(j[0]),j},PSEUDO:function(j){var G,et=!j[6]&&j[2];return je.CHILD.test(j[0])?null:(j[3]?j[2]=j[4]||j[5]||"":et&&Le.test(et)&&(G=Wi(et,!0))&&(G=et.indexOf(")",et.length-G)-et.length)&&(j[0]=j[0].slice(0,G),j[2]=et.slice(0,G)),j.slice(0,3))}},filter:{TAG:function(j){var G=j.replace(Xe,Ye).toLowerCase();return j==="*"?function(){return!0}:function(et){return tt(et,G)}},CLASS:function(j){var G=It[j+" "];return G||(G=new RegExp("(^|"+vt+")"+j+"("+vt+"|$)"))&&It(j,function(et){return G.test(typeof et.className=="string"&&et.className||typeof et.getAttribute<"u"&&et.getAttribute("class")||"")})},ATTR:function(j,G,et){return function(ot){var dt=qt.attr(ot,j);return dt==null?G==="!=":G?(dt+="",G==="="?dt===et:G==="!="?dt!==et:G==="^="?et&&dt.indexOf(et)===0:G==="*="?et&&dt.indexOf(et)>-1:G==="$="?et&&dt.slice(-et.length)===et:G==="~="?(" "+dt.replace(Vt," ")+" ").indexOf(et)>-1:G==="|="?dt===et||dt.slice(0,et.length+1)===et+"-":!1):!0}},CHILD:function(j,G,et,ot,dt){var Ot=j.slice(0,3)!=="nth",At=j.slice(-4)!=="last",kt=G==="of-type";return ot===1&&dt===0?function(Dt){return!!Dt.parentNode}:function(Dt,Xt,Lt){var Rt,Yt,Ft,$t,ye,le=Ot!==At?"nextSibling":"previousSibling",we=Dt.parentNode,Ie=kt&&Dt.nodeName.toLowerCase(),xi=!Lt&&!kt,he=!1;if(we){if(Ot){for(;le;){for(Ft=Dt;Ft=Ft[le];)if(kt?tt(Ft,Ie):Ft.nodeType===1)return!1;ye=le=j==="only"&&!ye&&"nextSibling"}return!0}if(ye=[At?we.firstChild:we.lastChild],At&&xi){for(Yt=we[gt]||(we[gt]={}),Rt=Yt[j]||[],$t=Rt[0]===nt&&Rt[1],he=$t&&Rt[2],Ft=$t&&we.childNodes[$t];Ft=++$t&&Ft&&Ft[le]||(he=$t=0)||ye.pop();)if(Ft.nodeType===1&&++he&&Ft===Dt){Yt[j]=[nt,$t,he];break}}else if(xi&&(Yt=Dt[gt]||(Dt[gt]={}),Rt=Yt[j]||[],$t=Rt[0]===nt&&Rt[1],he=$t),he===!1)for(;(Ft=++$t&&Ft&&Ft[le]||(he=$t=0)||ye.pop())&&!((kt?tt(Ft,Ie):Ft.nodeType===1)&&++he&&(xi&&(Yt=Ft[gt]||(Ft[gt]={}),Yt[j]=[nt,he]),Ft===Dt)););return he-=dt,he===ot||he%ot===0&&he/ot>=0}}},PSEUDO:function(j,G){var et,ot=g.pseudos[j]||g.setFilters[j.toLowerCase()]||qt.error("unsupported pseudo: "+j);return ot[gt]?ot(G):ot.length>1?(et=[j,j,"",G],g.setFilters.hasOwnProperty(j.toLowerCase())?Oe(function(dt,Ot){for(var At,kt=ot(dt,G),Dt=kt.length;Dt--;)At=i.call(dt,kt[Dt]),dt[At]=!(Ot[At]=kt[Dt])}):function(dt){return ot(dt,0,et)}):ot}},pseudos:{not:Oe(function(j){var G=[],et=[],ot=er(j.replace(bt,"$1"));return ot[gt]?Oe(function(dt,Ot,At,kt){for(var Dt,Xt=ot(dt,null,kt,[]),Lt=dt.length;Lt--;)(Dt=Xt[Lt])&&(dt[Lt]=!(Ot[Lt]=Dt))}):function(dt,Ot,At){return G[0]=dt,ot(G,null,At,et),G[0]=null,!et.pop()}}),has:Oe(function(j){return function(G){return qt(j,G).length>0}}),contains:Oe(function(j){return j=j.replace(Xe,Ye),function(G){return(G.textContent||v.text(G)).indexOf(j)>-1}}),lang:Oe(function(j){return Hi.test(j||"")||qt.error("unsupported lang: "+j),j=j.replace(Xe,Ye).toLowerCase(),function(G){var et;do if(et=R?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return et=et.toLowerCase(),et===j||et.indexOf(j+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(j){var G=r.location&&r.location.hash;return G&&G.slice(1)===j.id},root:function(j){return j===W},focus:function(j){return j===Ea()&&E.hasFocus()&&!!(j.type||j.href||~j.tabIndex)},enabled:ws(!1),disabled:ws(!0),checked:function(j){return tt(j,"input")&&!!j.checked||tt(j,"option")&&!!j.selected},selected:function(j){return j.parentNode&&j.parentNode.selectedIndex,j.selected===!0},empty:function(j){for(j=j.firstChild;j;j=j.nextSibling)if(j.nodeType<6)return!1;return!0},parent:function(j){return!g.pseudos.empty(j)},header:function(j){return Ke.test(j.nodeName)},input:function(j){return qe.test(j.nodeName)},button:function(j){return tt(j,"input")&&j.type==="button"||tt(j,"button")},text:function(j){var G;return tt(j,"input")&&j.type==="text"&&((G=j.getAttribute("type"))==null||G.toLowerCase()==="text")},first:li(function(){return[0]}),last:li(function(j,G){return[G-1]}),eq:li(function(j,G,et){return[et<0?et+G:et]}),even:li(function(j,G){for(var et=0;et<G;et+=2)j.push(et);return j}),odd:li(function(j,G){for(var et=1;et<G;et+=2)j.push(et);return j}),lt:li(function(j,G,et){var ot;for(et<0?ot=et+G:et>G?ot=G:ot=et;--ot>=0;)j.push(ot);return j}),gt:li(function(j,G,et){for(var ot=et<0?et+G:et;++ot<G;)j.push(ot);return j})}},g.pseudos.nth=g.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[a]=Pa(a);for(a in{submit:!0,reset:!0})g.pseudos[a]=Aa(a);function Ts(){}Ts.prototype=g.filters=g.pseudos,g.setFilters=new Ts;function Wi(j,G){var et,ot,dt,Ot,At,kt,Dt,Xt=zt[j+" "];if(Xt)return G?0:Xt.slice(0);for(At=j,kt=[],Dt=g.preFilter;At;){(!et||(ot=te.exec(At)))&&(ot&&(At=At.slice(ot[0].length)||At),kt.push(dt=[])),et=!1,(ot=Ni.exec(At))&&(et=ot.shift(),dt.push({value:et,type:ot[0].replace(bt," ")}),At=At.slice(et.length));for(Ot in g.filter)(ot=je[Ot].exec(At))&&(!Dt[Ot]||(ot=Dt[Ot](ot)))&&(et=ot.shift(),dt.push({value:et,type:Ot,matches:ot}),At=At.slice(et.length));if(!et)break}return G?At.length:At?qt.error(j):zt(j,kt).slice(0)}function an(j){for(var G=0,et=j.length,ot="";G<et;G++)ot+=j[G].value;return ot}function ln(j,G,et){var ot=G.dir,dt=G.next,Ot=dt||ot,At=et&&Ot==="parentNode",kt=Ct++;return G.first?function(Dt,Xt,Lt){for(;Dt=Dt[ot];)if(Dt.nodeType===1||At)return j(Dt,Xt,Lt);return!1}:function(Dt,Xt,Lt){var Rt,Yt,Ft=[nt,kt];if(Lt){for(;Dt=Dt[ot];)if((Dt.nodeType===1||At)&&j(Dt,Xt,Lt))return!0}else for(;Dt=Dt[ot];)if(Dt.nodeType===1||At)if(Yt=Dt[gt]||(Dt[gt]={}),dt&&tt(Dt,dt))Dt=Dt[ot]||Dt;else{if((Rt=Yt[Ot])&&Rt[0]===nt&&Rt[1]===kt)return Ft[2]=Rt[2];if(Yt[Ot]=Ft,Ft[2]=j(Dt,Xt,Lt))return!0}return!1}}function Qn(j){return j.length>1?function(G,et,ot){for(var dt=j.length;dt--;)if(!j[dt](G,et,ot))return!1;return!0}:j[0]}function Da(j,G,et){for(var ot=0,dt=G.length;ot<dt;ot++)qt(j,G[ot],et);return et}function un(j,G,et,ot,dt){for(var Ot,At=[],kt=0,Dt=j.length,Xt=G!=null;kt<Dt;kt++)(Ot=j[kt])&&(!et||et(Ot,ot,dt))&&(At.push(Ot),Xt&&G.push(kt));return At}function Zn(j,G,et,ot,dt,Ot){return ot&&!ot[gt]&&(ot=Zn(ot)),dt&&!dt[gt]&&(dt=Zn(dt,Ot)),Oe(function(At,kt,Dt,Xt){var Lt,Rt,Yt,Ft,$t=[],ye=[],le=kt.length,we=At||Da(G||"*",Dt.nodeType?[Dt]:Dt,[]),Ie=j&&(At||!G)?un(we,$t,j,Dt,Xt):we;if(et?(Ft=dt||(At?j:le||ot)?[]:kt,et(Ie,Ft,Dt,Xt)):Ft=Ie,ot)for(Lt=un(Ft,ye),ot(Lt,[],Dt,Xt),Rt=Lt.length;Rt--;)(Yt=Lt[Rt])&&(Ft[ye[Rt]]=!(Ie[ye[Rt]]=Yt));if(At){if(dt||j){if(dt){for(Lt=[],Rt=Ft.length;Rt--;)(Yt=Ft[Rt])&&Lt.push(Ie[Rt]=Yt);dt(null,Ft=[],Lt,Xt)}for(Rt=Ft.length;Rt--;)(Yt=Ft[Rt])&&(Lt=dt?i.call(At,Yt):$t[Rt])>-1&&(At[Lt]=!(kt[Lt]=Yt))}}else Ft=un(Ft===kt?Ft.splice(le,Ft.length):Ft),dt?dt(null,kt,Ft,Xt):w.apply(kt,Ft)})}function tr(j){for(var G,et,ot,dt=j.length,Ot=g.relative[j[0].type],At=Ot||g.relative[" "],kt=Ot?1:0,Dt=ln(function(Rt){return Rt===G},At,!0),Xt=ln(function(Rt){return i.call(G,Rt)>-1},At,!0),Lt=[function(Rt,Yt,Ft){var $t=!Ot&&(Ft||Yt!=m)||((G=Yt).nodeType?Dt(Rt,Yt,Ft):Xt(Rt,Yt,Ft));return G=null,$t}];kt<dt;kt++)if(et=g.relative[j[kt].type])Lt=[ln(Qn(Lt),et)];else{if(et=g.filter[j[kt].type].apply(null,j[kt].matches),et[gt]){for(ot=++kt;ot<dt&&!g.relative[j[ot].type];ot++);return Zn(kt>1&&Qn(Lt),kt>1&&an(j.slice(0,kt-1).concat({value:j[kt-2].type===" "?"*":""})).replace(bt,"$1"),et,kt<ot&&tr(j.slice(kt,ot)),ot<dt&&tr(j=j.slice(ot)),ot<dt&&an(j))}Lt.push(et)}return Qn(Lt)}function ka(j,G){var et=G.length>0,ot=j.length>0,dt=function(Ot,At,kt,Dt,Xt){var Lt,Rt,Yt,Ft=0,$t="0",ye=Ot&&[],le=[],we=m,Ie=Ot||ot&&g.find.TAG("*",Xt),xi=nt+=we==null?1:Math.random()||.1,he=Ie.length;for(Xt&&(m=At==E||At||Xt);$t!==he&&(Lt=Ie[$t])!=null;$t++){if(ot&&Lt){for(Rt=0,!At&&Lt.ownerDocument!=E&&($e(Lt),kt=!R);Yt=j[Rt++];)if(Yt(Lt,At||E,kt)){w.call(Dt,Lt);break}Xt&&(nt=xi)}et&&((Lt=!Yt&&Lt)&&Ft--,Ot&&ye.push(Lt))}if(Ft+=$t,et&&$t!==Ft){for(Rt=0;Yt=G[Rt++];)Yt(ye,le,At,kt);if(Ot){if(Ft>0)for(;$t--;)ye[$t]||le[$t]||(le[$t]=pt.call(Dt));le=un(le)}w.apply(Dt,le),Xt&&!Ot&&le.length>0&&Ft+G.length>1&&v.uniqueSort(Dt)}return Xt&&(nt=xi,m=we),ye};return et?Oe(dt):dt}function er(j,G){var et,ot=[],dt=[],Ot=Ht[j+" "];if(!Ot){for(G||(G=Wi(j)),et=G.length;et--;)Ot=tr(G[et]),Ot[gt]?ot.push(Ot):dt.push(Ot);Ot=Ht(j,ka(dt,ot)),Ot.selector=j}return Ot}function Os(j,G,et,ot){var dt,Ot,At,kt,Dt,Xt=typeof j=="function"&&j,Lt=!ot&&Wi(j=Xt.selector||j);if(et=et||[],Lt.length===1){if(Ot=Lt[0]=Lt[0].slice(0),Ot.length>2&&(At=Ot[0]).type==="ID"&&G.nodeType===9&&R&&g.relative[Ot[1].type]){if(G=(g.find.ID(At.matches[0].replace(Xe,Ye),G)||[])[0],G)Xt&&(G=G.parentNode);else return et;j=j.slice(Ot.shift().value.length)}for(dt=je.needsContext.test(j)?0:Ot.length;dt--&&(At=Ot[dt],!g.relative[kt=At.type]);)if((Dt=g.find[kt])&&(ot=Dt(At.matches[0].replace(Xe,Ye),$n.test(Ot[0].type)&&Jn(G.parentNode)||G))){if(Ot.splice(dt,1),j=ot.length&&an(Ot),!j)return w.apply(et,ot),et;break}}return(Xt||er(j,Lt))(ot,G,!R,et,!G||$n.test(j)&&Jn(G.parentNode)||G),et}o.sortStable=gt.split("").sort(ne).join("")===gt,$e(),o.sortDetached=bi(function(j){return j.compareDocumentPosition(E.createElement("fieldset"))&1}),v.find=qt,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,qt.compile=er,qt.select=Os,qt.setDocument=$e,qt.tokenize=Wi,qt.escape=v.escapeSelector,qt.getText=v.text,qt.isXML=v.isXMLDoc,qt.selectors=v.expr,qt.support=v.support,qt.uniqueSort=v.uniqueSort})();var D=function(a,g,m){for(var C=[],S=m!==void 0;(a=a[g])&&a.nodeType!==9;)if(a.nodeType===1){if(S&&v(a).is(m))break;C.push(a)}return C},H=function(a,g){for(var m=[];a;a=a.nextSibling)a.nodeType===1&&a!==g&&m.push(a);return m},N=v.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function st(a,g,m){return c(g)?v.grep(a,function(C,S){return!!g.call(C,S,C)!==m}):g.nodeType?v.grep(a,function(C){return C===g!==m}):typeof g!="string"?v.grep(a,function(C){return i.call(g,C)>-1!==m}):v.filter(g,a,m)}v.filter=function(a,g,m){var C=g[0];return m&&(a=":not("+a+")"),g.length===1&&C.nodeType===1?v.find.matchesSelector(C,a)?[C]:[]:v.find.matches(a,v.grep(g,function(S){return S.nodeType===1}))},v.fn.extend({find:function(a){var g,m,C=this.length,S=this;if(typeof a!="string")return this.pushStack(v(a).filter(function(){for(g=0;g<C;g++)if(v.contains(S[g],this))return!0}));for(m=this.pushStack([]),g=0;g<C;g++)v.find(a,S[g],m);return C>1?v.uniqueSort(m):m},filter:function(a){return this.pushStack(st(this,a||[],!1))},not:function(a){return this.pushStack(st(this,a||[],!0))},is:function(a){return!!st(this,typeof a=="string"&&N.test(a)?v(a):a||[],!1).length}});var I,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,q=v.fn.init=function(a,g,m){var C,S;if(!a)return this;if(m=m||I,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?C=[null,a,null]:C=M.exec(a),C&&(C[1]||!g))if(C[1]){if(g=g instanceof v?g[0]:g,v.merge(this,v.parseHTML(C[1],g&&g.nodeType?g.ownerDocument||g:h,!0)),B.test(C[1])&&v.isPlainObject(g))for(C in g)c(this[C])?this[C](g[C]):this.attr(C,g[C]);return this}else return S=h.getElementById(C[2]),S&&(this[0]=S,this.length=1),this;else return!g||g.jquery?(g||m).find(a):this.constructor(g).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(c(a))return m.ready!==void 0?m.ready(a):a(v)}return v.makeArray(a,this)};q.prototype=v.fn,I=v(h);var Q=/^(?:parents|prev(?:Until|All))/,ut={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(a){var g=v(a,this),m=g.length;return this.filter(function(){for(var C=0;C<m;C++)if(v.contains(this,g[C]))return!0})},closest:function(a,g){var m,C=0,S=this.length,w=[],E=typeof a!="string"&&v(a);if(!N.test(a)){for(;C<S;C++)for(m=this[C];m&&m!==g;m=m.parentNode)if(m.nodeType<11&&(E?E.index(m)>-1:m.nodeType===1&&v.find.matchesSelector(m,a))){w.push(m);break}}return this.pushStack(w.length>1?v.uniqueSort(w):w)},index:function(a){return a?typeof a=="string"?i.call(v(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,g){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(a,g))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function rt(a,g){for(;(a=a[g])&&a.nodeType!==1;);return a}v.each({parent:function(a){var g=a.parentNode;return g&&g.nodeType!==11?g:null},parents:function(a){return D(a,"parentNode")},parentsUntil:function(a,g,m){return D(a,"parentNode",m)},next:function(a){return rt(a,"nextSibling")},prev:function(a){return rt(a,"previousSibling")},nextAll:function(a){return D(a,"nextSibling")},prevAll:function(a){return D(a,"previousSibling")},nextUntil:function(a,g,m){return D(a,"nextSibling",m)},prevUntil:function(a,g,m){return D(a,"previousSibling",m)},siblings:function(a){return H((a.parentNode||{}).firstChild,a)},children:function(a){return H(a.firstChild)},contents:function(a){return a.contentDocument!=null&&O(a.contentDocument)?a.contentDocument:(tt(a,"template")&&(a=a.content||a),v.merge([],a.childNodes))}},function(a,g){v.fn[a]=function(m,C){var S=v.map(this,g,m);return a.slice(-5)!=="Until"&&(C=m),C&&typeof C=="string"&&(S=v.filter(C,S)),this.length>1&&(ut[a]||v.uniqueSort(S),Q.test(a)&&S.reverse()),this.pushStack(S)}});var ct=/[^\x20\t\r\n\f]+/g;function mt(a){var g={};return v.each(a.match(ct)||[],function(m,C){g[C]=!0}),g}v.Callbacks=function(a){a=typeof a=="string"?mt(a):v.extend({},a);var g,m,C,S,w=[],E=[],W=-1,R=function(){for(S=S||a.once,C=g=!0;E.length;W=-1)for(m=E.shift();++W<w.length;)w[W].apply(m[0],m[1])===!1&&a.stopOnFalse&&(W=w.length,m=!1);a.memory||(m=!1),g=!1,S&&(m?w=[]:w="")},$={add:function(){return w&&(m&&!g&&(W=w.length-1,E.push(m)),function lt(gt){v.each(gt,function(nt,Ct){c(Ct)?(!a.unique||!$.has(Ct))&&w.push(Ct):Ct&&Ct.length&&_(Ct)!=="string"&&lt(Ct)})}(arguments),m&&!g&&R()),this},remove:function(){return v.each(arguments,function(lt,gt){for(var nt;(nt=v.inArray(gt,w,nt))>-1;)w.splice(nt,1),nt<=W&&W--}),this},has:function(lt){return lt?v.inArray(lt,w)>-1:w.length>0},empty:function(){return w&&(w=[]),this},disable:function(){return S=E=[],w=m="",this},disabled:function(){return!w},lock:function(){return S=E=[],!m&&!g&&(w=m=""),this},locked:function(){return!!S},fireWith:function(lt,gt){return S||(gt=gt||[],gt=[lt,gt.slice?gt.slice():gt],E.push(gt),g||R()),this},fire:function(){return $.fireWith(this,arguments),this},fired:function(){return!!C}};return $};function F(a){return a}function k(a){throw a}function L(a,g,m,C){var S;try{a&&c(S=a.promise)?S.call(a).done(g).fail(m):a&&c(S=a.then)?S.call(a,g,m):g.apply(void 0,[a].slice(C))}catch(w){m.apply(void 0,[w])}}v.extend({Deferred:function(a){var g=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],m="pending",C={state:function(){return m},always:function(){return S.done(arguments).fail(arguments),this},catch:function(w){return C.then(null,w)},pipe:function(){var w=arguments;return v.Deferred(function(E){v.each(g,function(W,R){var $=c(w[R[4]])&&w[R[4]];S[R[1]](function(){var lt=$&&$.apply(this,arguments);lt&&c(lt.promise)?lt.promise().progress(E.notify).done(E.resolve).fail(E.reject):E[R[0]+"With"](this,$?[lt]:arguments)})}),w=null}).promise()},then:function(w,E,W){var R=0;function $(lt,gt,nt,Ct){return function(){var It=this,zt=arguments,Ht=function(){var ne,Me;if(!(lt<R)){if(ne=nt.apply(It,zt),ne===gt.promise())throw new TypeError("Thenable self-resolution");Me=ne&&(typeof ne=="object"||typeof ne=="function")&&ne.then,c(Me)?Ct?Me.call(ne,$(R,gt,F,Ct),$(R,gt,k,Ct)):(R++,Me.call(ne,$(R,gt,F,Ct),$(R,gt,k,Ct),$(R,gt,F,gt.notifyWith))):(nt!==F&&(It=void 0,zt=[ne]),(Ct||gt.resolveWith)(It,zt))}},oe=Ct?Ht:function(){try{Ht()}catch(ne){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(ne,oe.error),lt+1>=R&&(nt!==k&&(It=void 0,zt=[ne]),gt.rejectWith(It,zt))}};lt?oe():(v.Deferred.getErrorHook?oe.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(oe.error=v.Deferred.getStackHook()),r.setTimeout(oe))}}return v.Deferred(function(lt){g[0][3].add($(0,lt,c(W)?W:F,lt.notifyWith)),g[1][3].add($(0,lt,c(w)?w:F)),g[2][3].add($(0,lt,c(E)?E:k))}).promise()},promise:function(w){return w!=null?v.extend(w,C):C}},S={};return v.each(g,function(w,E){var W=E[2],R=E[5];C[E[1]]=W.add,R&&W.add(function(){m=R},g[3-w][2].disable,g[3-w][3].disable,g[0][2].lock,g[0][3].lock),W.add(E[3].fire),S[E[0]]=function(){return S[E[0]+"With"](this===S?void 0:this,arguments),this},S[E[0]+"With"]=W.fireWith}),C.promise(S),a&&a.call(S,S),S},when:function(a){var g=arguments.length,m=g,C=Array(m),S=P.call(arguments),w=v.Deferred(),E=function(W){return function(R){C[W]=this,S[W]=arguments.length>1?P.call(arguments):R,--g||w.resolveWith(C,S)}};if(g<=1&&(L(a,w.done(E(m)).resolve,w.reject,!g),w.state()==="pending"||c(S[m]&&S[m].then)))return w.then();for(;m--;)L(S[m],E(m),w.reject);return w.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(a,g){r.console&&r.console.warn&&a&&U.test(a.name)&&r.console.warn("jQuery.Deferred exception: "+a.message,a.stack,g)},v.readyException=function(a){r.setTimeout(function(){throw a})};var X=v.Deferred();v.fn.ready=function(a){return X.then(a).catch(function(g){v.readyException(g)}),this},v.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(a!==!0&&--v.readyWait>0)&&X.resolveWith(h,[v]))}}),v.ready.then=X.then;function Y(){h.removeEventListener("DOMContentLoaded",Y),r.removeEventListener("load",Y),v.ready()}h.readyState==="complete"||h.readyState!=="loading"&&!h.documentElement.doScroll?r.setTimeout(v.ready):(h.addEventListener("DOMContentLoaded",Y),r.addEventListener("load",Y));var K=function(a,g,m,C,S,w,E){var W=0,R=a.length,$=m==null;if(_(m)==="object"){S=!0;for(W in m)K(a,g,W,m[W],!0,w,E)}else if(C!==void 0&&(S=!0,c(C)||(E=!0),$&&(E?(g.call(a,C),g=null):($=g,g=function(lt,gt,nt){return $.call(v(lt),nt)})),g))for(;W<R;W++)g(a[W],m,E?C:C.call(a[W],W,g(a[W],m)));return S?a:$?g.call(a):R?g(a[0],m):w},Z=/^-ms-/,ft=/-([a-z])/g;function it(a,g){return g.toUpperCase()}function J(a){return a.replace(Z,"ms-").replace(ft,it)}var ht=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function yt(){this.expando=v.expando+yt.uid++}yt.uid=1,yt.prototype={cache:function(a){var g=a[this.expando];return g||(g={},ht(a)&&(a.nodeType?a[this.expando]=g:Object.defineProperty(a,this.expando,{value:g,configurable:!0}))),g},set:function(a,g,m){var C,S=this.cache(a);if(typeof g=="string")S[J(g)]=m;else for(C in g)S[J(C)]=g[C];return S},get:function(a,g){return g===void 0?this.cache(a):a[this.expando]&&a[this.expando][J(g)]},access:function(a,g,m){return g===void 0||g&&typeof g=="string"&&m===void 0?this.get(a,g):(this.set(a,g,m),m!==void 0?m:g)},remove:function(a,g){var m,C=a[this.expando];if(C!==void 0){if(g!==void 0)for(Array.isArray(g)?g=g.map(J):(g=J(g),g=g in C?[g]:g.match(ct)||[]),m=g.length;m--;)delete C[g[m]];(g===void 0||v.isEmptyObject(C))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var g=a[this.expando];return g!==void 0&&!v.isEmptyObject(g)}};var at=new yt,Pt=new yt,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jt=/[A-Z]/g;function Bt(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:Mt.test(a)?JSON.parse(a):a}function Qt(a,g,m){var C;if(m===void 0&&a.nodeType===1)if(C="data-"+g.replace(jt,"-$&").toLowerCase(),m=a.getAttribute(C),typeof m=="string"){try{m=Bt(m)}catch{}Pt.set(a,g,m)}else m=void 0;return m}v.extend({hasData:function(a){return Pt.hasData(a)||at.hasData(a)},data:function(a,g,m){return Pt.access(a,g,m)},removeData:function(a,g){Pt.remove(a,g)},_data:function(a,g,m){return at.access(a,g,m)},_removeData:function(a,g){at.remove(a,g)}}),v.fn.extend({data:function(a,g){var m,C,S,w=this[0],E=w&&w.attributes;if(a===void 0){if(this.length&&(S=Pt.get(w),w.nodeType===1&&!at.get(w,"hasDataAttrs"))){for(m=E.length;m--;)E[m]&&(C=E[m].name,C.indexOf("data-")===0&&(C=J(C.slice(5)),Qt(w,C,S[C])));at.set(w,"hasDataAttrs",!0)}return S}return typeof a=="object"?this.each(function(){Pt.set(this,a)}):K(this,function(W){var R;if(w&&W===void 0)return R=Pt.get(w,a),R!==void 0||(R=Qt(w,a),R!==void 0)?R:void 0;this.each(function(){Pt.set(this,a,W)})},null,g,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Pt.remove(this,a)})}}),v.extend({queue:function(a,g,m){var C;if(a)return g=(g||"fx")+"queue",C=at.get(a,g),m&&(!C||Array.isArray(m)?C=at.access(a,g,v.makeArray(m)):C.push(m)),C||[]},dequeue:function(a,g){g=g||"fx";var m=v.queue(a,g),C=m.length,S=m.shift(),w=v._queueHooks(a,g),E=function(){v.dequeue(a,g)};S==="inprogress"&&(S=m.shift(),C--),S&&(g==="fx"&&m.unshift("inprogress"),delete w.stop,S.call(a,E,w)),!C&&w&&w.empty.fire()},_queueHooks:function(a,g){var m=g+"queueHooks";return at.get(a,m)||at.access(a,m,{empty:v.Callbacks("once memory").add(function(){at.remove(a,[g+"queue",m])})})}}),v.fn.extend({queue:function(a,g){var m=2;return typeof a!="string"&&(g=a,a="fx",m--),arguments.length<m?v.queue(this[0],a):g===void 0?this:this.each(function(){var C=v.queue(this,a,g);v._queueHooks(this,a),a==="fx"&&C[0]!=="inprogress"&&v.dequeue(this,a)})},dequeue:function(a){return this.each(function(){v.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,g){var m,C=1,S=v.Deferred(),w=this,E=this.length,W=function(){--C||S.resolveWith(w,[w])};for(typeof a!="string"&&(g=a,a=void 0),a=a||"fx";E--;)m=at.get(w[E],a+"queueHooks"),m&&m.empty&&(C++,m.empty.add(W));return W(),S.promise(g)}});var fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+fe+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],be=h.documentElement,Zt=function(a){return v.contains(a.ownerDocument,a)},pe={composed:!0};be.getRootNode&&(Zt=function(a){return v.contains(a.ownerDocument,a)||a.getRootNode(pe)===a.ownerDocument});var ri=function(a,g){return a=g||a,a.style.display==="none"||a.style.display===""&&Zt(a)&&v.css(a,"display")==="none"};function Kr(a,g,m,C){var S,w,E=20,W=C?function(){return C.cur()}:function(){return v.css(a,g,"")},R=W(),$=m&&m[3]||(v.cssNumber[g]?"":"px"),lt=a.nodeType&&(v.cssNumber[g]||$!=="px"&&+R)&&ie.exec(v.css(a,g));if(lt&&lt[3]!==$){for(R=R/2,$=$||lt[3],lt=+R||1;E--;)v.style(a,g,lt+$),(1-w)*(1-(w=W()/R||.5))<=0&&(E=0),lt=lt/w;lt=lt*2,v.style(a,g,lt+$),m=m||[]}return m&&(lt=+lt||+R||0,S=m[1]?lt+(m[1]+1)*m[2]:+m[2],C&&(C.unit=$,C.start=lt,C.end=S)),S}var $r={};function Uo(a){var g,m=a.ownerDocument,C=a.nodeName,S=$r[C];return S||(g=m.body.appendChild(m.createElement(C)),S=v.css(g,"display"),g.parentNode.removeChild(g),S==="none"&&(S="block"),$r[C]=S,S)}function vi(a,g){for(var m,C,S=[],w=0,E=a.length;w<E;w++)C=a[w],C.style&&(m=C.style.display,g?(m==="none"&&(S[w]=at.get(C,"display")||null,S[w]||(C.style.display="")),C.style.display===""&&ri(C)&&(S[w]=Uo(C))):m!=="none"&&(S[w]="none",at.set(C,"display",m)));for(w=0;w<E;w++)S[w]!=null&&(a[w].style.display=S[w]);return a}v.fn.extend({show:function(){return vi(this,!0)},hide:function(){return vi(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){ri(this)?v(this).show():v(this).hide()})}});var Li=/^(?:checkbox|radio)$/i,Jr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Qr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=h.createDocumentFragment(),g=a.appendChild(h.createElement("div")),m=h.createElement("input");m.setAttribute("type","radio"),m.setAttribute("checked","checked"),m.setAttribute("name","t"),g.appendChild(m),o.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!g.cloneNode(!0).lastChild.defaultValue,g.innerHTML="<option></option>",o.option=!!g.lastChild})();var xe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,o.option||(xe.optgroup=xe.option=[1,"<select multiple='multiple'>","</select>"]);function ve(a,g){var m;return typeof a.getElementsByTagName<"u"?m=a.getElementsByTagName(g||"*"):typeof a.querySelectorAll<"u"?m=a.querySelectorAll(g||"*"):m=[],g===void 0||g&&tt(a,g)?v.merge([a],m):m}function jn(a,g){for(var m=0,C=a.length;m<C;m++)at.set(a[m],"globalEval",!g||at.get(g[m],"globalEval"))}var zo=/<|&#?\w+;/;function Zr(a,g,m,C,S){for(var w,E,W,R,$,lt,gt=g.createDocumentFragment(),nt=[],Ct=0,It=a.length;Ct<It;Ct++)if(w=a[Ct],w||w===0)if(_(w)==="object")v.merge(nt,w.nodeType?[w]:w);else if(!zo.test(w))nt.push(g.createTextNode(w));else{for(E=E||gt.appendChild(g.createElement("div")),W=(Jr.exec(w)||["",""])[1].toLowerCase(),R=xe[W]||xe._default,E.innerHTML=R[1]+v.htmlPrefilter(w)+R[2],lt=R[0];lt--;)E=E.lastChild;v.merge(nt,E.childNodes),E=gt.firstChild,E.textContent=""}for(gt.textContent="",Ct=0;w=nt[Ct++];){if(C&&v.inArray(w,C)>-1){S&&S.push(w);continue}if($=Zt(w),E=ve(gt.appendChild(w),"script"),$&&jn(E),m)for(lt=0;w=E[lt++];)Qr.test(w.type||"")&&m.push(w)}return gt}var ts=/^([^.]*)(?:\.(.+)|)/;function mi(){return!0}function yi(){return!1}function In(a,g,m,C,S,w){var E,W;if(typeof g=="object"){typeof m!="string"&&(C=C||m,m=void 0);for(W in g)In(a,W,m,C,g[W],w);return a}if(C==null&&S==null?(S=m,C=m=void 0):S==null&&(typeof m=="string"?(S=C,C=void 0):(S=C,C=m,m=void 0)),S===!1)S=yi;else if(!S)return a;return w===1&&(E=S,S=function(R){return v().off(R),E.apply(this,arguments)},S.guid=E.guid||(E.guid=v.guid++)),a.each(function(){v.event.add(this,g,S,C,m)})}v.event={global:{},add:function(a,g,m,C,S){var w,E,W,R,$,lt,gt,nt,Ct,It,zt,Ht=at.get(a);if(ht(a))for(m.handler&&(w=m,m=w.handler,S=w.selector),S&&v.find.matchesSelector(be,S),m.guid||(m.guid=v.guid++),(R=Ht.events)||(R=Ht.events=Object.create(null)),(E=Ht.handle)||(E=Ht.handle=function(oe){return typeof v<"u"&&v.event.triggered!==oe.type?v.event.dispatch.apply(a,arguments):void 0}),g=(g||"").match(ct)||[""],$=g.length;$--;)W=ts.exec(g[$])||[],Ct=zt=W[1],It=(W[2]||"").split(".").sort(),Ct&&(gt=v.event.special[Ct]||{},Ct=(S?gt.delegateType:gt.bindType)||Ct,gt=v.event.special[Ct]||{},lt=v.extend({type:Ct,origType:zt,data:C,handler:m,guid:m.guid,selector:S,needsContext:S&&v.expr.match.needsContext.test(S),namespace:It.join(".")},w),(nt=R[Ct])||(nt=R[Ct]=[],nt.delegateCount=0,(!gt.setup||gt.setup.call(a,C,It,E)===!1)&&a.addEventListener&&a.addEventListener(Ct,E)),gt.add&&(gt.add.call(a,lt),lt.handler.guid||(lt.handler.guid=m.guid)),S?nt.splice(nt.delegateCount++,0,lt):nt.push(lt),v.event.global[Ct]=!0)},remove:function(a,g,m,C,S){var w,E,W,R,$,lt,gt,nt,Ct,It,zt,Ht=at.hasData(a)&&at.get(a);if(!(!Ht||!(R=Ht.events))){for(g=(g||"").match(ct)||[""],$=g.length;$--;){if(W=ts.exec(g[$])||[],Ct=zt=W[1],It=(W[2]||"").split(".").sort(),!Ct){for(Ct in R)v.event.remove(a,Ct+g[$],m,C,!0);continue}for(gt=v.event.special[Ct]||{},Ct=(C?gt.delegateType:gt.bindType)||Ct,nt=R[Ct]||[],W=W[2]&&new RegExp("(^|\\.)"+It.join("\\.(?:.*\\.|)")+"(\\.|$)"),E=w=nt.length;w--;)lt=nt[w],(S||zt===lt.origType)&&(!m||m.guid===lt.guid)&&(!W||W.test(lt.namespace))&&(!C||C===lt.selector||C==="**"&&lt.selector)&&(nt.splice(w,1),lt.selector&&nt.delegateCount--,gt.remove&&gt.remove.call(a,lt));E&&!nt.length&&((!gt.teardown||gt.teardown.call(a,It,Ht.handle)===!1)&&v.removeEvent(a,Ct,Ht.handle),delete R[Ct])}v.isEmptyObject(R)&&at.remove(a,"handle events")}},dispatch:function(a){var g,m,C,S,w,E,W=new Array(arguments.length),R=v.event.fix(a),$=(at.get(this,"events")||Object.create(null))[R.type]||[],lt=v.event.special[R.type]||{};for(W[0]=R,g=1;g<arguments.length;g++)W[g]=arguments[g];if(R.delegateTarget=this,!(lt.preDispatch&&lt.preDispatch.call(this,R)===!1)){for(E=v.event.handlers.call(this,R,$),g=0;(S=E[g++])&&!R.isPropagationStopped();)for(R.currentTarget=S.elem,m=0;(w=S.handlers[m++])&&!R.isImmediatePropagationStopped();)(!R.rnamespace||w.namespace===!1||R.rnamespace.test(w.namespace))&&(R.handleObj=w,R.data=w.data,C=((v.event.special[w.origType]||{}).handle||w.handler).apply(S.elem,W),C!==void 0&&(R.result=C)===!1&&(R.preventDefault(),R.stopPropagation()));return lt.postDispatch&&lt.postDispatch.call(this,R),R.result}},handlers:function(a,g){var m,C,S,w,E,W=[],R=g.delegateCount,$=a.target;if(R&&$.nodeType&&!(a.type==="click"&&a.button>=1)){for(;$!==this;$=$.parentNode||this)if($.nodeType===1&&!(a.type==="click"&&$.disabled===!0)){for(w=[],E={},m=0;m<R;m++)C=g[m],S=C.selector+" ",E[S]===void 0&&(E[S]=C.needsContext?v(S,this).index($)>-1:v.find(S,this,null,[$]).length),E[S]&&w.push(C);w.length&&W.push({elem:$,handlers:w})}}return $=this,R<g.length&&W.push({elem:$,handlers:g.slice(R)}),W},addProp:function(a,g){Object.defineProperty(v.Event.prototype,a,{enumerable:!0,configurable:!0,get:c(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(m){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:m})}})},fix:function(a){return a[v.expando]?a:new v.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var g=this||a;return Li.test(g.type)&&g.click&&tt(g,"input")&&en(g,"click",!0),!1},trigger:function(a){var g=this||a;return Li.test(g.type)&&g.click&&tt(g,"input")&&en(g,"click"),!0},_default:function(a){var g=a.target;return Li.test(g.type)&&g.click&&tt(g,"input")&&at.get(g,"click")||tt(g,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function en(a,g,m){if(!m){at.get(a,g)===void 0&&v.event.add(a,g,mi);return}at.set(a,g,!1),v.event.add(a,g,{namespace:!1,handler:function(C){var S,w=at.get(this,g);if(C.isTrigger&1&&this[g]){if(w)(v.event.special[g]||{}).delegateType&&C.stopPropagation();else if(w=P.call(arguments),at.set(this,g,w),this[g](),S=at.get(this,g),at.set(this,g,!1),w!==S)return C.stopImmediatePropagation(),C.preventDefault(),S}else w&&(at.set(this,g,v.event.trigger(w[0],w.slice(1),this)),C.stopPropagation(),C.isImmediatePropagationStopped=mi)}})}v.removeEvent=function(a,g,m){a.removeEventListener&&a.removeEventListener(g,m)},v.Event=function(a,g){if(!(this instanceof v.Event))return new v.Event(a,g);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?mi:yi,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,g&&v.extend(this,g),this.timeStamp=a&&a.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:yi,isPropagationStopped:yi,isImmediatePropagationStopped:yi,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=mi,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=mi,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=mi,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(a,g){function m(C){if(h.documentMode){var S=at.get(this,"handle"),w=v.event.fix(C);w.type=C.type==="focusin"?"focus":"blur",w.isSimulated=!0,S(C),w.target===w.currentTarget&&S(w)}else v.event.simulate(g,C.target,v.event.fix(C))}v.event.special[a]={setup:function(){var C;if(en(this,a,!0),h.documentMode)C=at.get(this,g),C||this.addEventListener(g,m),at.set(this,g,(C||0)+1);else return!1},trigger:function(){return en(this,a),!0},teardown:function(){var C;if(h.documentMode)C=at.get(this,g)-1,C?at.set(this,g,C):(this.removeEventListener(g,m),at.remove(this,g));else return!1},_default:function(C){return at.get(C.target,a)},delegateType:g},v.event.special[g]={setup:function(){var C=this.ownerDocument||this.document||this,S=h.documentMode?this:C,w=at.get(S,g);w||(h.documentMode?this.addEventListener(g,m):C.addEventListener(a,m,!0)),at.set(S,g,(w||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,S=h.documentMode?this:C,w=at.get(S,g)-1;w?at.set(S,g,w):(h.documentMode?this.removeEventListener(g,m):C.removeEventListener(a,m,!0),at.remove(S,g))}}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,g){v.event.special[a]={delegateType:g,bindType:g,handle:function(m){var C,S=this,w=m.relatedTarget,E=m.handleObj;return(!w||w!==S&&!v.contains(S,w))&&(m.type=E.origType,C=E.handler.apply(this,arguments),m.type=g),C}}}),v.fn.extend({on:function(a,g,m,C){return In(this,a,g,m,C)},one:function(a,g,m,C){return In(this,a,g,m,C,1)},off:function(a,g,m){var C,S;if(a&&a.preventDefault&&a.handleObj)return C=a.handleObj,v(a.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if(typeof a=="object"){for(S in a)this.off(S,g,a[S]);return this}return(g===!1||typeof g=="function")&&(m=g,g=void 0),m===!1&&(m=yi),this.each(function(){v.event.remove(this,a,m,g)})}});var Vo=/<script|<style|<link/i,Go=/checked\s*(?:[^=]|=\s*.checked.)/i,qo=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function es(a,g){return tt(a,"table")&&tt(g.nodeType!==11?g:g.firstChild,"tr")&&v(a).children("tbody")[0]||a}function Ko(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function $o(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function is(a,g){var m,C,S,w,E,W,R;if(g.nodeType===1){if(at.hasData(a)&&(w=at.get(a),R=w.events,R)){at.remove(g,"handle events");for(S in R)for(m=0,C=R[S].length;m<C;m++)v.event.add(g,S,R[S][m])}Pt.hasData(a)&&(E=Pt.access(a),W=v.extend({},E),Pt.set(g,W))}}function Jo(a,g){var m=g.nodeName.toLowerCase();m==="input"&&Li.test(a.type)?g.checked=a.checked:(m==="input"||m==="textarea")&&(g.defaultValue=a.defaultValue)}function _i(a,g,m,C){g=z(g);var S,w,E,W,R,$,lt=0,gt=a.length,nt=gt-1,Ct=g[0],It=c(Ct);if(It||gt>1&&typeof Ct=="string"&&!o.checkClone&&Go.test(Ct))return a.each(function(zt){var Ht=a.eq(zt);It&&(g[0]=Ct.call(this,zt,Ht.html())),_i(Ht,g,m,C)});if(gt&&(S=Zr(g,a[0].ownerDocument,!1,a,C),w=S.firstChild,S.childNodes.length===1&&(S=w),w||C)){for(E=v.map(ve(S,"script"),Ko),W=E.length;lt<gt;lt++)R=S,lt!==nt&&(R=v.clone(R,!0,!0),W&&v.merge(E,ve(R,"script"))),m.call(a[lt],R,lt);if(W)for($=E[E.length-1].ownerDocument,v.map(E,$o),lt=0;lt<W;lt++)R=E[lt],Qr.test(R.type||"")&&!at.access(R,"globalEval")&&v.contains($,R)&&(R.src&&(R.type||"").toLowerCase()!=="module"?v._evalUrl&&!R.noModule&&v._evalUrl(R.src,{nonce:R.nonce||R.getAttribute("nonce")},$):y(R.textContent.replace(qo,""),R,$))}return a}function ns(a,g,m){for(var C,S=g?v.filter(g,a):a,w=0;(C=S[w])!=null;w++)!m&&C.nodeType===1&&v.cleanData(ve(C)),C.parentNode&&(m&&Zt(C)&&jn(ve(C,"script")),C.parentNode.removeChild(C));return a}v.extend({htmlPrefilter:function(a){return a},clone:function(a,g,m){var C,S,w,E,W=a.cloneNode(!0),R=Zt(a);if(!o.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!v.isXMLDoc(a))for(E=ve(W),w=ve(a),C=0,S=w.length;C<S;C++)Jo(w[C],E[C]);if(g)if(m)for(w=w||ve(a),E=E||ve(W),C=0,S=w.length;C<S;C++)is(w[C],E[C]);else is(a,W);return E=ve(W,"script"),E.length>0&&jn(E,!R&&ve(a,"script")),W},cleanData:function(a){for(var g,m,C,S=v.event.special,w=0;(m=a[w])!==void 0;w++)if(ht(m)){if(g=m[at.expando]){if(g.events)for(C in g.events)S[C]?v.event.remove(m,C):v.removeEvent(m,C,g.handle);m[at.expando]=void 0}m[Pt.expando]&&(m[Pt.expando]=void 0)}}}),v.fn.extend({detach:function(a){return ns(this,a,!0)},remove:function(a){return ns(this,a)},text:function(a){return K(this,function(g){return g===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=g)})},null,a,arguments.length)},append:function(){return _i(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=es(this,a);g.appendChild(a)}})},prepend:function(){return _i(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=es(this,a);g.insertBefore(a,g.firstChild)}})},before:function(){return _i(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return _i(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,g=0;(a=this[g])!=null;g++)a.nodeType===1&&(v.cleanData(ve(a,!1)),a.textContent="");return this},clone:function(a,g){return a=a??!1,g=g??a,this.map(function(){return v.clone(this,a,g)})},html:function(a){return K(this,function(g){var m=this[0]||{},C=0,S=this.length;if(g===void 0&&m.nodeType===1)return m.innerHTML;if(typeof g=="string"&&!Vo.test(g)&&!xe[(Jr.exec(g)||["",""])[1].toLowerCase()]){g=v.htmlPrefilter(g);try{for(;C<S;C++)m=this[C]||{},m.nodeType===1&&(v.cleanData(ve(m,!1)),m.innerHTML=g);m=0}catch{}}m&&this.empty().append(g)},null,a,arguments.length)},replaceWith:function(){var a=[];return _i(this,arguments,function(g){var m=this.parentNode;v.inArray(this,a)<0&&(v.cleanData(ve(this)),m&&m.replaceChild(g,this))},a)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,g){v.fn[a]=function(m){for(var C,S=[],w=v(m),E=w.length-1,W=0;W<=E;W++)C=W===E?this:this.clone(!0),v(w[W])[g](C),d.apply(S,C.get());return this.pushStack(S)}});var Rn=new RegExp("^("+fe+")(?!px)[a-z%]+$","i"),Bn=/^--/,nn=function(a){var g=a.ownerDocument.defaultView;return(!g||!g.opener)&&(g=r),g.getComputedStyle(a)},rs=function(a,g,m){var C,S,w={};for(S in g)w[S]=a.style[S],a.style[S]=g[S];C=m.call(a);for(S in g)a.style[S]=w[S];return C},Qo=new RegExp(se.join("|"),"i");(function(){function a(){if($){R.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",$.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(R).appendChild($);var lt=r.getComputedStyle($);m=lt.top!=="1%",W=g(lt.marginLeft)===12,$.style.right="60%",w=g(lt.right)===36,C=g(lt.width)===36,$.style.position="absolute",S=g($.offsetWidth/3)===12,be.removeChild(R),$=null}}function g(lt){return Math.round(parseFloat(lt))}var m,C,S,w,E,W,R=h.createElement("div"),$=h.createElement("div");$.style&&($.style.backgroundClip="content-box",$.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle=$.style.backgroundClip==="content-box",v.extend(o,{boxSizingReliable:function(){return a(),C},pixelBoxStyles:function(){return a(),w},pixelPosition:function(){return a(),m},reliableMarginLeft:function(){return a(),W},scrollboxSize:function(){return a(),S},reliableTrDimensions:function(){var lt,gt,nt,Ct;return E==null&&(lt=h.createElement("table"),gt=h.createElement("tr"),nt=h.createElement("div"),lt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",gt.style.cssText="box-sizing:content-box;border:1px solid",gt.style.height="1px",nt.style.height="9px",nt.style.display="block",be.appendChild(lt).appendChild(gt).appendChild(nt),Ct=r.getComputedStyle(gt),E=parseInt(Ct.height,10)+parseInt(Ct.borderTopWidth,10)+parseInt(Ct.borderBottomWidth,10)===gt.offsetHeight,be.removeChild(lt)),E}}))})();function ji(a,g,m){var C,S,w,E,W=Bn.test(g),R=a.style;return m=m||nn(a),m&&(E=m.getPropertyValue(g)||m[g],W&&E&&(E=E.replace(bt,"$1")||void 0),E===""&&!Zt(a)&&(E=v.style(a,g)),!o.pixelBoxStyles()&&Rn.test(E)&&Qo.test(g)&&(C=R.width,S=R.minWidth,w=R.maxWidth,R.minWidth=R.maxWidth=R.width=E,E=m.width,R.width=C,R.minWidth=S,R.maxWidth=w)),E!==void 0?E+"":E}function ss(a,g){return{get:function(){if(a()){delete this.get;return}return(this.get=g).apply(this,arguments)}}}var os=["Webkit","Moz","ms"],as=h.createElement("div").style,ls={};function Zo(a){for(var g=a[0].toUpperCase()+a.slice(1),m=os.length;m--;)if(a=os[m]+g,a in as)return a}function Nn(a){var g=v.cssProps[a]||ls[a];return g||(a in as?a:ls[a]=Zo(a)||a)}var ta=/^(none|table(?!-c[ea]).+)/,ea={position:"absolute",visibility:"hidden",display:"block"},us={letterSpacing:"0",fontWeight:"400"};function cs(a,g,m){var C=ie.exec(g);return C?Math.max(0,C[2]-(m||0))+(C[3]||"px"):g}function Hn(a,g,m,C,S,w){var E=g==="width"?1:0,W=0,R=0,$=0;if(m===(C?"border":"content"))return 0;for(;E<4;E+=2)m==="margin"&&($+=v.css(a,m+se[E],!0,S)),C?(m==="content"&&(R-=v.css(a,"padding"+se[E],!0,S)),m!=="margin"&&(R-=v.css(a,"border"+se[E]+"Width",!0,S))):(R+=v.css(a,"padding"+se[E],!0,S),m!=="padding"?R+=v.css(a,"border"+se[E]+"Width",!0,S):W+=v.css(a,"border"+se[E]+"Width",!0,S));return!C&&w>=0&&(R+=Math.max(0,Math.ceil(a["offset"+g[0].toUpperCase()+g.slice(1)]-w-R-W-.5))||0),R+$}function fs(a,g,m){var C=nn(a),S=!o.boxSizingReliable()||m,w=S&&v.css(a,"boxSizing",!1,C)==="border-box",E=w,W=ji(a,g,C),R="offset"+g[0].toUpperCase()+g.slice(1);if(Rn.test(W)){if(!m)return W;W="auto"}return(!o.boxSizingReliable()&&w||!o.reliableTrDimensions()&&tt(a,"tr")||W==="auto"||!parseFloat(W)&&v.css(a,"display",!1,C)==="inline")&&a.getClientRects().length&&(w=v.css(a,"boxSizing",!1,C)==="border-box",E=R in a,E&&(W=a[R])),W=parseFloat(W)||0,W+Hn(a,g,m||(w?"border":"content"),E,C,W)+"px"}v.extend({cssHooks:{opacity:{get:function(a,g){if(g){var m=ji(a,"opacity");return m===""?"1":m}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,g,m,C){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var S,w,E,W=J(g),R=Bn.test(g),$=a.style;if(R||(g=Nn(W)),E=v.cssHooks[g]||v.cssHooks[W],m!==void 0){if(w=typeof m,w==="string"&&(S=ie.exec(m))&&S[1]&&(m=Kr(a,g,S),w="number"),m==null||m!==m)return;w==="number"&&!R&&(m+=S&&S[3]||(v.cssNumber[W]?"":"px")),!o.clearCloneStyle&&m===""&&g.indexOf("background")===0&&($[g]="inherit"),(!E||!("set"in E)||(m=E.set(a,m,C))!==void 0)&&(R?$.setProperty(g,m):$[g]=m)}else return E&&"get"in E&&(S=E.get(a,!1,C))!==void 0?S:$[g]}},css:function(a,g,m,C){var S,w,E,W=J(g),R=Bn.test(g);return R||(g=Nn(W)),E=v.cssHooks[g]||v.cssHooks[W],E&&"get"in E&&(S=E.get(a,!0,m)),S===void 0&&(S=ji(a,g,C)),S==="normal"&&g in us&&(S=us[g]),m===""||m?(w=parseFloat(S),m===!0||isFinite(w)?w||0:S):S}}),v.each(["height","width"],function(a,g){v.cssHooks[g]={get:function(m,C,S){if(C)return ta.test(v.css(m,"display"))&&(!m.getClientRects().length||!m.getBoundingClientRect().width)?rs(m,ea,function(){return fs(m,g,S)}):fs(m,g,S)},set:function(m,C,S){var w,E=nn(m),W=!o.scrollboxSize()&&E.position==="absolute",R=W||S,$=R&&v.css(m,"boxSizing",!1,E)==="border-box",lt=S?Hn(m,g,S,$,E):0;return $&&W&&(lt-=Math.ceil(m["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(E[g])-Hn(m,g,"border",!1,E)-.5)),lt&&(w=ie.exec(C))&&(w[3]||"px")!=="px"&&(m.style[g]=C,C=v.css(m,g)),cs(m,C,lt)}}}),v.cssHooks.marginLeft=ss(o.reliableMarginLeft,function(a,g){if(g)return(parseFloat(ji(a,"marginLeft"))||a.getBoundingClientRect().left-rs(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(a,g){v.cssHooks[a+g]={expand:function(m){for(var C=0,S={},w=typeof m=="string"?m.split(" "):[m];C<4;C++)S[a+se[C]+g]=w[C]||w[C-2]||w[0];return S}},a!=="margin"&&(v.cssHooks[a+g].set=cs)}),v.fn.extend({css:function(a,g){return K(this,function(m,C,S){var w,E,W={},R=0;if(Array.isArray(C)){for(w=nn(m),E=C.length;R<E;R++)W[C[R]]=v.css(m,C[R],!1,w);return W}return S!==void 0?v.style(m,C,S):v.css(m,C)},a,g,arguments.length>1)}});function me(a,g,m,C,S){return new me.prototype.init(a,g,m,C,S)}v.Tween=me,me.prototype={constructor:me,init:function(a,g,m,C,S,w){this.elem=a,this.prop=m,this.easing=S||v.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=C,this.unit=w||(v.cssNumber[m]?"":"px")},cur:function(){var a=me.propHooks[this.prop];return a&&a.get?a.get(this):me.propHooks._default.get(this)},run:function(a){var g,m=me.propHooks[this.prop];return this.options.duration?this.pos=g=v.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=g=a,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),m&&m.set?m.set(this):me.propHooks._default.set(this),this}},me.prototype.init.prototype=me.prototype,me.propHooks={_default:{get:function(a){var g;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(g=v.css(a.elem,a.prop,""),!g||g==="auto"?0:g)},set:function(a){v.fx.step[a.prop]?v.fx.step[a.prop](a):a.elem.nodeType===1&&(v.cssHooks[a.prop]||a.elem.style[Nn(a.prop)]!=null)?v.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},me.propHooks.scrollTop=me.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},v.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},v.fx=me.prototype.init,v.fx.step={};var Ci,rn,ia=/^(?:toggle|show|hide)$/,na=/queueHooks$/;function Wn(){rn&&(h.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Wn):r.setTimeout(Wn,v.fx.interval),v.fx.tick())}function hs(){return r.setTimeout(function(){Ci=void 0}),Ci=Date.now()}function sn(a,g){var m,C=0,S={height:a};for(g=g?1:0;C<4;C+=2-g)m=se[C],S["margin"+m]=S["padding"+m]=a;return g&&(S.opacity=S.width=a),S}function ds(a,g,m){for(var C,S=(Te.tweeners[g]||[]).concat(Te.tweeners["*"]),w=0,E=S.length;w<E;w++)if(C=S[w].call(m,g,a))return C}function ra(a,g,m){var C,S,w,E,W,R,$,lt,gt="width"in g||"height"in g,nt=this,Ct={},It=a.style,zt=a.nodeType&&ri(a),Ht=at.get(a,"fxshow");m.queue||(E=v._queueHooks(a,"fx"),E.unqueued==null&&(E.unqueued=0,W=E.empty.fire,E.empty.fire=function(){E.unqueued||W()}),E.unqueued++,nt.always(function(){nt.always(function(){E.unqueued--,v.queue(a,"fx").length||E.empty.fire()})}));for(C in g)if(S=g[C],ia.test(S)){if(delete g[C],w=w||S==="toggle",S===(zt?"hide":"show"))if(S==="show"&&Ht&&Ht[C]!==void 0)zt=!0;else continue;Ct[C]=Ht&&Ht[C]||v.style(a,C)}if(R=!v.isEmptyObject(g),!(!R&&v.isEmptyObject(Ct))){gt&&a.nodeType===1&&(m.overflow=[It.overflow,It.overflowX,It.overflowY],$=Ht&&Ht.display,$==null&&($=at.get(a,"display")),lt=v.css(a,"display"),lt==="none"&&($?lt=$:(vi([a],!0),$=a.style.display||$,lt=v.css(a,"display"),vi([a]))),(lt==="inline"||lt==="inline-block"&&$!=null)&&v.css(a,"float")==="none"&&(R||(nt.done(function(){It.display=$}),$==null&&(lt=It.display,$=lt==="none"?"":lt)),It.display="inline-block")),m.overflow&&(It.overflow="hidden",nt.always(function(){It.overflow=m.overflow[0],It.overflowX=m.overflow[1],It.overflowY=m.overflow[2]})),R=!1;for(C in Ct)R||(Ht?"hidden"in Ht&&(zt=Ht.hidden):Ht=at.access(a,"fxshow",{display:$}),w&&(Ht.hidden=!zt),zt&&vi([a],!0),nt.done(function(){zt||vi([a]),at.remove(a,"fxshow");for(C in Ct)v.style(a,C,Ct[C])})),R=ds(zt?Ht[C]:0,C,nt),C in Ht||(Ht[C]=R.start,zt&&(R.end=R.start,R.start=0))}}function sa(a,g){var m,C,S,w,E;for(m in a)if(C=J(m),S=g[C],w=a[m],Array.isArray(w)&&(S=w[1],w=a[m]=w[0]),m!==C&&(a[C]=w,delete a[m]),E=v.cssHooks[C],E&&"expand"in E){w=E.expand(w),delete a[C];for(m in w)m in a||(a[m]=w[m],g[m]=S)}else g[C]=S}function Te(a,g,m){var C,S,w=0,E=Te.prefilters.length,W=v.Deferred().always(function(){delete R.elem}),R=function(){if(S)return!1;for(var gt=Ci||hs(),nt=Math.max(0,$.startTime+$.duration-gt),Ct=nt/$.duration||0,It=1-Ct,zt=0,Ht=$.tweens.length;zt<Ht;zt++)$.tweens[zt].run(It);return W.notifyWith(a,[$,It,nt]),It<1&&Ht?nt:(Ht||W.notifyWith(a,[$,1,0]),W.resolveWith(a,[$]),!1)},$=W.promise({elem:a,props:v.extend({},g),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},m),originalProperties:g,originalOptions:m,startTime:Ci||hs(),duration:m.duration,tweens:[],createTween:function(gt,nt){var Ct=v.Tween(a,$.opts,gt,nt,$.opts.specialEasing[gt]||$.opts.easing);return $.tweens.push(Ct),Ct},stop:function(gt){var nt=0,Ct=gt?$.tweens.length:0;if(S)return this;for(S=!0;nt<Ct;nt++)$.tweens[nt].run(1);return gt?(W.notifyWith(a,[$,1,0]),W.resolveWith(a,[$,gt])):W.rejectWith(a,[$,gt]),this}}),lt=$.props;for(sa(lt,$.opts.specialEasing);w<E;w++)if(C=Te.prefilters[w].call($,a,lt,$.opts),C)return c(C.stop)&&(v._queueHooks($.elem,$.opts.queue).stop=C.stop.bind(C)),C;return v.map(lt,ds,$),c($.opts.start)&&$.opts.start.call(a,$),$.progress($.opts.progress).done($.opts.done,$.opts.complete).fail($.opts.fail).always($.opts.always),v.fx.timer(v.extend(R,{elem:a,anim:$,queue:$.opts.queue})),$}v.Animation=v.extend(Te,{tweeners:{"*":[function(a,g){var m=this.createTween(a,g);return Kr(m.elem,a,ie.exec(g),m),m}]},tweener:function(a,g){c(a)?(g=a,a=["*"]):a=a.match(ct);for(var m,C=0,S=a.length;C<S;C++)m=a[C],Te.tweeners[m]=Te.tweeners[m]||[],Te.tweeners[m].unshift(g)},prefilters:[ra],prefilter:function(a,g){g?Te.prefilters.unshift(a):Te.prefilters.push(a)}}),v.speed=function(a,g,m){var C=a&&typeof a=="object"?v.extend({},a):{complete:m||!m&&g||c(a)&&a,duration:a,easing:m&&g||g&&!c(g)&&g};return v.fx.off?C.duration=0:typeof C.duration!="number"&&(C.duration in v.fx.speeds?C.duration=v.fx.speeds[C.duration]:C.duration=v.fx.speeds._default),(C.queue==null||C.queue===!0)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){c(C.old)&&C.old.call(this),C.queue&&v.dequeue(this,C.queue)},C},v.fn.extend({fadeTo:function(a,g,m,C){return this.filter(ri).css("opacity",0).show().end().animate({opacity:g},a,m,C)},animate:function(a,g,m,C){var S=v.isEmptyObject(a),w=v.speed(g,m,C),E=function(){var W=Te(this,v.extend({},a),w);(S||at.get(this,"finish"))&&W.stop(!0)};return E.finish=E,S||w.queue===!1?this.each(E):this.queue(w.queue,E)},stop:function(a,g,m){var C=function(S){var w=S.stop;delete S.stop,w(m)};return typeof a!="string"&&(m=g,g=a,a=void 0),g&&this.queue(a||"fx",[]),this.each(function(){var S=!0,w=a!=null&&a+"queueHooks",E=v.timers,W=at.get(this);if(w)W[w]&&W[w].stop&&C(W[w]);else for(w in W)W[w]&&W[w].stop&&na.test(w)&&C(W[w]);for(w=E.length;w--;)E[w].elem===this&&(a==null||E[w].queue===a)&&(E[w].anim.stop(m),S=!1,E.splice(w,1));(S||!m)&&v.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var g,m=at.get(this),C=m[a+"queue"],S=m[a+"queueHooks"],w=v.timers,E=C?C.length:0;for(m.finish=!0,v.queue(this,a,[]),S&&S.stop&&S.stop.call(this,!0),g=w.length;g--;)w[g].elem===this&&w[g].queue===a&&(w[g].anim.stop(!0),w.splice(g,1));for(g=0;g<E;g++)C[g]&&C[g].finish&&C[g].finish.call(this);delete m.finish})}}),v.each(["toggle","show","hide"],function(a,g){var m=v.fn[g];v.fn[g]=function(C,S,w){return C==null||typeof C=="boolean"?m.apply(this,arguments):this.animate(sn(g,!0),C,S,w)}}),v.each({slideDown:sn("show"),slideUp:sn("hide"),slideToggle:sn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,g){v.fn[a]=function(m,C,S){return this.animate(g,m,C,S)}}),v.timers=[],v.fx.tick=function(){var a,g=0,m=v.timers;for(Ci=Date.now();g<m.length;g++)a=m[g],!a()&&m[g]===a&&m.splice(g--,1);m.length||v.fx.stop(),Ci=void 0},v.fx.timer=function(a){v.timers.push(a),v.fx.start()},v.fx.interval=13,v.fx.start=function(){rn||(rn=!0,Wn())},v.fx.stop=function(){rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(a,g){return a=v.fx&&v.fx.speeds[a]||a,g=g||"fx",this.queue(g,function(m,C){var S=r.setTimeout(m,a);C.stop=function(){r.clearTimeout(S)}})},function(){var a=h.createElement("input"),g=h.createElement("select"),m=g.appendChild(h.createElement("option"));a.type="checkbox",o.checkOn=a.value!=="",o.optSelected=m.selected,a=h.createElement("input"),a.value="t",a.type="radio",o.radioValue=a.value==="t"}();var gs,Ii=v.expr.attrHandle;v.fn.extend({attr:function(a,g){return K(this,v.attr,a,g,arguments.length>1)},removeAttr:function(a){return this.each(function(){v.removeAttr(this,a)})}}),v.extend({attr:function(a,g,m){var C,S,w=a.nodeType;if(!(w===3||w===8||w===2)){if(typeof a.getAttribute>"u")return v.prop(a,g,m);if((w!==1||!v.isXMLDoc(a))&&(S=v.attrHooks[g.toLowerCase()]||(v.expr.match.bool.test(g)?gs:void 0)),m!==void 0){if(m===null){v.removeAttr(a,g);return}return S&&"set"in S&&(C=S.set(a,m,g))!==void 0?C:(a.setAttribute(g,m+""),m)}return S&&"get"in S&&(C=S.get(a,g))!==null?C:(C=v.find.attr(a,g),C??void 0)}},attrHooks:{type:{set:function(a,g){if(!o.radioValue&&g==="radio"&&tt(a,"input")){var m=a.value;return a.setAttribute("type",g),m&&(a.value=m),g}}}},removeAttr:function(a,g){var m,C=0,S=g&&g.match(ct);if(S&&a.nodeType===1)for(;m=S[C++];)a.removeAttribute(m)}}),gs={set:function(a,g,m){return g===!1?v.removeAttr(a,m):a.setAttribute(m,m),m}},v.each(v.expr.match.bool.source.match(/\w+/g),function(a,g){var m=Ii[g]||v.find.attr;Ii[g]=function(C,S,w){var E,W,R=S.toLowerCase();return w||(W=Ii[R],Ii[R]=E,E=m(C,S,w)!=null?R:null,Ii[R]=W),E}});var oa=/^(?:input|select|textarea|button)$/i,aa=/^(?:a|area)$/i;v.fn.extend({prop:function(a,g){return K(this,v.prop,a,g,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[v.propFix[a]||a]})}}),v.extend({prop:function(a,g,m){var C,S,w=a.nodeType;if(!(w===3||w===8||w===2))return(w!==1||!v.isXMLDoc(a))&&(g=v.propFix[g]||g,S=v.propHooks[g]),m!==void 0?S&&"set"in S&&(C=S.set(a,m,g))!==void 0?C:a[g]=m:S&&"get"in S&&(C=S.get(a,g))!==null?C:a[g]},propHooks:{tabIndex:{get:function(a){var g=v.find.attr(a,"tabindex");return g?parseInt(g,10):oa.test(a.nodeName)||aa.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(v.propHooks.selected={get:function(a){var g=a.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(a){var g=a.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function si(a){var g=a.match(ct)||[];return g.join(" ")}function oi(a){return a.getAttribute&&a.getAttribute("class")||""}function Xn(a){return Array.isArray(a)?a:typeof a=="string"?a.match(ct)||[]:[]}v.fn.extend({addClass:function(a){var g,m,C,S,w,E;return c(a)?this.each(function(W){v(this).addClass(a.call(this,W,oi(this)))}):(g=Xn(a),g.length?this.each(function(){if(C=oi(this),m=this.nodeType===1&&" "+si(C)+" ",m){for(w=0;w<g.length;w++)S=g[w],m.indexOf(" "+S+" ")<0&&(m+=S+" ");E=si(m),C!==E&&this.setAttribute("class",E)}}):this)},removeClass:function(a){var g,m,C,S,w,E;return c(a)?this.each(function(W){v(this).removeClass(a.call(this,W,oi(this)))}):arguments.length?(g=Xn(a),g.length?this.each(function(){if(C=oi(this),m=this.nodeType===1&&" "+si(C)+" ",m){for(w=0;w<g.length;w++)for(S=g[w];m.indexOf(" "+S+" ")>-1;)m=m.replace(" "+S+" "," ");E=si(m),C!==E&&this.setAttribute("class",E)}}):this):this.attr("class","")},toggleClass:function(a,g){var m,C,S,w,E=typeof a,W=E==="string"||Array.isArray(a);return c(a)?this.each(function(R){v(this).toggleClass(a.call(this,R,oi(this),g),g)}):typeof g=="boolean"&&W?g?this.addClass(a):this.removeClass(a):(m=Xn(a),this.each(function(){if(W)for(w=v(this),S=0;S<m.length;S++)C=m[S],w.hasClass(C)?w.removeClass(C):w.addClass(C);else(a===void 0||E==="boolean")&&(C=oi(this),C&&at.set(this,"__className__",C),this.setAttribute&&this.setAttribute("class",C||a===!1?"":at.get(this,"__className__")||""))}))},hasClass:function(a){var g,m,C=0;for(g=" "+a+" ";m=this[C++];)if(m.nodeType===1&&(" "+si(oi(m))+" ").indexOf(g)>-1)return!0;return!1}});var la=/\r/g;v.fn.extend({val:function(a){var g,m,C,S=this[0];return arguments.length?(C=c(a),this.each(function(w){var E;this.nodeType===1&&(C?E=a.call(this,w,v(this).val()):E=a,E==null?E="":typeof E=="number"?E+="":Array.isArray(E)&&(E=v.map(E,function(W){return W==null?"":W+""})),g=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!g||!("set"in g)||g.set(this,E,"value")===void 0)&&(this.value=E))})):S?(g=v.valHooks[S.type]||v.valHooks[S.nodeName.toLowerCase()],g&&"get"in g&&(m=g.get(S,"value"))!==void 0?m:(m=S.value,typeof m=="string"?m.replace(la,""):m??"")):void 0}}),v.extend({valHooks:{option:{get:function(a){var g=v.find.attr(a,"value");return g??si(v.text(a))}},select:{get:function(a){var g,m,C,S=a.options,w=a.selectedIndex,E=a.type==="select-one",W=E?null:[],R=E?w+1:S.length;for(w<0?C=R:C=E?w:0;C<R;C++)if(m=S[C],(m.selected||C===w)&&!m.disabled&&(!m.parentNode.disabled||!tt(m.parentNode,"optgroup"))){if(g=v(m).val(),E)return g;W.push(g)}return W},set:function(a,g){for(var m,C,S=a.options,w=v.makeArray(g),E=S.length;E--;)C=S[E],(C.selected=v.inArray(v.valHooks.option.get(C),w)>-1)&&(m=!0);return m||(a.selectedIndex=-1),w}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(a,g){if(Array.isArray(g))return a.checked=v.inArray(v(a).val(),g)>-1}},o.checkOn||(v.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var Ri=r.location,ps={guid:Date.now()},Yn=/\?/;v.parseXML=function(a){var g,m;if(!a||typeof a!="string")return null;try{g=new r.DOMParser().parseFromString(a,"text/xml")}catch{}return m=g&&g.getElementsByTagName("parsererror")[0],(!g||m)&&v.error("Invalid XML: "+(m?v.map(m.childNodes,function(C){return C.textContent}).join(`
`):a)),g};var vs=/^(?:focusinfocus|focusoutblur)$/,ms=function(a){a.stopPropagation()};v.extend(v.event,{trigger:function(a,g,m,C){var S,w,E,W,R,$,lt,gt,nt=[m||h],Ct=e.call(a,"type")?a.type:a,It=e.call(a,"namespace")?a.namespace.split("."):[];if(w=gt=E=m=m||h,!(m.nodeType===3||m.nodeType===8)&&!vs.test(Ct+v.event.triggered)&&(Ct.indexOf(".")>-1&&(It=Ct.split("."),Ct=It.shift(),It.sort()),R=Ct.indexOf(":")<0&&"on"+Ct,a=a[v.expando]?a:new v.Event(Ct,typeof a=="object"&&a),a.isTrigger=C?2:3,a.namespace=It.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+It.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=m),g=g==null?[a]:v.makeArray(g,[a]),lt=v.event.special[Ct]||{},!(!C&&lt.trigger&&lt.trigger.apply(m,g)===!1))){if(!C&&!lt.noBubble&&!s(m)){for(W=lt.delegateType||Ct,vs.test(W+Ct)||(w=w.parentNode);w;w=w.parentNode)nt.push(w),E=w;E===(m.ownerDocument||h)&&nt.push(E.defaultView||E.parentWindow||r)}for(S=0;(w=nt[S++])&&!a.isPropagationStopped();)gt=w,a.type=S>1?W:lt.bindType||Ct,$=(at.get(w,"events")||Object.create(null))[a.type]&&at.get(w,"handle"),$&&$.apply(w,g),$=R&&w[R],$&&$.apply&&ht(w)&&(a.result=$.apply(w,g),a.result===!1&&a.preventDefault());return a.type=Ct,!C&&!a.isDefaultPrevented()&&(!lt._default||lt._default.apply(nt.pop(),g)===!1)&&ht(m)&&R&&c(m[Ct])&&!s(m)&&(E=m[R],E&&(m[R]=null),v.event.triggered=Ct,a.isPropagationStopped()&&gt.addEventListener(Ct,ms),m[Ct](),a.isPropagationStopped()&&gt.removeEventListener(Ct,ms),v.event.triggered=void 0,E&&(m[R]=E)),a.result}},simulate:function(a,g,m){var C=v.extend(new v.Event,m,{type:a,isSimulated:!0});v.event.trigger(C,null,g)}}),v.fn.extend({trigger:function(a,g){return this.each(function(){v.event.trigger(a,g,this)})},triggerHandler:function(a,g){var m=this[0];if(m)return v.event.trigger(a,g,m,!0)}});var ua=/\[\]$/,ys=/\r?\n/g,ca=/^(?:submit|button|image|reset|file)$/i,fa=/^(?:input|select|textarea|keygen)/i;function Un(a,g,m,C){var S;if(Array.isArray(g))v.each(g,function(w,E){m||ua.test(a)?C(a,E):Un(a+"["+(typeof E=="object"&&E!=null?w:"")+"]",E,m,C)});else if(!m&&_(g)==="object")for(S in g)Un(a+"["+S+"]",g[S],m,C);else C(a,g)}v.param=function(a,g){var m,C=[],S=function(w,E){var W=c(E)?E():E;C[C.length]=encodeURIComponent(w)+"="+encodeURIComponent(W??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!v.isPlainObject(a))v.each(a,function(){S(this.name,this.value)});else for(m in a)Un(m,a[m],g,S);return C.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=v.prop(this,"elements");return a?v.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!v(this).is(":disabled")&&fa.test(this.nodeName)&&!ca.test(a)&&(this.checked||!Li.test(a))}).map(function(a,g){var m=v(this).val();return m==null?null:Array.isArray(m)?v.map(m,function(C){return{name:g.name,value:C.replace(ys,`\r
`)}}):{name:g.name,value:m.replace(ys,`\r
`)}}).get()}});var ha=/%20/g,da=/#.*$/,ga=/([?&])_=[^&]*/,pa=/^(.*?):[ \t]*([^\r\n]*)$/mg,va=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ma=/^(?:GET|HEAD)$/,ya=/^\/\//,_s={},zn={},Cs="*/".concat("*"),Vn=h.createElement("a");Vn.href=Ri.href;function bs(a){return function(g,m){typeof g!="string"&&(m=g,g="*");var C,S=0,w=g.toLowerCase().match(ct)||[];if(c(m))for(;C=w[S++];)C[0]==="+"?(C=C.slice(1)||"*",(a[C]=a[C]||[]).unshift(m)):(a[C]=a[C]||[]).push(m)}}function xs(a,g,m,C){var S={},w=a===zn;function E(W){var R;return S[W]=!0,v.each(a[W]||[],function($,lt){var gt=lt(g,m,C);if(typeof gt=="string"&&!w&&!S[gt])return g.dataTypes.unshift(gt),E(gt),!1;if(w)return!(R=gt)}),R}return E(g.dataTypes[0])||!S["*"]&&E("*")}function Gn(a,g){var m,C,S=v.ajaxSettings.flatOptions||{};for(m in g)g[m]!==void 0&&((S[m]?a:C||(C={}))[m]=g[m]);return C&&v.extend(!0,a,C),a}function _a(a,g,m){for(var C,S,w,E,W=a.contents,R=a.dataTypes;R[0]==="*";)R.shift(),C===void 0&&(C=a.mimeType||g.getResponseHeader("Content-Type"));if(C){for(S in W)if(W[S]&&W[S].test(C)){R.unshift(S);break}}if(R[0]in m)w=R[0];else{for(S in m){if(!R[0]||a.converters[S+" "+R[0]]){w=S;break}E||(E=S)}w=w||E}if(w)return w!==R[0]&&R.unshift(w),m[w]}function Ca(a,g,m,C){var S,w,E,W,R,$={},lt=a.dataTypes.slice();if(lt[1])for(E in a.converters)$[E.toLowerCase()]=a.converters[E];for(w=lt.shift();w;)if(a.responseFields[w]&&(m[a.responseFields[w]]=g),!R&&C&&a.dataFilter&&(g=a.dataFilter(g,a.dataType)),R=w,w=lt.shift(),w){if(w==="*")w=R;else if(R!=="*"&&R!==w){if(E=$[R+" "+w]||$["* "+w],!E){for(S in $)if(W=S.split(" "),W[1]===w&&(E=$[R+" "+W[0]]||$["* "+W[0]],E)){E===!0?E=$[S]:$[S]!==!0&&(w=W[0],lt.unshift(W[1]));break}}if(E!==!0)if(E&&a.throws)g=E(g);else try{g=E(g)}catch(gt){return{state:"parsererror",error:E?gt:"No conversion from "+R+" to "+w}}}}return{state:"success",data:g}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ri.href,type:"GET",isLocal:va.test(Ri.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cs,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,g){return g?Gn(Gn(a,v.ajaxSettings),g):Gn(v.ajaxSettings,a)},ajaxPrefilter:bs(_s),ajaxTransport:bs(zn),ajax:function(a,g){typeof a=="object"&&(g=a,a=void 0),g=g||{};var m,C,S,w,E,W,R,$,lt,gt,nt=v.ajaxSetup({},g),Ct=nt.context||nt,It=nt.context&&(Ct.nodeType||Ct.jquery)?v(Ct):v.event,zt=v.Deferred(),Ht=v.Callbacks("once memory"),oe=nt.statusCode||{},ne={},Me={},Fe="canceled",Ut={readyState:0,getResponseHeader:function(Vt){var te;if(R){if(!w)for(w={};te=pa.exec(S);)w[te[1].toLowerCase()+" "]=(w[te[1].toLowerCase()+" "]||[]).concat(te[2]);te=w[Vt.toLowerCase()+" "]}return te==null?null:te.join(", ")},getAllResponseHeaders:function(){return R?S:null},setRequestHeader:function(Vt,te){return R==null&&(Vt=Me[Vt.toLowerCase()]=Me[Vt.toLowerCase()]||Vt,ne[Vt]=te),this},overrideMimeType:function(Vt){return R==null&&(nt.mimeType=Vt),this},statusCode:function(Vt){var te;if(Vt)if(R)Ut.always(Vt[Ut.status]);else for(te in Vt)oe[te]=[oe[te],Vt[te]];return this},abort:function(Vt){var te=Vt||Fe;return m&&m.abort(te),ai(0,te),this}};if(zt.promise(Ut),nt.url=((a||nt.url||Ri.href)+"").replace(ya,Ri.protocol+"//"),nt.type=g.method||g.type||nt.method||nt.type,nt.dataTypes=(nt.dataType||"*").toLowerCase().match(ct)||[""],nt.crossDomain==null){W=h.createElement("a");try{W.href=nt.url,W.href=W.href,nt.crossDomain=Vn.protocol+"//"+Vn.host!=W.protocol+"//"+W.host}catch{nt.crossDomain=!0}}if(nt.data&&nt.processData&&typeof nt.data!="string"&&(nt.data=v.param(nt.data,nt.traditional)),xs(_s,nt,g,Ut),R)return Ut;$=v.event&&nt.global,$&&v.active++===0&&v.event.trigger("ajaxStart"),nt.type=nt.type.toUpperCase(),nt.hasContent=!ma.test(nt.type),C=nt.url.replace(da,""),nt.hasContent?nt.data&&nt.processData&&(nt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(nt.data=nt.data.replace(ha,"+")):(gt=nt.url.slice(C.length),nt.data&&(nt.processData||typeof nt.data=="string")&&(C+=(Yn.test(C)?"&":"?")+nt.data,delete nt.data),nt.cache===!1&&(C=C.replace(ga,"$1"),gt=(Yn.test(C)?"&":"?")+"_="+ps.guid+++gt),nt.url=C+gt),nt.ifModified&&(v.lastModified[C]&&Ut.setRequestHeader("If-Modified-Since",v.lastModified[C]),v.etag[C]&&Ut.setRequestHeader("If-None-Match",v.etag[C])),(nt.data&&nt.hasContent&&nt.contentType!==!1||g.contentType)&&Ut.setRequestHeader("Content-Type",nt.contentType),Ut.setRequestHeader("Accept",nt.dataTypes[0]&&nt.accepts[nt.dataTypes[0]]?nt.accepts[nt.dataTypes[0]]+(nt.dataTypes[0]!=="*"?", "+Cs+"; q=0.01":""):nt.accepts["*"]);for(lt in nt.headers)Ut.setRequestHeader(lt,nt.headers[lt]);if(nt.beforeSend&&(nt.beforeSend.call(Ct,Ut,nt)===!1||R))return Ut.abort();if(Fe="abort",Ht.add(nt.complete),Ut.done(nt.success),Ut.fail(nt.error),m=xs(zn,nt,g,Ut),!m)ai(-1,"No Transport");else{if(Ut.readyState=1,$&&It.trigger("ajaxSend",[Ut,nt]),R)return Ut;nt.async&&nt.timeout>0&&(E=r.setTimeout(function(){Ut.abort("timeout")},nt.timeout));try{R=!1,m.send(ne,ai)}catch(Vt){if(R)throw Vt;ai(-1,Vt)}}function ai(Vt,te,Ni,Kn){var Le,Hi,je,qe,Ke,Se=te;R||(R=!0,E&&r.clearTimeout(E),m=void 0,S=Kn||"",Ut.readyState=Vt>0?4:0,Le=Vt>=200&&Vt<300||Vt===304,Ni&&(qe=_a(nt,Ut,Ni)),!Le&&v.inArray("script",nt.dataTypes)>-1&&v.inArray("json",nt.dataTypes)<0&&(nt.converters["text script"]=function(){}),qe=Ca(nt,qe,Ut,Le),Le?(nt.ifModified&&(Ke=Ut.getResponseHeader("Last-Modified"),Ke&&(v.lastModified[C]=Ke),Ke=Ut.getResponseHeader("etag"),Ke&&(v.etag[C]=Ke)),Vt===204||nt.type==="HEAD"?Se="nocontent":Vt===304?Se="notmodified":(Se=qe.state,Hi=qe.data,je=qe.error,Le=!je)):(je=Se,(Vt||!Se)&&(Se="error",Vt<0&&(Vt=0))),Ut.status=Vt,Ut.statusText=(te||Se)+"",Le?zt.resolveWith(Ct,[Hi,Se,Ut]):zt.rejectWith(Ct,[Ut,Se,je]),Ut.statusCode(oe),oe=void 0,$&&It.trigger(Le?"ajaxSuccess":"ajaxError",[Ut,nt,Le?Hi:je]),Ht.fireWith(Ct,[Ut,Se]),$&&(It.trigger("ajaxComplete",[Ut,nt]),--v.active||v.event.trigger("ajaxStop")))}return Ut},getJSON:function(a,g,m){return v.get(a,g,m,"json")},getScript:function(a,g){return v.get(a,void 0,g,"script")}}),v.each(["get","post"],function(a,g){v[g]=function(m,C,S,w){return c(C)&&(w=w||S,S=C,C=void 0),v.ajax(v.extend({url:m,type:g,dataType:w,data:C,success:S},v.isPlainObject(m)&&m))}}),v.ajaxPrefilter(function(a){var g;for(g in a.headers)g.toLowerCase()==="content-type"&&(a.contentType=a.headers[g]||"")}),v._evalUrl=function(a,g,m){return v.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){v.globalEval(C,g,m)}})},v.fn.extend({wrapAll:function(a){var g;return this[0]&&(c(a)&&(a=a.call(this[0])),g=v(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var m=this;m.firstElementChild;)m=m.firstElementChild;return m}).append(this)),this},wrapInner:function(a){return c(a)?this.each(function(g){v(this).wrapInner(a.call(this,g))}):this.each(function(){var g=v(this),m=g.contents();m.length?m.wrapAll(a):g.append(a)})},wrap:function(a){var g=c(a);return this.each(function(m){v(this).wrapAll(g?a.call(this,m):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(a){return!v.expr.pseudos.visible(a)},v.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var ba={0:200,1223:204},Bi=v.ajaxSettings.xhr();o.cors=!!Bi&&"withCredentials"in Bi,o.ajax=Bi=!!Bi,v.ajaxTransport(function(a){var g,m;if(o.cors||Bi&&!a.crossDomain)return{send:function(C,S){var w,E=a.xhr();if(E.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(w in a.xhrFields)E[w]=a.xhrFields[w];a.mimeType&&E.overrideMimeType&&E.overrideMimeType(a.mimeType),!a.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest");for(w in C)E.setRequestHeader(w,C[w]);g=function(W){return function(){g&&(g=m=E.onload=E.onerror=E.onabort=E.ontimeout=E.onreadystatechange=null,W==="abort"?E.abort():W==="error"?typeof E.status!="number"?S(0,"error"):S(E.status,E.statusText):S(ba[E.status]||E.status,E.statusText,(E.responseType||"text")!=="text"||typeof E.responseText!="string"?{binary:E.response}:{text:E.responseText},E.getAllResponseHeaders()))}},E.onload=g(),m=E.onerror=E.ontimeout=g("error"),E.onabort!==void 0?E.onabort=m:E.onreadystatechange=function(){E.readyState===4&&r.setTimeout(function(){g&&m()})},g=g("abort");try{E.send(a.hasContent&&a.data||null)}catch(W){if(g)throw W}},abort:function(){g&&g()}}}),v.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return v.globalEval(a),a}}}),v.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),v.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var g,m;return{send:function(C,S){g=v("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",m=function(w){g.remove(),m=null,w&&S(w.type==="error"?404:200,w.type)}),h.head.appendChild(g[0])},abort:function(){m&&m()}}}});var Ss=[],qn=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ss.pop()||v.expando+"_"+ps.guid++;return this[a]=!0,a}}),v.ajaxPrefilter("json jsonp",function(a,g,m){var C,S,w,E=a.jsonp!==!1&&(qn.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&qn.test(a.data)&&"data");if(E||a.dataTypes[0]==="jsonp")return C=a.jsonpCallback=c(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,E?a[E]=a[E].replace(qn,"$1"+C):a.jsonp!==!1&&(a.url+=(Yn.test(a.url)?"&":"?")+a.jsonp+"="+C),a.converters["script json"]=function(){return w||v.error(C+" was not called"),w[0]},a.dataTypes[0]="json",S=r[C],r[C]=function(){w=arguments},m.always(function(){S===void 0?v(r).removeProp(C):r[C]=S,a[C]&&(a.jsonpCallback=g.jsonpCallback,Ss.push(C)),w&&c(S)&&S(w[0]),w=S=void 0}),"script"}),o.createHTMLDocument=function(){var a=h.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),v.parseHTML=function(a,g,m){if(typeof a!="string")return[];typeof g=="boolean"&&(m=g,g=!1);var C,S,w;return g||(o.createHTMLDocument?(g=h.implementation.createHTMLDocument(""),C=g.createElement("base"),C.href=h.location.href,g.head.appendChild(C)):g=h),S=B.exec(a),w=!m&&[],S?[g.createElement(S[1])]:(S=Zr([a],g,w),w&&w.length&&v(w).remove(),v.merge([],S.childNodes))},v.fn.load=function(a,g,m){var C,S,w,E=this,W=a.indexOf(" ");return W>-1&&(C=si(a.slice(W)),a=a.slice(0,W)),c(g)?(m=g,g=void 0):g&&typeof g=="object"&&(S="POST"),E.length>0&&v.ajax({url:a,type:S||"GET",dataType:"html",data:g}).done(function(R){w=arguments,E.html(C?v("<div>").append(v.parseHTML(R)).find(C):R)}).always(m&&function(R,$){E.each(function(){m.apply(this,w||[R.responseText,$,R])})}),this},v.expr.pseudos.animated=function(a){return v.grep(v.timers,function(g){return a===g.elem}).length},v.offset={setOffset:function(a,g,m){var C,S,w,E,W,R,$,lt=v.css(a,"position"),gt=v(a),nt={};lt==="static"&&(a.style.position="relative"),W=gt.offset(),w=v.css(a,"top"),R=v.css(a,"left"),$=(lt==="absolute"||lt==="fixed")&&(w+R).indexOf("auto")>-1,$?(C=gt.position(),E=C.top,S=C.left):(E=parseFloat(w)||0,S=parseFloat(R)||0),c(g)&&(g=g.call(a,m,v.extend({},W))),g.top!=null&&(nt.top=g.top-W.top+E),g.left!=null&&(nt.left=g.left-W.left+S),"using"in g?g.using.call(a,nt):gt.css(nt)}},v.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(S){v.offset.setOffset(this,a,S)});var g,m,C=this[0];if(C)return C.getClientRects().length?(g=C.getBoundingClientRect(),m=C.ownerDocument.defaultView,{top:g.top+m.pageYOffset,left:g.left+m.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,g,m,C=this[0],S={top:0,left:0};if(v.css(C,"position")==="fixed")g=C.getBoundingClientRect();else{for(g=this.offset(),m=C.ownerDocument,a=C.offsetParent||m.documentElement;a&&(a===m.body||a===m.documentElement)&&v.css(a,"position")==="static";)a=a.parentNode;a&&a!==C&&a.nodeType===1&&(S=v(a).offset(),S.top+=v.css(a,"borderTopWidth",!0),S.left+=v.css(a,"borderLeftWidth",!0))}return{top:g.top-S.top-v.css(C,"marginTop",!0),left:g.left-S.left-v.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&v.css(a,"position")==="static";)a=a.offsetParent;return a||be})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,g){var m=g==="pageYOffset";v.fn[a]=function(C){return K(this,function(S,w,E){var W;if(s(S)?W=S:S.nodeType===9&&(W=S.defaultView),E===void 0)return W?W[g]:S[w];W?W.scrollTo(m?W.pageXOffset:E,m?E:W.pageYOffset):S[w]=E},a,C,arguments.length)}}),v.each(["top","left"],function(a,g){v.cssHooks[g]=ss(o.pixelPosition,function(m,C){if(C)return C=ji(m,g),Rn.test(C)?v(m).position()[g]+"px":C})}),v.each({Height:"height",Width:"width"},function(a,g){v.each({padding:"inner"+a,content:g,"":"outer"+a},function(m,C){v.fn[C]=function(S,w){var E=arguments.length&&(m||typeof S!="boolean"),W=m||(S===!0||w===!0?"margin":"border");return K(this,function(R,$,lt){var gt;return s(R)?C.indexOf("outer")===0?R["inner"+a]:R.document.documentElement["client"+a]:R.nodeType===9?(gt=R.documentElement,Math.max(R.body["scroll"+a],gt["scroll"+a],R.body["offset"+a],gt["offset"+a],gt["client"+a])):lt===void 0?v.css(R,$,W):v.style(R,$,lt,W)},g,E?S:void 0,E)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,g){v.fn[g]=function(m){return this.on(g,m)}}),v.fn.extend({bind:function(a,g,m){return this.on(a,null,g,m)},unbind:function(a,g){return this.off(a,null,g)},delegate:function(a,g,m,C){return this.on(g,a,m,C)},undelegate:function(a,g,m){return arguments.length===1?this.off(a,"**"):this.off(g,a||"**",m)},hover:function(a,g){return this.on("mouseenter",a).on("mouseleave",g||a)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,g){v.fn[g]=function(m,C){return arguments.length>0?this.on(g,null,m,C):this.trigger(g)}});var xa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(a,g){var m,C,S;if(typeof g=="string"&&(m=a[g],g=a,a=m),!!c(a))return C=P.call(arguments,2),S=function(){return a.apply(g||this,C.concat(P.call(arguments)))},S.guid=a.guid=a.guid||v.guid++,S},v.holdReady=function(a){a?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=tt,v.isFunction=c,v.isWindow=s,v.camelCase=J,v.type=_,v.now=Date.now,v.isNumeric=function(a){var g=v.type(a);return(g==="number"||g==="string")&&!isNaN(a-parseFloat(a))},v.trim=function(a){return a==null?"":(a+"").replace(xa,"$1")};var Sa=r.jQuery,wa=r.$;return v.noConflict=function(a){return r.$===v&&(r.$=wa),a&&r.jQuery===v&&(r.jQuery=Sa),v},typeof b>"u"&&(r.jQuery=r.$=v),v})})(Yo);var Tc=Yo.exports;const Ze=Cc(Tc);class Oc{constructor(r,b){Je(this,"target");Je(this,"callback");Je(this,"args",{});Je(this,"back",{});return this.target=r,this.callback=b,Ze(this.target).on("pointermove",x=>{if(x.buttons!==1||x.clientX==null||x.clientY==null){this.back.x=x.clientX,this.back.y=x.clientY;return}if(this.args.x===0&&this.args.y===0){this.back.x=x.clientX,this.back.y=x.clientY;return}this.back.x==null&&(this.back.x=x.clientX),this.back.y==null&&(this.back.y=x.clientY),this.args.x=x.clientX-this.back.x,this.args.y=x.clientY-this.back.y,this.back.x=x.clientX,this.back.y=x.clientY,this.callback(this.args)}),this}}const Ec={id:"container"},Pc=Eo({__name:"cvs",setup(f){return console.clear(),Ze(()=>{const r=new wc(Ze("#container")[0]),b=-5;var x=!1,O=!1,P={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1};const z=async()=>{O||(P.ArrowUp&&r.moveCamera(0,-b),P.ArrowDown&&r.moveCamera(0,b),P.ArrowLeft&&r.moveCamera(-b,0),P.ArrowRight&&r.moveCamera(b,0),requestAnimationFrame(()=>{z()}))};Ze("html").on("keydown",()=>{x||(O=!1,x=!0,z())}),Ze("html").on("keyup",()=>{P.ArrowDown==!1&&P.ArrowUp==!1&&P.ArrowLeft==!1&&P.ArrowRight==!1&&(x=!1,O=!0)}),Ze("html").on("keydown",d=>{d.originalEvent!=null&&(P[d.originalEvent.code]=!0)}),Ze("html").on("keyup",d=>{d.originalEvent!=null&&(P[d.originalEvent.code]=!1)}),new Oc(Ze("html")[0],d=>{r.moveCamera(d.x,d.y)})}),(r,b)=>(Ur(),zr("div",Ec))}}),Ac=Eo({__name:"App",setup(f){return(r,b)=>(Ur(),zr(Be,null,[ze(Pc),ze(yc,{style:{position:"relative",top:"10px"}})],64))}}),Dc=cc(Ac);Dc.mount("#app");
